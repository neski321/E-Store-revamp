/*! For license information please see main.17618496.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:E.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(_,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(j(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(N);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,v(j),j=-1),p=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,S=null,j=-1,_=5,C=-1;function T(){return!(t.unstable_now()-C<_)}function I(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?E():(k=!1,S=null)}}else k=!1}if("function"===typeof x)E=function(){x(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=I,E=function(){O.postMessage(null)}}else E=function(){y(I,0)};function P(e){S=e,k||(k=!0,E())}function R(e,n){j=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(j),j=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function o(e,t){if(null==e)return{};var n,r,s=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function l(e,t){return c(e)||u(e,t)||d(e,t)||f()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,s,i=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){o=!0,s=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw s}}return i}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g,y,v,x={exports:{}};function b(){return g?m:(g=1,m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function w(){if(v)return y;v=1;var e=b();function t(){}function n(){}return n.resetWarningCache=t,y=function(){function r(t,n,r,s,i,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function s(){return r}r.isRequired=r;var i={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}x.exports=w()();var N=p(x.exports),E=function(e,n,r){var s=!!r,i=t.useRef(r);t.useEffect(function(){i.current=r},[r]),t.useEffect(function(){if(!s||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,t),function(){e.off(n,t)}},[s,n,e,i])},k=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},S=function(e){return null!==e&&"object"===s(e)},j=function(e){return S(e)&&"function"===typeof e.then},_=function(e){return S(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},C="[object Object]",T=function e(t,n){if(!S(t)||!S(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===C;if(s!==(Object.prototype.toString.call(n)===C))return!1;if(!s&&!r)return t===n;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var o={},l=0;l<i.length;l+=1)o[i[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);if(u.length!==i.length)return!1;var d=t,h=n,f=function(t){return e(d[t],h[t])};return u.every(f)},I=function(e,t,n){return S(e)?Object.keys(e).reduce(function(s,a){var o=!S(t)||!T(e[a],t[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?r(r({},s||{}),{},i({},a,e[a])):s},null):null},A="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(null===e||_(e))return e;throw new Error(t)},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(j(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return O(e,t)})};var n=O(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},R=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"3.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},L=t.createContext(null);L.displayName="ElementsContext";var D=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},M=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return P(n)},[n]),a=l(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(r):null}}),2),o=a[0],c=a[1];t.useEffect(function(){var e=!0,t=function(e){c(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==i.tag||o.stripe?"sync"!==i.tag||o.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,o,r]);var u=k(n);t.useEffect(function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=k(r);return t.useEffect(function(){if(o.elements){var e=I(r,d,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,d,o.elements]),t.useEffect(function(){R(o.stripe)},[o.stripe]),t.createElement(L.Provider,{value:o},s)};M.propTypes={stripe:N.any,options:N.object};var U=function(e){var n=t.useContext(L);return D(n,e)},F=function(){return U("calls useElements()").elements},V=function(e){return(0,e.children)(U("mounts <ElementsConsumer>"))};V.propTypes={children:N.func.isRequired};var B=["on","session"],z=t.createContext(null);z.displayName="CheckoutSdkContext";var q=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},$=t.createContext(null);$.displayName="CheckoutContext";var H=function(e,t){if(!e)return null;e.on,e.session;var n=o(e,B);return t?Object.assign(t,n):Object.assign(e.session(),n)},W="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",K=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return P(n,W)},[n]),a=l(t.useState(null),2),o=a[0],c=a[1],u=l(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,checkoutSdk:null}}),2),d=u[0],h=u[1],f=function(e,t){h(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},p=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==i.tag||d.stripe?"sync"===i.tag&&i.stripe&&!p.current&&(p.current=!0,i.stripe.initCheckout(r).then(function(e){e&&(f(i.stripe,e),e.on("change",c))})):i.stripePromise.then(function(t){t&&e&&!p.current&&(p.current=!0,t.initCheckout(r).then(function(e){e&&(f(t,e),e.on("change",c))}))}),function(){e=!1}},[i,d,r,c]);var m=k(n);t.useEffect(function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[m,n]);var g=k(r),y=k(d.checkoutSdk);t.useEffect(function(){var e,t;if(d.checkoutSdk){var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,s=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance,i=!T(s,n),a=!y&&d.checkoutSdk;s&&(i||a)&&d.checkoutSdk.changeAppearance(s)}},[r,g,d.checkoutSdk,y]),t.useEffect(function(){R(d.stripe)},[d.stripe]);var v=t.useMemo(function(){return H(d.checkoutSdk,o)},[d.checkoutSdk,o]);return d.checkoutSdk?t.createElement(z.Provider,{value:d},t.createElement($.Provider,{value:v},s)):null};K.propTypes={stripe:N.any,options:N.shape({fetchClientSecret:N.func.isRequired,elementsOptions:N.object}).isRequired};var G=function(e){var n=t.useContext(z);return q(n,e)},Q=function(e){var n=t.useContext(z),r=t.useContext(L);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?q(n,e):D(r,e)},Y=function(){G("calls useCheckout()");var e=t.useContext($);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},X=["mode"],J=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Z=function(e,n){var r="".concat(J(e),"Element"),s=n?function(e){Q("mounts <".concat(r,">"));var n=e.id,s=e.className;return t.createElement("div",{id:n,className:s})}:function(n){var s,i=n.id,a=n.className,c=n.options,u=void 0===c?{}:c,d=n.onBlur,h=n.onFocus,f=n.onReady,p=n.onChange,m=n.onEscape,g=n.onClick,y=n.onLoadError,v=n.onLoaderStart,x=n.onNetworksChange,b=n.onConfirm,w=n.onCancel,N=n.onShippingAddressChange,S=n.onShippingRateChange,j=Q("mounts <".concat(r,">")),_="elements"in j?j.elements:null,C="checkoutSdk"in j?j.checkoutSdk:null,T=l(t.useState(null),2),A=T[0],O=T[1],P=t.useRef(null),R=t.useRef(null);E(A,"blur",d),E(A,"focus",h),E(A,"escape",m),E(A,"click",g),E(A,"loaderror",y),E(A,"loaderstart",v),E(A,"networkschange",x),E(A,"confirm",b),E(A,"cancel",w),E(A,"shippingaddresschange",N),E(A,"shippingratechange",S),E(A,"change",p),f&&(s="expressCheckout"===e?f:function(){f(A)}),E(A,"ready",s),t.useLayoutEffect(function(){if(null===P.current&&null!==R.current&&(_||C)){var t=null;if(C)switch(e){case"payment":t=C.createPaymentElement(u);break;case"address":if(!("mode"in u))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=u.mode,s=o(u,X);if("shipping"===n)t=C.createShippingAddressElement(s);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=C.createBillingAddressElement(s)}break;case"expressCheckout":t=C.createExpressCheckoutElement(u);break;case"currencySelector":t=C.createCurrencySelectorElement();break;case"taxId":t=C.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else _&&(t=_.create(e,u));P.current=t,O(t),t&&t.mount(R.current)}},[_,C,u]);var L=k(u);return t.useEffect(function(){if(P.current){var e=I(u,L,["paymentRequest"]);e&&"update"in P.current&&P.current.update(e)}},[u,L]),t.useLayoutEffect(function(){return function(){if(P.current&&"function"===typeof P.current.destroy)try{P.current.destroy(),P.current=null}catch(e){}}},[]),t.createElement("div",{id:i,className:a,ref:R})};return s.propTypes={id:N.string,className:N.string,onChange:N.func,onBlur:N.func,onFocus:N.func,onReady:N.func,onEscape:N.func,onClick:N.func,onLoadError:N.func,onLoaderStart:N.func,onNetworksChange:N.func,onConfirm:N.func,onCancel:N.func,onShippingAddressChange:N.func,onShippingRateChange:N.func,options:N.object},s.displayName=r,s.__elementType=e,s},ee="undefined"===typeof window,te=t.createContext(null);te.displayName="EmbeddedCheckoutProviderContext";var ne=function(){var e=t.useContext(te);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},re="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",se=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return P(n,re)},[n]),a=t.useRef(null),o=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],d=c[1];t.useEffect(function(){if(!o.current&&!a.current){var e=function(e){o.current||a.current||(o.current=e,a.current=o.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==i.tag||o.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==i.tag||o.current||!r.clientSecret&&!r.fetchClientSecret||e(i.stripe):i.stripePromise.then(function(t){t&&e(t)})}},[i,r,u,o]),t.useEffect(function(){return function(){u.embeddedCheckout?(a.current=null,u.embeddedCheckout.destroy()):a.current&&a.current.then(function(){a.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),t.useEffect(function(){R(o)},[o]);var h=k(n);t.useEffect(function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var f=k(r);return t.useEffect(function(){null!=f&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=f.clientSecret&&r.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.fetchClientSecret&&r.fetchClientSecret!==f.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&r.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=f.onShippingDetailsChange&&r.onShippingDetailsChange!==f.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=f.onLineItemsChange&&r.onLineItemsChange!==f.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[f,r]),t.createElement(te.Provider,{value:u},s)},ie=function(e){var n=e.id,r=e.className,s=ne().embeddedCheckout,i=t.useRef(!1),a=t.useRef(null);return t.useLayoutEffect(function(){return!i.current&&s&&null!==a.current&&(s.mount(a.current),i.current=!0),function(){if(i.current&&s)try{s.unmount(),i.current=!1}catch(e){}}},[s]),t.createElement("div",{ref:a,id:n,className:r})},ae=function(e){var n=e.id,r=e.className;return ne(),t.createElement("div",{id:n,className:r})},oe=ee?ae:ie,le=function(){return Q("calls useStripe()").stripe},ce=Z("auBankAccount",ee),ue=Z("card",ee),de=Z("cardNumber",ee),he=Z("cardExpiry",ee),fe=Z("cardCvc",ee),pe=Z("fpxBank",ee),me=Z("iban",ee),ge=Z("idealBank",ee),ye=Z("p24Bank",ee),ve=Z("epsBank",ee),xe=Z("payment",ee),be=Z("expressCheckout",ee),we=Z("currencySelector",ee),Ne=Z("paymentRequestButton",ee),Ee=Z("linkAuthentication",ee),ke=Z("address",ee),Se=Z("shippingAddress",ee),je=Z("paymentMethodMessaging",ee),_e=Z("affirmMessage",ee),Ce=Z("afterpayClearpayMessage",ee),Te=Z("taxId",ee);e.AddressElement=ke,e.AffirmMessageElement=_e,e.AfterpayClearpayMessageElement=Ce,e.AuBankAccountElement=ce,e.CardCvcElement=fe,e.CardElement=ue,e.CardExpiryElement=he,e.CardNumberElement=de,e.CheckoutProvider=K,e.CurrencySelectorElement=we,e.Elements=M,e.ElementsConsumer=V,e.EmbeddedCheckout=oe,e.EmbeddedCheckoutProvider=se,e.EpsBankElement=ve,e.ExpressCheckoutElement=be,e.FpxBankElement=pe,e.IbanElement=me,e.IdealBankElement=ge,e.LinkAuthenticationElement=Ee,e.P24BankElement=ye,e.PaymentElement=xe,e.PaymentMethodMessagingElement=je,e.PaymentRequestButtonElement=Ne,e.ShippingAddressElement=Se,e.TaxIdElement=Te,e.useCheckout=Y,e.useElements=F,e.useStripe=le}(t,n(43))},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,M=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case j:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){X(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ie(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Ee=null,ke=null;function Se(e){if(e=xs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function je(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function _e(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ce(e,t,n)}finally{Ie=!1,(null!==Ee||null!==ke)&&(Te(),_e())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Le(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){De=!0,Me=e}};function Be(e,t,n,r,s,i,a,o,l){De=!1,Me=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(ze(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return $e(s),e;if(a===r)return $e(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Xe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,Et,kt,St,jt=!1,_t=[],Ct=null,Tt=null,It=null,At=new Map,Ot=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){jt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==It&&Ut(It)&&(It=null),At.forEach(Ft),Ot.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,jt||(jt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Tt&&Bt(Tt,e),null!==It&&Bt(It,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,$t=!0;function Ht(e,t,n,r){var s=xt,i=qt.transition;qt.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=s,qt.transition=i}}function Wt(e,t,n,r){var s=xt,i=qt.transition;qt.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=s,qt.transition=i}}function Kt(e,t,n,r){if($t){var s=Qt(e,t,n,r);if(null===s)$r(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,s),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,s),!0;case"mouseover":return It=Dt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Dt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ot.set(i,Dt(Ot.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=xs(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&$r(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vs(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return kn}var jn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=sn(jn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Rn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){je(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bs(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ir(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},kr={};function Sr(e){if(Er[e])return Er[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var jr=Sr("animationend"),_r=Sr("animationiteration"),Cr=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Rr=Ar[Pr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(jr,"onAnimationEnd"),Or(_r,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(i(198));var u=Me;De=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case jr:case _r:case Cr:l=yn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bs(l),f=null==c?o:bs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if($n(o))if(Xn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bs(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zn?Vn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&zn&&(v=en()):(Jt="value"in(Xt=s)?Xt.value:Xt.textContent,zn=!0)),0<(y=Wr(r,x)).length&&(x=new bn(x,e,null,n,s),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Bn(n))&&(x.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Ur(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Oe(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Oe(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Oe(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=Oe(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],Es=-1;function ks(e){return{current:e}}function Ss(e){0>Es||(e.current=Ns[Es],Ns[Es]=null,Es--)}function js(e,t){Es++,Ns[Es]=e.current,e.current=t}var _s={},Cs=ks(_s),Ts=ks(!1),Is=_s;function As(e,t){var n=e.type.contextTypes;if(!n)return _s;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Os(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ss(Ts),Ss(Cs)}function Rs(e,t,n){if(Cs.current!==_s)throw Error(i(168));js(Cs,t),js(Ts,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_s,Is=Cs.current,js(Cs,e),js(Ts,Ts.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ls(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Ss(Ts),Ss(Cs),js(Cs,e)):Ss(Ts),js(Ts,n)}var Us=null,Fs=!1,Vs=!1;function Bs(e){null===Us?Us=[e]:Us.push(e)}function zs(){if(!Vs&&null!==Us){Vs=!0;var e=0,t=xt;try{var n=Us;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,Fs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ke(Ze,zs),s}finally{xt=t,Vs=!1}}return null}var qs=[],$s=0,Hs=null,Ws=0,Ks=[],Gs=0,Qs=null,Ys=1,Xs="";function Js(e,t){qs[$s++]=Ws,qs[$s++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Ks[Gs++]=Ys,Ks[Gs++]=Xs,Ks[Gs++]=Qs,Qs=e;var r=Ys;e=Xs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,Xs=i+e}else Ys=1<<i|n<<s|r,Xs=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=qs[--$s],qs[$s]=null,Ws=qs[--$s],qs[$s]=null;for(;e===Qs;)Qs=Ks[--Gs],Ks[Gs]=null,Xs=Ks[--Gs],Ks[Gs]=null,Ys=Ks[--Gs],Ks[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Ys,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case O:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case O:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),si&&Js(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return si&&Js(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=f(s,m,v.value,c);if(null===x){null===m&&(m=y);break}e&&m&&null===x.alternate&&t(s,m),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return o(r);case O:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(L(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Mc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bi=xi(!0),wi=xi(!1),Ni=ks(null),Ei=null,ki=null,Si=null;function ji(){Si=ki=Ei=null}function _i(e){var t=Ni.current;Ss(Ni),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){Ei=e,Si=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Ei)throw Error(i(308));ki=e,Ei.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ai=null;function Oi(e){null===Ai?Ai=[e]:Ai.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Oi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ri(e,n)}return null===(s=r.interleaved)?(t.next=t,Oi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ri(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var $i={},Hi=ks($i),Wi=ks($i),Ki=ks($i);function Gi(e){if(e===$i)throw Error(i(174));return e}function Qi(e,t){switch(js(Ki,t),js(Wi,e),js(Hi,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Hi),js(Hi,t)}function Yi(){Ss(Hi),Ss(Wi),Ss(Ki)}function Xi(e){Gi(Ki.current);var t=Gi(Hi.current),n=le(t,e.type);t!==n&&(js(Wi,e),js(Hi,n))}function Ji(e){Wi.current===e&&(Ss(Hi),Ss(Wi))}var Zi=ks(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,sa=b.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Dl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Ea(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,xo=!0),r=r.queue,La(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,r,s,t),void 0,null),null===Tl)throw Error(i(349));0!==(30&ia)||ka(n,t,s)}return s}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ca(e)}function ja(e,t,n){return n(function(){_a(t)&&Ca(e)})}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return va().memoizedState}function Oa(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Ia(t,n,i,r))}aa.flags|=e,s.memoizedState=Ia(1|t,n,i,r)}function Ra(e,t){return Oa(8390656,8,e,t)}function La(e,t){return Pa(2048,8,e,t)}function Da(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ua.bind(null,t,e),n)}function Va(){}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function $a(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{xt=n,sa.transition=r}}function Ha(){return va().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Qa(t,n);else if(null!==(n=Pi(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ka(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Qa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Oi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Pi(e,t,s,r))&&(nc(n,e,r,s=ec()),Ya(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ii,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ta,useDebugValue:Va,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=$a.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Tl)throw Error(i(349));0!==(30&ia)||ka(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(ja.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Tl.identifierPrefix;if(si){var n=Xs;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:La,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Ma,useMemo:za,useReducer:ba,useRef:Aa,useState:function(){return ba(xa)},useDebugValue:Va,useDeferredValue:function(e){return qa(va(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:La,useImperativeHandle:Fa,useInsertionEffect:Da,useLayoutEffect:Ma,useMemo:za,useReducer:wa,useRef:Aa,useState:function(){return wa(xa)},useDebugValue:Va,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Ui(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Ui(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Ui(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fi(e,s,r))&&(nc(t,e,r,n),Vi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=_s,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Os(t)?Is:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):_s),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Os(t)?Is:Cs.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ui(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Ui(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ui(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ti(t,s),r=ma(e,t,n,r,i,s),n=ga(),null===e||xo?(si&&n&&ei(t),t.flags|=1,bo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$o(e,t,s))}function No(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return $o(e,t,s)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,$o(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return jo(e,t,n,r,s)}function ko(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},js(Pl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,js(Pl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,js(Pl,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,js(Pl,Ol),Ol|=r;return bo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,n,r,s){var i=Os(n)?Is:Cs.current;return i=As(t,i),Ti(t,s),n=ma(e,t,n,r,i,s),r=ga(),null===e||xo?(si&&r&&ei(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$o(e,t,s))}function _o(e,t,n,r,s){if(Os(n)){var i=!0;Ds(t)}else i=!1;if(Ti(t,s),null===t.stateNode)qo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=As(t,c=Os(n)?Is:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Li=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ts.current||Li?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Li||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=As(t,l=Os(n)?Is:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Li=!1,h=t.memoizedState,a.state=h,zi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Ts.current||Li?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Li||so(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,i,s)}function Co(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),$o(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,o,i)):bo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Qi(e,t.containerInfo)}function Io(e,t,n,r,s){return fi(),pi(s),t.flags|=256,bo(e,t,n,r),t.child}var Ao,Oo,Po,Ro,Lo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),js(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,s,0,null),e=Lc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Lo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Dc({mode:"visible",children:r.children},s,0,null),(a=Lc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Tl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ri(e,s),nc(r,e,s,-1))}return mc(),Fo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Gs++]=Ys,Ks[Gs++]=Xs,Ks[Gs++]=Qs,Ys=e.id,Xs=e.overflow,Qs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Pc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&pi(r),bi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Bo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(js(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Os(t.type)&&Ps(),Wo(t),null;case 3:return r=t.stateNode,Yi(),Ss(Ts),Ss(Cs),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Oo(e,t),Wo(t),null;case 5:Ji(t);var s=Gi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wo(t),null}if(e=Gi(Hi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Fr(Lr[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":se(r,a),Fr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Fr(Lr[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":Y(e,r),s=Q(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi(Ki.current),Gi(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Yi(),Oo(e,t),null===e&&zr(t.stateNode.containerInfo),Wo(t),null;case 10:return _i(t.type._context),Wo(t),null;case 19:if(Ss(Zi),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return js(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Wo(t),null}else 2*Xe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zi.current,js(Zi,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Go(e,t){switch(ti(t),t.tag){case 1:return Os(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ss(Ts),Ss(Cs),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Yi(),null;case 10:return _i(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gi(Hi.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Yo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),zt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):x(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,ml(t,e),Yo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Jo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var s=Jo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Qo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Qo;var c=Yo;if(Qo=a,(Yo=l)&&!c)for(Jo=s;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Nl(s):null!==l?(l.return=a,Jo=l):Nl(s);for(;null!==i;)Jo=i,xl(i,t,n),i=i.sibling;Jo=s,Qo=o,Yo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Jo=i):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Nl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var El,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,jl=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,Cl=0,Tl=null,Il=null,Al=0,Ol=0,Pl=ks(0),Rl=0,Ll=null,Dl=0,Ml=0,Ul=0,Fl=null,Vl=null,Bl=0,zl=1/0,ql=null,$l=!1,Hl=null,Wl=null,Kl=!1,Gl=null,Ql=0,Yl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==mi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(i(185));yt(e,n,r),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(Ml|=n),4===Rl&&oc(e,Al)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(zl=Xe()+500,Fs&&zs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Tl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),as(function(){0===(6&Cl)&&zs()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Cl;Cl|=2;var a=pc();for(Tl===e&&Al===t||(ql=null,zl=Xe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}ji(),Sl.current=a,Cl=s,null!==Il?t=0:(Tl=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Vl,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Vl,ql),t);break}wc(e,Vl,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Vl,ql),r);break}wc(e,Vl,ql);break;default:throw Error(i(329))}}}return rc(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(i(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,ql),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(zl=Xe()+500,Fs&&zs())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Cl)&&Nc();var t=Cl;Cl|=1;var n=_l.transition,r=xt;try{if(_l.transition=null,xt=1,e)return e()}finally{xt=r,_l.transition=n,0===(6&(Cl=t))&&zs()}}function dc(){Ol=Pl.current,Ss(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Yi(),Ss(Ts),Ss(Cs),na();break;case 5:Ji(r);break;case 4:Yi();break;case 13:case 19:Ss(Zi);break;case 10:_i(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Il=e=Pc(e.current,null),Al=Ol=t,Rl=0,Ll=null,Ul=Ml=Dl=0,Vl=Fl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function fc(e,t){for(;;){var n=Il;try{if(ji(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,jl.current=null,null===n||null===n.return){Rl=1,Ll=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Wl||!Wl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Xa,null===e?Xa:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Dl)&&0===(268435455&Ml)||oc(Tl,Al)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Tl===e&&Al===t||(ql=null,hc(e,t));;)try{yc();break}catch(s){fc(e,s)}if(ji(),Cl=n,Sl.current=r,null!==Il)throw Error(i(261));return Tl=null,Al=0,Rl}function yc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!Qe();)xc(Il)}function xc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,jl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ol)))return void(Il=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=xt,s=_l.transition;try{_l.transition=null,xt=1,function(e,t,n,r){do{Nc()}while(null!==Gl);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Tl&&(Il=Tl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,function(){return Nc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var o=xt;xt=1;var l=Cl;Cl|=4,jl.current=null,function(e,t){if(es=$t,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},$t=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ts),$t=!!es,ts=es=null,e.current=n,vl(n,e,s),Ye(),Cl=l,xt=o,_l.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=s),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($l)throw $l=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&Nc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,zs()}(e,t,n,r)}finally{_l.transition=s,xt=r}return null}function Nc(){if(null!==Gl){var e=bt(Ql),t=_l.transition,n=xt;try{if(_l.transition=null,xt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Cl))throw Error(i(331));var s=Cl;for(Cl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(il(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Jo=v;break e}Jo=a.return}}var x=e.current;for(Jo=x;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=x;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){kc(l,l.return,N)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Cl=s,zs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{xt=n,_l.transition=t}}return!1}function Ec(e,t,n){e=Fi(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Fi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Xe()-Bl?hc(e,0):Ul|=n),rc(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ri(e,t))&&(yt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),jc(e,n)}function Tc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Lc(n.children,s,a,t);case k:o=8,s|=8;break;case S:return(e=Ac(12,n,t,2|s)).elementType=S,e.lanes=a,e;case T:return(e=Ac(13,n,t,s)).elementType=T,e.lanes=a,e;case I:return(e=Ac(19,n,t,s)).elementType=I,e.lanes=a,e;case P:return Dc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case j:o=10;break e;case _:o=9;break e;case C:o=11;break e;case A:o=14;break e;case O:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,i,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Bc(e){if(!e)return _s;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Os(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Os(n))return Ls(e,n,t)}return t}function zc(e,t,n,r,s,i,a,o,l){return(e=Vc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=Ui(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function qc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ui(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(s,t,a))&&(nc(e,s,a,i),Vi(e,s,a)),a}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fi();break;case 5:Xi(t);break;case 1:Os(t.type)&&Ds(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;js(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(js(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(js(Zi,1&Zi.current),null!==(e=$o(e,t,n))?e.sibling:null);js(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),js(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return $o(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=As(t,Cs.current);Ti(t,n),s=ma(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Os(r)?(a=!0,Ds(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Di(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),bo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),s){case 0:t=jo(null,t,r,e,n);break e;case 1:t=_o(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,jo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,_o(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(To(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Io(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=$o(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Mo(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,js(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ts.current){t=$o(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ui(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ci(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ti(t,n),r=r(s=Ii(s)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),No(e,t,r,s=to(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),qo(e,t),t.tag=1,Os(r)?(e=!0,Ds(t)):e=!1,Ti(t,n),io(t,r,s),oo(t,r,s,n),Co(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=$c(a);o.call(e)}}qc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=$c(a);i.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[ps]=a.current,zr(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=$c(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[ps]=l.current,zr(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,s,r);return $c(a)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[ps]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(zl=Xe()+500,zs()))}break;case 13:uc(function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},Nt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},kt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Ne=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[xs,bs,ws,je,_e,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>dg,hasStandardBrowserEnv:()=>fg,hasStandardBrowserWebWorkerEnv:()=>pg,navigator:()=>hg,origin:()=>mg});var t,r=n(43),s=n.t(r,2),i=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:c=!1}=s,f=i.history,p=t.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(a({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(i,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(o,v),m=e,()=>{i.removeEventListener(o,v),m=null}},createHref:e=>n(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let s=d(b.location,e,n);r&&r(s,e),g=y()+1;let a=u(s,g),o=b.createHref(s);try{f.pushState(a,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(o)}c&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let s=d(b.location,e,n);r&&r(s,e),g=y();let i=u(s,g),a=b.createHref(s);f.replaceState(i,"",a),c&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let s=A(("string"===typeof t?f(t):t).pathname||"/",n);if(null==s)return null;let i=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=I(s);a=C(i[o],e,r)}return a}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=D([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),v(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:_(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))s(e,t,r);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=x(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,w=3,N=2,E=1,k=10,S=-2,j=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=S),t&&(r+=N),n.filter(e=>!j(e)).reduce((e,t)=>e+(b.test(t)?w:""===t?E:k),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:D([i,u.pathname]),pathnameBase:M(D([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=D([i,u.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=P(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=f(e):(s=a({},e),l(!s.pathname||!s.pathname.includes("?"),O("?","pathname","search",s)),l(!s.pathname||!s.pathname.includes("#"),O("#","pathname","hash",s)),l(!s.search||!s.search.includes("#"),O("#","search","hash",s)));let i,o=""===e||""===s.pathname,c=o?"/":s.pathname;if(null==c)i=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?f(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:U(r),hash:F(s)}}(s,i),d=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],z=(new Set(B),["get",...B]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const $=r.createContext(null);const H=r.createContext(null);const W=r.createContext(null);const K=r.createContext(null);const G=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function Y(){return null!=r.useContext(K)}function X(){return Y()||l(!1),r.useContext(K).location}function J(e){r.useContext(W).static||r.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=r.useContext(G);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);return J(()=>{n.current=!0}),r.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,q({fromRouteId:t},s)))},[e,t])}():function(){Y()||l(!1);let e=r.useContext($),{basename:t,future:n,navigator:s}=r.useContext(W),{matches:i}=r.useContext(G),{pathname:a}=X(),o=JSON.stringify(R(i,n.v7_relativeSplatPath)),c=r.useRef(!1);return J(()=>{c.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void s.go(n);let i=L(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:D([t,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)},[t,s,o,a,e])}()}const ee=r.createContext(null);function te(){let{matches:e}=r.useContext(G),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:s}=r.useContext(W),{matches:i}=r.useContext(G),{pathname:a}=X(),o=JSON.stringify(R(i,s.v7_relativeSplatPath));return r.useMemo(()=>L(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function re(e,n,s,i){Y()||l(!1);let{navigator:a}=r.useContext(W),{matches:o}=r.useContext(G),c=o[o.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=X();if(n){var m;let e="string"===typeof n?f(n):n;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||l(!1),h=e}else h=p;let y=h.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=g(e,{pathname:v});let b=le(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:D([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:D([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,i);return n&&b?r.createElement(K.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},b):b}function se(){let e=function(){var e;let t=r.useContext(Q),n=he(ue.UseRouteError),s=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const ie=r.createElement(se,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(G.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext($);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(G.Provider,{value:t},s)}function le(e,t,n,s){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,i)=>{let a,l=!1,h=null,f=null;var p;n&&(a=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||ie,u&&(d<0&&0===i?(p="route-fallback",!1||pe[p]||(pe[p]=!0),l=!0,f=null):d===i&&(l=!0,f=s.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:l?f:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(oe,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext($);return t||l(!1),t}function he(e){let t=r.useContext(H);return t||l(!1),t}function fe(e){let t=function(){let e=r.useContext(G);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:n,state:s,relative:i}=e;Y()||l(!1);let{future:a,static:o}=r.useContext(W),{matches:c}=r.useContext(G),{pathname:u}=X(),d=Z(),h=L(t,R(c,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return r.useEffect(()=>d(JSON.parse(f),{replace:n,state:s,relative:i}),[d,f,i,n,s]),null}function ye(e){return function(e){let t=r.useContext(G).outlet;return t?r.createElement(ee.Provider,{value:e},t):t}(e.context)}function ve(e){l(!1)}function xe(e){let{basename:n="/",children:s=null,location:i,navigationType:a=t.Pop,navigator:o,static:c=!1,future:u}=e;Y()&&l(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:d,navigator:o,static:c,future:q({v7_relativeSplatPath:!1},u)}),[d,u,o,c]);"string"===typeof i&&(i=f(i));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,x=r.useMemo(()=>{let e=A(p,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,p,m,g,y,v,a]);return null==x?null:r.createElement(W.Provider,{value:h},r.createElement(K.Provider,{children:s,value:x}))}function be(e){let{children:t,location:n}=e;return re(we(t),n)}new Promise(()=>{});r.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,we(e.props.children,i));e.type!==ve&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,i)),n.push(a)}),n}var Ne=n(950),Ee=n.t(Ne,2);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function je(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Nv){}new Map;const Ce=s.startTransition;Ee.flushSync,s.useId;function Te(e){let{basename:t,children:n,future:s,window:i}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),p(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return d("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:f}=s||{},m=r.useCallback(e=>{f&&Ce?Ce(()=>u(e)):u(e)},[u,f]);return r.useLayoutEffect(()=>l.listen(m),[l,m]),r.useEffect(()=>me(s),[s]),r.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=r.forwardRef(function(e,t){let n,{onClick:s,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,m=Se(e,_e),{basename:g}=r.useContext(W),y=!1;if("string"===typeof d&&Ae.test(d)&&(n=d,Ie))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=A(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Nv){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||l(!1);let{basename:s,navigator:i}=r.useContext(W),{hash:a,pathname:o,search:c}=ne(e,{relative:n}),u=o;return"/"!==s&&(u="/"===o?s:D([s,o])),i.createHref({pathname:u,search:c,hash:a})}(d,{relative:i}),x=function(e,t){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=Z(),u=X(),d=ne(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==s?s:h(u)===h(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,s,i,n,e,a,o,l])}(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});return r.createElement("a",ke({},m,{href:n||v,onClick:y||a?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:t,target:u}))});var Pe,Re;function Le(e){let t=r.useRef(je(e)),n=r.useRef(!1),s=X(),i=r.useMemo(()=>function(e,t){let n=je(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(s.search,n.current?null:t.current),[s.search]),a=Z(),o=r.useCallback((e,t)=>{const r=je("function"===typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Ue;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){return function(e){const t=De(e);return Me.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ve=function(e){try{return Me.decodeString(e,!0)}catch(Nv){console.error("base64Decode failed: ",Nv)}return null};const Be=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ze=()=>{try{return Be()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:3000/api",REACT_APP_FIREBASE_API_KEY:"AIzaSyDGdUSxHwKUGL4NWaQq_z6Ex4KSgxlWHig",REACT_APP_FIREBASE_AUTH_DOMAIN:"e-commerce-3d587.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"e-commerce-3d587",REACT_APP_FIREBASE_STORAGE_BUCKET:"e-commerce-3d587.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"576725083107",REACT_APP_FIREBASE_APP_ID:"1:576725083107:web:9641344343363d0bb4f6d6",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51Rq3nxEBsuDDBb3nE6FcyBweQ9znL4kMt52sY8pcGQEm5Ec4Mp0Z3RRSkLxKFu7yONrsgsPYBSRPFdrqjBEE9jnS002n6tqSRR"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Nv){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(Nv){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Nv}`)}},qe=e=>{var t,n;return null===(n=null===(t=ze())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$e=()=>{var e;return null===(e=ze())||void 0===e?void 0:e.config},He=e=>{var t;return null===(t=ze())||void 0===t?void 0:t[`_${e}`]};class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ke(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return!function(){var e;const t=null===(e=ze())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Nv){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"===typeof indexedDB}catch(Nv){return!1}}class Ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(Je,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Ye(n,i,t)}}const Je=/\{\$([^}]+)}/g;function Ze(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(et(n)&&et(i)){if(!Ze(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=it),void 0===r.error&&(r.error=it),void 0===r.complete&&(r.complete=it);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Nv){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Nv){"undefined"!==typeof console&&console.error&&console.error(Nv)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function it(){}function at(e){return e&&e._delegate?e._delegate:e}class ot{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lt="[DEFAULT]";class ct{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new We;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Nv){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Nv){if(r)return null;throw Nv}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(Nv){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Nv){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===lt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.component?this.component.multipleInstances?e:lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ct(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dt=[];var ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));const ft={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},pt=ht.INFO,mt={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},gt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=mt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class yt{constructor(e){this.name=e,this._logLevel=pt,this._logHandler=gt,this._userLogHandler=null,dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}let vt,xt;const bt=new WeakMap,wt=new WeakMap,Nt=new WeakMap,Et=new WeakMap,kt=new WeakMap;let St={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Nt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ct(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tt(this),n),Ct(bt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ct(e.apply(Tt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Tt(this),t,...r);return Nt.set(i,t.sort?t.sort():[t]),Ct(i)}}function _t(e){return"function"===typeof e?jt(e):(e instanceof IDBTransaction&&function(e){if(wt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});wt.set(e,t)}(e),t=e,(vt||(vt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,St):e);var t}function Ct(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Ct(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&bt.set(t,e)}).catch(()=>{}),kt.set(t,e),t}(e);if(Et.has(e))return Et.get(e);const t=_t(e);return t!==e&&(Et.set(e,t),kt.set(t,e)),t}const Tt=e=>kt.get(e);const It=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Ot=new Map;function Pt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ot.get(t))return Ot.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=At.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!It.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Ot.set(t,i),i}St=(e=>({...e,get:(t,n,r)=>Pt(t,n)||e.get(t,n,r),has:(t,n)=>!!Pt(t,n)||e.has(t,n)}))(St);class Rt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Lt="@firebase/app",Dt="0.10.13",Mt=new yt("@firebase/app"),Ut="@firebase/app-compat",Ft="@firebase/analytics-compat",Vt="@firebase/analytics",Bt="@firebase/app-check-compat",zt="@firebase/app-check",qt="@firebase/auth",$t="@firebase/auth-compat",Ht="@firebase/database",Wt="@firebase/data-connect",Kt="@firebase/database-compat",Gt="@firebase/functions",Qt="@firebase/functions-compat",Yt="@firebase/installations",Xt="@firebase/installations-compat",Jt="@firebase/messaging",Zt="@firebase/messaging-compat",en="@firebase/performance",tn="@firebase/performance-compat",nn="@firebase/remote-config",rn="@firebase/remote-config-compat",sn="@firebase/storage",an="@firebase/storage-compat",on="@firebase/firestore",ln="@firebase/vertexai-preview",cn="@firebase/firestore-compat",un="firebase",dn="[DEFAULT]",hn={[Lt]:"fire-core",[Ut]:"fire-core-compat",[Vt]:"fire-analytics",[Ft]:"fire-analytics-compat",[zt]:"fire-app-check",[Bt]:"fire-app-check-compat",[qt]:"fire-auth",[$t]:"fire-auth-compat",[Ht]:"fire-rtdb",[Wt]:"fire-data-connect",[Kt]:"fire-rtdb-compat",[Gt]:"fire-fn",[Qt]:"fire-fn-compat",[Yt]:"fire-iid",[Xt]:"fire-iid-compat",[Jt]:"fire-fcm",[Zt]:"fire-fcm-compat",[en]:"fire-perf",[tn]:"fire-perf-compat",[nn]:"fire-rc",[rn]:"fire-rc-compat",[sn]:"fire-gcs",[an]:"fire-gcs-compat",[on]:"fire-fst",[cn]:"fire-fst-compat",[ln]:"fire-vertex","fire-js":"fire-js",[un]:"fire-js-all"},fn=new Map,pn=new Map,mn=new Map;function gn(e,t){try{e.container.addComponent(t)}catch(Nv){Mt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Nv)}}function yn(e){const t=e.name;if(mn.has(t))return Mt.debug(`There were multiple attempts to register component ${t}.`),!1;mn.set(t,e);for(const n of fn.values())gn(n,e);for(const n of pn.values())gn(n,e);return!0}function vn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xn(e){return void 0!==e.settings}const bn=new Xe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class wn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}const Nn="10.14.1";function En(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:dn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw bn.create("bad-app-name",{appName:String(s)});if(n||(n=$e()),!n)throw bn.create("no-options");const i=fn.get(s);if(i){if(Ze(n,i.options)&&Ze(r,i.config))return i;throw bn.create("duplicate-app",{appName:s})}const a=new ut(s);for(const l of mn.values())a.addComponent(l);const o=new wn(n,r,a);return fn.set(s,o),o}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;const t=fn.get(e);if(!t&&e===dn&&$e())return En();if(!t)throw bn.create("no-app",{appName:e});return t}function Sn(e,t,n){var r;let s=null!==(r=hn[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Mt.warn(e.join(" "))}yn(new ot(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const jn="firebase-heartbeat-store";let _n=null;function Cn(){return _n||(_n=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Ct(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ct(a.result),e.oldVersion,e.newVersion,Ct(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(jn)}catch(Nv){console.warn(Nv)}}}).catch(e=>{throw bn.create("idb-open",{originalErrorMessage:e.message})})),_n}async function Tn(e,t){try{const n=(await Cn()).transaction(jn,"readwrite"),r=n.objectStore(jn);await r.put(t,In(e)),await n.done}catch(Nv){if(Nv instanceof Ye)Mt.warn(Nv.message);else{const t=bn.create("idb-set",{originalErrorMessage:null===Nv||void 0===Nv?void 0:Nv.message});Mt.warn(t.message)}}}function In(e){return`${e.name}!${e.options.appId}`}class An{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=On();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Nv){Mt.warn(Nv)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=On(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Rn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Fe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Nv){return Mt.warn(Nv),""}}}function On(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Qe()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Cn()).transaction(jn),n=await t.objectStore(jn).get(In(e));return await t.done,n}catch(Nv){if(Nv instanceof Ye)Mt.warn(Nv.message);else{const t=bn.create("idb-get",{originalErrorMessage:null===Nv||void 0===Nv?void 0:Nv.message});Mt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Tn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Tn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Rn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}var Ln;Ln="",yn(new ot("platform-logger",e=>new Rt(e),"PRIVATE")),yn(new ot("heartbeat",e=>new An(e),"PRIVATE")),Sn(Lt,Dt,Ln),Sn(Lt,Dt,"esm2017"),Sn("fire-js","");Sn("firebase","10.14.1","app");function Dn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Mn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Un=Mn,Fn=new Xe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vn={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},Bn=new yt("@firebase/auth");function zn(e){if(Bn.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bn.error(`Auth (${Nn}): ${e}`,...n)}}function qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gn(e,...n)}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gn(e,...n)}function Hn(e,t,n){const r=Object.assign(Object.assign({},Un()),{[t]:n});return new Xe("auth","Firebase",r).create(t,{appName:e.name})}function Wn(e){return Hn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&qn(e,"argument-error"),Hn(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Fn.create(e,...n)}function Qn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Gn(t,...r)}}function Yn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zn(t),new Error(t)}function Xn(e,t){e||Yn(t)}function Jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zn(){return"http:"===er()||"https:"===er()}function er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function tr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class nr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return tr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rr(e,t){Xn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class sr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ir={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ar=new nr(3e4,6e4);function or(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lr(e,t,n,r){return cr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=tt(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),sr.fetch()(dr(e,e.config.apiHost,n,a),l)})}async function cr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ir),t);try{const t=new fr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw pr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw pr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw pr(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Hn(e,o,a);qn(e,o)}}catch(Nv){if(Nv instanceof Ye)throw Nv;qn(e,"network-request-failed",{message:String(Nv)})}}async function ur(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await lr(e,t,n,r,s);return"mfaPendingCredential"in i&&qn(e,"multi-factor-auth-required",{_serverResponse:i}),i}function dr(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?rr(e.config,s):`${e.config.apiScheme}://${s}`}function hr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t($n(this.auth,"network-request-failed")),ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$n(e,t,r);return s.customData._tokenResponse=n,s}function mr(e){return void 0!==e&&void 0!==e.enterprise}class gr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function yr(e,t){return lr(e,"GET","/v2/recaptchaConfig",or(e,t))}async function vr(e,t){return lr(e,"POST","/v1/accounts:lookup",t)}function xr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Nv){}}function br(e){return 1e3*Number(e)}function wr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return zn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(zn("Failed to decode base64 JWT payload"),null)}catch(Nv){return zn("Caught error parsing JWT payload as JSON",null===Nv||void 0===Nv?void 0:Nv.toString()),null}}function Nr(e){const t=wr(e);return Qn(t,"internal-error"),Qn("undefined"!==typeof t.exp,"internal-error"),Qn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Er(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Nv){throw Nv instanceof Ye&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Nv)&&e.auth.currentUser===e&&await e.auth.signOut(),Nv}}class kr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Nv){return void("auth/network-request-failed"===(null===Nv||void 0===Nv?void 0:Nv.code)&&this.schedule(!0))}this.schedule()}}class Sr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Er(e,vr(n,{idToken:r}));Qn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?_r(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sr(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function _r(e){return e.map(e=>{var{providerId:t}=e,n=Dn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qn(e.idToken,"internal-error"),Qn("undefined"!==typeof e.idToken,"internal-error"),Qn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Nr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qn(0!==e.length,"internal-error");const t=Nr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Qn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await cr(e,{},async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=dr(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sr.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Cr;return n&&(Qn("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Qn("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Qn("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return Yn("not implemented")}}function Tr(e,t){Qn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ir{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Dn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Er(this,this.stsTokenManager.getToken(this.auth,e));return Qn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=at(e),r=await n.getIdToken(t),s=wr(r);Qn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:xr(br(s.auth_time)),issuedAtTime:xr(br(s.iat)),expirationTime:xr(br(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=at(e);await jr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await jr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await Er(this,async function(e,t){return lr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:N}=t;Qn(v&&N,e,"internal-error");const E=Cr.fromJSON(this.name,N);Qn("string"===typeof v,e,"internal-error"),Tr(u,e.name),Tr(d,e.name),Qn("boolean"===typeof x,e,"internal-error"),Qn("boolean"===typeof b,e,"internal-error"),Tr(h,e.name),Tr(f,e.name),Tr(p,e.name),Tr(m,e.name),Tr(g,e.name),Tr(y,e.name);const k=new Ir({uid:v,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(k.providerData=w.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Cr;r.updateFromServerResponse(t);const s=new Ir({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await jr(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Qn(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?_r(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Cr;a.updateFromIdToken(n);const o=new Ir({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Sr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Ar=new Map;function Or(e){Xn(e instanceof Function,"Expected a class definition");let t=Ar.get(e);return t?(Xn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ar.set(e,t),t)}class Pr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pr.type="NONE";const Rr=Pr;function Lr(e,t,n){return`firebase:${e}:${t}:${n}`}class Dr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Lr(this.userKey,r.apiKey,s),this.fullPersistenceKey=Lr("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Dr(Or(Rr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Or(Rr);const i=Lr(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Ir._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Dr(s,e,n)):new Dr(s,e,n)}}function Mr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Br(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ur(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qr(t))return"Blackberry";if($r(t))return"Webos";if(Fr(t))return"Safari";if((t.includes("chrome/")||Vr(t))&&!t.includes("edge/"))return"Chrome";if(zr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/firefox\//i.test(e)}function Fr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/crios\//i.test(e)}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iemobile/i.test(e)}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/android/i.test(e)}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/blackberry/i.test(e)}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/webos/i.test(e)}function Hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wr(){return function(){const e=Ke();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();return Hr(e)||zr(e)||$r(e)||qr(e)||/windows phone/i.test(e)||Br(e)}function Gr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mr(Ke());break;case"Worker":t=`${Mr(Ke())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nn}/${r}`}class Qr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Nv){r(Nv)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Nv){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Nv||void 0===Nv?void 0:Nv.message})}}}class Yr{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Xr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zr(this),this.idTokenSubscription=new Zr(this),this.beforeStateQueue=new Qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Dr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Nv){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await vr(this,{idToken:e}),n=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Nv){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Nv))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Nv){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jr(e)}catch(Nv){if("auth/network-request-failed"!==(null===Nv||void 0===Nv?void 0:Nv.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Wn(this));const t=e?at(e):null;return t&&Qn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Qn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return lr(e,"GET","/v2/passwordPolicy",or(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Yr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return lr(e,"POST","/v2/accounts:revokeToken",or(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;Qn(t,this,"argument-error"),this.redirectPersistenceManager=await Dr.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qn(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Bn.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bn.warn(`Auth (${Nn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Jr(e){return at(e)}class Zr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new st(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let es={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ts(e){return es.loadJS(e)}function ns(e){return`__${e}${Math.floor(1e6*Math.random())}`}class rs{constructor(e){this.type="recaptcha-enterprise",this.auth=Jr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;mr(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{yr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new gr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&mr(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=es.recaptchaEnterpriseScript;0!==t.length&&(t+=s),ts(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ss(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new rs(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function is(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ss(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await ss(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function as(e,t,n){const r=Jr(e);Qn(r._canInitEmulator,r,"emulator-config-failed"),Qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=os(t),{host:a,port:o}=function(e){const t=os(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:ls(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ls(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function os(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ls(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class cs{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,t){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function us(e,t){return lr(e,"POST","/v1/accounts:signUp",t)}async function ds(e,t){return ur(e,"POST","/v1/accounts:signInWithPassword",or(e,t))}async function hs(e,t){return lr(e,"POST","/v1/accounts:sendOobCode",or(e,t))}async function fs(e,t){return hs(e,t)}class ps extends cs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ps(e,t,"password")}static _fromEmailAndCode(e,t){return new ps(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return is(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ds);case"emailLink":return async function(e,t){return ur(e,"POST","/v1/accounts:signInWithEmailLink",or(e,t))}(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return is(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",us);case"emailLink":return async function(e,t){return ur(e,"POST","/v1/accounts:signInWithEmailLink",or(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ms(e,t){return ur(e,"POST","/v1/accounts:signInWithIdp",or(e,t))}class gs extends cs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Dn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new gs(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ms(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ms(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ms(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const ys={USER_NOT_FOUND:"user-not-found"};class vs extends cs{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new vs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new vs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ur(e,"POST","/v1/accounts:signInWithPhoneNumber",or(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ur(e,"POST","/v1/accounts:signInWithPhoneNumber",or(e,t));if(n.temporaryProof)throw pr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ur(e,"POST","/v1/accounts:signInWithPhoneNumber",or(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ys)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new vs({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class xs{constructor(e){var t,n,r,s,i,a;const o=nt(rt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Qn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new xs(t)}catch(n){return null}}}class bs{constructor(){this.providerId=bs.PROVIDER_ID}static credential(e,t){return ps._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xs.parseLink(t);return Qn(n,"argument-error"),ps._fromEmailAndCode(e,n.code,n.tenantId)}}bs.PROVIDER_ID="password",bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ws{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ns extends ws{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Es extends Ns{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Es.credential(t.oauthAccessToken)}catch(n){return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com",Es.PROVIDER_ID="facebook.com";class ks extends Ns{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ks.credential(n,r)}catch(s){return null}}}ks.GOOGLE_SIGN_IN_METHOD="google.com",ks.PROVIDER_ID="google.com";class Ss extends Ns{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ss.credential(t.oauthAccessToken)}catch(n){return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com",Ss.PROVIDER_ID="github.com";class js extends Ns{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return js.credential(n,r)}catch(s){return null}}}async function _s(e,t){return ur(e,"POST","/v1/accounts:signUp",or(e,t))}js.TWITTER_SIGN_IN_METHOD="twitter.com",js.PROVIDER_ID="twitter.com";class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Ir._fromIdTokenResponse(e,n,r),i=Ts(n);return new Cs({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ts(n);return new Cs({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ts(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Is extends Ye{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Is.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Is(e,t,n,r)}}function As(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Is._fromErrorAndOperation(e,n,t,r);throw n})}async function Os(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Er(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Cs._forOperation(e,"link",r)}async function Ps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(xn(r.app))return Promise.reject(Wn(r));const s="reauthenticate";try{const i=await Er(e,As(r,s,t,e),n);Qn(i.idToken,r,"internal-error");const a=wr(i.idToken);Qn(a,r,"internal-error");const{sub:o}=a;return Qn(e.uid===o,r,"user-mismatch"),Cs._forOperation(e,s,i)}catch(Nv){throw"auth/user-not-found"===(null===Nv||void 0===Nv?void 0:Nv.code)&&qn(r,"user-mismatch"),Nv}}async function Rs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xn(e.app))return Promise.reject(Wn(e));const r="signIn",s=await As(e,r,t),i=await Cs._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Ls(e,t){return Rs(Jr(e),t)}async function Ds(e,t){return Ps(at(e),t)}function Ms(e,t,n){var r;Qn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Us(e){const t=Jr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Fs(e,t,n){return xn(e.app)?Promise.reject(Wn(e)):Ls(at(e),bs.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Us(e),t})}async function Vs(e,t){const n=at(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ms(n.auth,r,t);const{email:s}=await async function(e,t){return hs(e,t)}(n.auth,r);s!==e.email&&await e.reload()}async function Bs(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=at(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Er(s,async function(e,t){return lr(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}async function zs(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await Er(e,async function(e,t){return lr(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}new WeakMap;const qs="__sak";class $s{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Hs extends $s{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Wr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hs.type="LOCAL";const Ws=Hs;class Ks extends $s{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ks.type="SESSION";const Gs=Ks;class Qs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Qs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qs.receivers=[];class Xs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Ys("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Js(){return window}function Zs(){return"undefined"!==typeof Js().WorkerGlobalScope&&"function"===typeof Js().importScripts}const ei="firebaseLocalStorageDb",ti="firebaseLocalStorage",ni="fbase_key";class ri{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function si(e,t){return e.transaction([ti],t?"readwrite":"readonly").objectStore(ti)}function ii(){const e=indexedDB.open(ei,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ti,{keyPath:ni})}catch(Nv){n(Nv)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ti)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ei);return new ri(e).toPromise()}(),t(await ii()))})})}async function ai(e,t,n){const r=si(e,!0).put({[ni]:t,value:n});return new ri(r).toPromise()}function oi(e,t){const n=si(e,!0).delete(t);return new ri(n).toPromise()}class li{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ii()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Nv){if(t++>3)throw Nv;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qs._getInstance(Zs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Xs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ii();return await ai(e,qs,"1"),await oi(e,qs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ai(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=si(e,!1).get(t),r=await new ri(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=si(e,!1).getAll();return new ri(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}li.type="LOCAL";const ci=li;ns("rcb"),new nr(3e4,6e4);const ui="recaptcha";async function di(e,t,n){var r;const s=await n.verify();try{let i;if(Qn("string"===typeof s,e,"argument-error"),Qn(n.type===ui,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Qn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return lr(e,"POST","/v2/accounts/mfaEnrollment:start",or(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Qn("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Qn(n,e,"missing-multi-factor-info");const a=await function(e,t){return lr(e,"POST","/v2/accounts/mfaSignIn:start",or(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return lr(e,"POST","/v1/accounts:sendVerificationCode",or(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class hi{constructor(e){this.providerId=hi.PROVIDER_ID,this.auth=Jr(e)}verifyPhoneNumber(e,t){return di(this.auth,e,at(t))}static credential(e,t){return vs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hi.credentialFromTaggedObject(t)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?vs._fromTokenResponse(n,r):null}}function fi(e,t){return t?Or(t):(Qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hi.PROVIDER_ID="phone",hi.PHONE_SIGN_IN_METHOD="phone";class pi extends cs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ms(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ms(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mi(e){return Rs(e.auth,new pi(e),e.bypassAuthState)}function gi(e){const{auth:t,user:n}=e;return Qn(n,t,"internal-error"),Ps(n,new pi(e),e.bypassAuthState)}async function yi(e){const{auth:t,user:n}=e;return Qn(n,t,"internal-error"),Os(n,new pi(e),e.bypassAuthState)}class vi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Nv){this.reject(Nv)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Nv){this.reject(Nv)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mi;case"linkViaPopup":case"linkViaRedirect":return yi;case"reauthViaPopup":case"reauthViaRedirect":return gi;default:qn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xi=new nr(2e3,1e4);async function bi(e,t,n){if(xn(e.app))return Promise.reject($n(e,"operation-not-supported-in-this-environment"));const r=Jr(e);Kn(e,t,ws);const s=fi(r,n);return new wi(r,"signInViaPopup",t,s).executeNotNull()}class wi extends vi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,wi.currentPopupAction&&wi.currentPopupAction.cancel(),wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qn(e,this.auth,"internal-error"),e}async onExecution(){Xn(1===this.filter.length,"Popup operations only handle one event");const e=Ys();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,xi.get())};e()}}wi.currentPopupAction=null;const Ni=new Map;class Ei extends vi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ni.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ji(t),r=Si(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Nv){e=()=>Promise.reject(Nv)}Ni.set(this.auth._key(),e)}return this.bypassAuthState||Ni.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ki(e,t){Ni.set(e._key(),t)}function Si(e){return Or(e._redirectPersistence)}function ji(e){return Lr("pendingRedirect",e.config.apiKey,e.name)}async function _i(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xn(e.app))return Promise.reject(Wn(e));const r=Jr(e),s=fi(r,t),i=new Ei(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ci{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ii(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ii(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($n(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ti(e))}saveEventToCache(e){this.cachedEventUids.add(Ti(e)),this.lastProcessedEventTime=Date.now()}}function Ti(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ii(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oi=/^https?/;async function Pi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return lr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ri(r))return}catch(n){}qn(e,"unauthorized-domain")}function Ri(e){const t=Jn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Oi.test(n))return!1;if(Ai.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Li=new nr(3e4,6e4);function Di(){const e=Js().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Mi(e){return new Promise((t,n)=>{var r,s,i;function a(){Di(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Di(),n($n(e,"network-request-failed"))},timeout:Li.get()})}if(null===(s=null===(r=Js().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Js().gapi)||void 0===i?void 0:i.load)){const t=ns("iframefcb");return Js()[t]=()=>{gapi.load?a():n($n(e,"network-request-failed"))},ts(`${es.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw Ui=null,e})}let Ui=null;const Fi=new nr(5e3,15e3),Vi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zi(e){const t=e.config;Qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Nn},s=Bi.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${tt(r).slice(1)}`}async function qi(e){const t=await function(e){return Ui=Ui||Mi(e),Ui}(e),n=Js().gapi;return Qn(n,e,"internal-error"),t.open({where:document.body,url:zi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=$n(e,"network-request-failed"),i=Js().setTimeout(()=>{r(s)},Fi.get());function a(){Js().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const $i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Nv){}}}function Wi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},$i),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Ke().toLowerCase();n&&(o=Vr(c)?"_blank":n),Ur(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Hr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Hi(null);const d=window.open(t||"",o,u);Qn(d,e,"popup-blocked");try{d.focus()}catch(Nv){}return new Hi(d)}const Ki="__/auth/handler",Gi="emulator/auth/handler",Qi=encodeURIComponent("fac");async function Yi(e,t,n,r,s,i){Qn(e.config.authDomain,e,"auth-domain-config-required"),Qn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nn,eventId:s};if(t instanceof ws){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Ns){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Qi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ki}`;return rr(t,Gi)}(e)}?${tt(o).slice(1)}${c}`}const Xi="webStorageSupport";const Ji=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gs,this._completeRedirectFn=_i,this._overrideRedirectResult=ki}async _openPopup(e,t,n,r){var s;Xn(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Wi(e,await Yi(e,t,n,Jn(),r),Ys())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Js().location.href=e}(await Yi(e,t,n,Jn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qi(e),n=new Ci(e);return t.register("authEvent",t=>{Qn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xi,{type:Xi},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Xi];void 0!==s&&t(!!s),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kr()||Fr()||Hr()}};var Zi="@firebase/auth",ea="1.7.9";class ta{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const na=He("authIdTokenMaxAge")||300;let ra=null;var sa;es={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=$n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},sa="Browser",yn(new ot("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Qn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:sa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gr(sa)},c=new Xr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Or);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),yn(new ot("auth-internal",e=>(e=>new ta(e))(Jr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(Zi,ea,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(sa)),Sn(Zi,ea,"esm2017");var ia,aa,oa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},la={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,aa=la.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},ia=la.Integer=r}).apply("undefined"!==typeof oa?oa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ca,ua,da,ha,fa,pa,ma,ga,ya="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},va={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ya&&ya];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){s.setTimeout(()=>{throw e},0)}function k(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new j,e=>e.reset());class j{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,C=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);_=()=>{e.then(A)}};var A=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){E(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function O(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,P);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}B.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[$]=l=new B(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[$]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var s=t;w(t=new P(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,O),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}d(le,O);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function xe(){P.call(this,"c")}d(ve,P),d(xe,P);var be={},we=null;function Ne(){return we=we||new ne}function Ee(e){P.call(this,be.La,e)}function ke(e){const t=Ne();re(t,new Ee(t))}function Se(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function je(e){const t=Ne();re(t,new Se(t,e))}function _e(e,t){P.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Ee,P),be.STAT_EVENT="statevent",d(Se,P),be.Ma="timingevent",d(_e,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),je(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||ke(),He(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Wt(this.g);e="";var i=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,je(12),Ke(this),We(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Ue){4==h&&(this.s=4,je(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,je(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ge(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,je(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,je(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ie(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Ke(this),We(this)}}}catch(xa){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),je(17)),Ke(this),this.s=2,We(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,xt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,xt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){Nt(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return Nt(e),t=jt(e,t),e.g.has(t)}function St(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),h(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ct(){this.g=new fe}function Tt(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Nv){throw t.push(r+"type="+encodeURIComponent("_badmap")),Nv}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Nt(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,kt(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(It,pe),It.prototype.g=function(){return new At(this.l,this.j)},It.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Rt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ut.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Nv){}}}function $t(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Na){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||I(),C||(_(),C=!0),T.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Tt(o,e,"req"+n+"_")}catch(xa){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||I(),C||(_(),C=!0),T.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new _e(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else je(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new It({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){xe.call(this),this.status=1}function xn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){je(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Le(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Lt(i)))+"&"+t:this.m&&Dt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),je(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,xe),d(xn,pn),xn.prototype.ua=function(){re(this.g,"a")},xn.prototype.ta=function(e){re(this.g,new yn(e))},xn.prototype.sa=function(e){re(this.g,new vn)},xn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ga=va.createWebChannelTransport=function(){return new mn},ma=va.getStatEventTarget=function(){return Ne()},pa=va.Event=be,fa=va.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,ha=va.ErrorCode=Oe,Pe.COMPLETE="complete",da=va.EventType=Pe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ua=va.WebChannel=ge,va.FetchXmlHttpFactory=It,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ca=va.XhrIo=Mt}).apply("undefined"!==typeof ya?ya:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const xa="@firebase/firestore";class ba{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ba.UNAUTHENTICATED=new ba(null),ba.GOOGLE_CREDENTIALS=new ba("google-credentials-uid"),ba.FIRST_PARTY=new ba("first-party-uid"),ba.MOCK_USER=new ba("mock-user");let wa="10.14.0";const Na=new yt("@firebase/firestore");function Ea(){return Na.logLevel}function ka(e){if(Na.logLevel<=ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(_a);Na.debug(`Firestore (${wa}): ${e}`,...s)}}function Sa(e){if(Na.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(_a);Na.error(`Firestore (${wa}): ${e}`,...s)}}function ja(e){if(Na.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(_a);Na.warn(`Firestore (${wa}): ${e}`,...s)}}function _a(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ca(){const e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Sa(e),new Error(e)}function Ta(e,t){e||Ca()}function Ia(e,t){return e}const Aa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oa extends Ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class La{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ba.UNAUTHENTICATED))}shutdown(){}}class Da{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ma{constructor(e){this.t=e,this.currentUser=ba.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ta(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Pa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pa,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ka("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ka("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pa)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ka("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ta("string"==typeof t.accessToken),new Ra(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ta(null===e||"string"==typeof e),new ba(e)}}class Ua{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ba.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Ua(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ba.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Va{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ba{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ta(void 0===this.o);const n=e=>{null!=e.error&&ka("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,ka("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ka("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ka("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ta("string"==typeof e.token),this.R=e.token,new Va(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function za(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class qa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=za(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function $a(e,t){return e<t?-1:e>t?1:0}function Ha(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Wa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oa(Aa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oa(Aa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oa(Aa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oa(Aa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wa.fromMillis(Date.now())}static fromDate(e){return Wa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wa(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$a(this.nanoseconds,e.nanoseconds):$a(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ka{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ka(e)}static min(){return new Ka(new Wa(0,0))}static max(){return new Ka(new Wa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ga{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ca(),void 0===n?n=e.length-t:n>e.length-t&&Ca(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ga.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ga?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qa extends Ga{construct(e,t,n){return new Qa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Oa(Aa.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Qa(e)}static emptyPath(){return new Qa([])}}const Ya=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xa extends Ga{construct(e,t,n){return new Xa(e,t,n)}static isValidIdentifier(e){return Ya.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Oa(Aa.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Oa(Aa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Oa(Aa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Oa(Aa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xa(t)}static emptyPath(){return new Xa([])}}class Ja{constructor(e){this.path=e}static fromPath(e){return new Ja(Qa.fromString(e))}static fromName(e){return new Ja(Qa.fromString(e).popFirst(5))}static empty(){return new Ja(Qa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ja(new Qa(e.slice()))}}class Za{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Za.UNKNOWN_ID=-1;function eo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Ka.fromTimestamp(1e9===r?new Wa(n+1,0):new Wa(n,r));return new no(s,Ja.empty(),t)}function to(e){return new no(e.readTime,e.key,-1)}class no{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new no(Ka.min(),Ja.empty(),-1)}static max(){return new no(Ka.max(),Ja.empty(),-1)}}function ro(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ja.comparator(e.documentKey,t.documentKey),0!==n?n:$a(e.largestBatchId,t.largestBatchId))}const so="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class io{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ao(e){if(e.code!==Aa.FAILED_PRECONDITION||e.message!==so)throw e;ka("LocalStore","Unexpectedly lost primary lease")}class oo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ca(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oo?t:oo.resolve(t)}catch(e){return oo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oo.reject(t)}static resolve(e){return new oo((t,n)=>{t(e)})}static reject(e){return new oo((t,n)=>{n(e)})}static waitFor(e){return new oo((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=oo.resolve(!1);for(const n of e)t=t.next(e=>e?oo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new oo((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new oo((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function lo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(e){return"IndexedDbTransactionError"===e.name}class uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ho(e){return null==e}function fo(e){return 0===e&&1/e==-1/0}function po(e){return"number"==typeof e&&Number.isInteger(e)&&!fo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}uo.oe=-1;const mo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],go=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yo=go,vo=[...yo,"indexConfiguration","indexState","indexEntries"];function xo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class No{constructor(e,t){this.comparator=e,this.root=t||ko.EMPTY}insert(e,t){return new No(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ko.BLACK,null,null))}remove(e){return new No(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ko.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eo(this.root,e,this.comparator,!0)}}class Eo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ko{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ko.RED,this.left=null!=r?r:ko.EMPTY,this.right=null!=s?s:ko.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ko(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ko.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ko.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ko.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ko.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ca();if(this.right.isRed())throw Ca();const e=this.left.check();if(e!==this.right.check())throw Ca();return e+(this.isRed()?0:1)}}ko.EMPTY=null,ko.RED=!0,ko.BLACK=!1,ko.EMPTY=new class{constructor(){this.size=0}get key(){throw Ca()}get value(){throw Ca()}get color(){throw Ca()}get left(){throw Ca()}get right(){throw Ca()}copy(e,t,n,r,s){return this}insert(e,t,n){return new ko(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class So{constructor(e){this.comparator=e,this.data=new No(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jo(this.data.getIterator())}getIteratorFrom(e){return new jo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof So))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new So(this.comparator);return t.data=e,t}}class jo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _o{constructor(e){this.fields=e,e.sort(Xa.comparator)}static empty(){return new _o([])}unionWith(e){let t=new So(Xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _o(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Co extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class To{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Co("Invalid base64 string: "+e):e}}(e);return new To(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new To(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $a(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}To.EMPTY_BYTE_STRING=new To("");const Io=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(e){if(Ta(!!e),"string"==typeof e){let t=0;const n=Io.exec(e);if(Ta(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oo(e.seconds),nanos:Oo(e.nanos)}}function Oo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Po(e){return"string"==typeof e?To.fromBase64String(e):To.fromUint8Array(e)}function Ro(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Lo(e){const t=e.mapValue.fields.__previous_value__;return Ro(t)?Lo(t):t}function Do(e){const t=Ao(e.mapValue.fields.__local_write_time__.timestampValue);return new Wa(t.seconds,t.nanos)}class Mo{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Uo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}const Fo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ro(e)?4:nl(e)?9007199254740991:el(e)?10:11:Ca()}function Bo(e,t){if(e===t)return!0;const n=Vo(e);if(n!==Vo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Do(e).isEqual(Do(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ao(e.timestampValue),r=Ao(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Po(e.bytesValue).isEqual(Po(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Oo(e.geoPointValue.latitude)===Oo(t.geoPointValue.latitude)&&Oo(e.geoPointValue.longitude)===Oo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Oo(e.integerValue)===Oo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Oo(e.doubleValue),r=Oo(t.doubleValue);return n===r?fo(n)===fo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ha(e.arrayValue.values||[],t.arrayValue.values||[],Bo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xo(n)!==xo(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Bo(n[s],r[s])))return!1;return!0}(e,t);default:return Ca()}}function zo(e,t){return void 0!==(e.values||[]).find(e=>Bo(e,t))}function qo(e,t){if(e===t)return 0;const n=Vo(e),r=Vo(t);if(n!==r)return $a(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $a(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Oo(e.integerValue||e.doubleValue),r=Oo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $o(e.timestampValue,t.timestampValue);case 4:return $o(Do(e),Do(t));case 5:return $a(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Po(e),r=Po(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=$a(n[s],r[s]);if(0!==e)return e}return $a(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$a(Oo(e.latitude),Oo(t.latitude));return 0!==n?n:$a(Oo(e.longitude),Oo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ho(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=$a((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ho(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Fo.mapValue&&t===Fo.mapValue)return 0;if(e===Fo.mapValue)return 1;if(t===Fo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=$a(r[a],i[a]);if(0!==e)return e;const t=qo(n[r[a]],s[i[a]]);if(0!==t)return t}return $a(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Ca()}}function $o(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $a(e,t);const n=Ao(e),r=Ao(t),s=$a(n.seconds,r.seconds);return 0!==s?s:$a(n.nanos,r.nanos)}function Ho(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=qo(n[s],r[s]);if(e)return e}return $a(n.length,r.length)}function Wo(e){return Ko(e)}function Ko(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ao(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Po(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ja.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ko(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Ko(e.fields[s])}`;return n+"}"}(e.mapValue):Ca()}function Go(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qo(e){return!!e&&"integerValue"in e}function Yo(e){return!!e&&"arrayValue"in e}function Xo(e){return!!e&&"nullValue"in e}function Jo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zo(e){return!!e&&"mapValue"in e}function el(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class rl{constructor(e){this.value=e}static empty(){return new rl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Xa.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=tl(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Zo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rl(tl(this.value))}}function sl(e){const t=[];return bo(e.fields,(e,n)=>{const r=new Xa([e]);if(Zo(n)){const e=sl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new _o(t)}class il{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new il(e,0,Ka.min(),Ka.min(),Ka.min(),rl.empty(),0)}static newFoundDocument(e,t,n,r){return new il(e,1,t,Ka.min(),n,r,0)}static newNoDocument(e,t){return new il(e,2,t,Ka.min(),Ka.min(),rl.empty(),0)}static newUnknownDocument(e,t){return new il(e,3,t,Ka.min(),Ka.min(),rl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ka.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ka.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof il&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new il(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class al{constructor(e,t){this.position=e,this.inclusive=t}}function ol(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ja.comparator(Ja.fromName(a.referenceValue),n.key):qo(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ll(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bo(e.position[n],t.position[n]))return!1;return!0}class cl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ul(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dl{}class hl extends dl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bl(e,t,n):"array-contains"===t?new kl(e,n):"in"===t?new Sl(e,n):"not-in"===t?new jl(e,n):"array-contains-any"===t?new _l(e,n):new hl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wl(e,n):new Nl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qo(t,this.value)):null!==t&&Vo(this.value)===Vo(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ca()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fl extends dl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fl(e,t)}matches(e){return pl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pl(e){return"and"===e.op}function ml(e){return gl(e)&&pl(e)}function gl(e){for(const t of e.filters)if(t instanceof fl)return!1;return!0}function yl(e){if(e instanceof hl)return e.field.canonicalString()+e.op.toString()+Wo(e.value);if(ml(e))return e.filters.map(e=>yl(e)).join(",");{const t=e.filters.map(e=>yl(e)).join(",");return`${e.op}(${t})`}}function vl(e,t){return e instanceof hl?function(e,t){return t instanceof hl&&e.op===t.op&&e.field.isEqual(t.field)&&Bo(e.value,t.value)}(e,t):e instanceof fl?function(e,t){return t instanceof fl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&vl(n,t.filters[r]),!0)}(e,t):void Ca()}function xl(e){return e instanceof hl?function(e){return`${e.field.canonicalString()} ${e.op} ${Wo(e.value)}`}(e):e instanceof fl?function(e){return e.op.toString()+" {"+e.getFilters().map(xl).join(" ,")+"}"}(e):"Filter"}class bl extends hl{constructor(e,t,n){super(e,t,n),this.key=Ja.fromName(n.referenceValue)}matches(e){const t=Ja.comparator(e.key,this.key);return this.matchesComparison(t)}}class wl extends hl{constructor(e,t){super(e,"in",t),this.keys=El("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nl extends hl{constructor(e,t){super(e,"not-in",t),this.keys=El("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function El(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ja.fromName(e.referenceValue))}class kl extends hl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yo(t)&&zo(t.arrayValue,this.value)}}class Sl extends hl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zo(this.value.arrayValue,t)}}class jl extends hl{constructor(e,t){super(e,"not-in",t)}matches(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zo(this.value.arrayValue,t)}}class _l extends hl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zo(this.value.arrayValue,e))}}class Cl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Tl(e){return new Cl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Il(e){const t=Ia(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ho(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wo(e)).join(",")),t.ue=e}return t.ue}function Al(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ul(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ll(e.startAt,t.startAt)&&ll(e.endAt,t.endAt)}function Ol(e){return Ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rl(e,t,n,r,s,i,a,o){return new Pl(e,t,n,r,s,i,a,o)}function Ll(e){return new Pl(e)}function Dl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ml(e){return null!==e.collectionGroup}function Ul(e){const t=Ia(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new So(Xa.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new cl(r,n))}),e.has(Xa.keyField().canonicalString())||t.ce.push(new cl(Xa.keyField(),n))}return t.ce}function Fl(e){const t=Ia(e);return t.le||(t.le=Vl(t,Ul(e))),t.le}function Vl(e,t){if("F"===e.limitType)return Tl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new cl(e.field,t)});const n=e.endAt?new al(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new al(e.startAt.position,e.startAt.inclusive):null;return Tl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bl(e,t){const n=e.filters.concat([t]);return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zl(e,t,n){return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ql(e,t){return Al(Fl(e),Fl(t))&&e.limitType===t.limitType}function $l(e){return`${Il(Fl(e))}|lt:${e.limitType}`}function Hl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>xl(e)).join(", ")}]`),ho(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wo(e)).join(",")),`Target(${t})`}(Fl(e))}; limitType=${e.limitType})`}function Wl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ja.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ul(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ol(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ul(e),t))&&!(e.endAt&&!function(e,t,n){const r=ol(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ul(e),t))}(e,t)}function Kl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gl(e){return(t,n)=>{let r=!1;for(const s of Ul(e)){const e=Ql(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ql(e,t,n){const r=e.field.isKeyField()?Ja.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?qo(r,s):Ca()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ca()}}class Yl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return wo(this.inner)}size(){return this.innerSize}}const Xl=new No(Ja.comparator);function Jl(){return Xl}const Zl=new No(Ja.comparator);function ec(){let e=Zl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function tc(e){let t=Zl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nc(){return sc()}function rc(){return sc()}function sc(){return new Yl(e=>e.toString(),(e,t)=>e.isEqual(t))}const ic=new No(Ja.comparator),ac=new So(Ja.comparator);function oc(){let e=ac;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const lc=new So($a);function cc(){return lc}function uc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(t)?"-0":t}}function dc(e){return{integerValue:""+e}}function hc(e,t){return po(t)?dc(t):uc(e,t)}class fc{constructor(){this._=void 0}}function pc(e,t,n){return e instanceof yc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ro(t)&&(t=Lo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vc?xc(e,t):e instanceof bc?wc(e,t):function(e,t){const n=gc(e,t),r=Ec(n)+Ec(e.Pe);return Qo(n)&&Qo(e.Pe)?dc(r):uc(e.serializer,r)}(e,t)}function mc(e,t,n){return e instanceof vc?xc(e,t):e instanceof bc?wc(e,t):n}function gc(e,t){return e instanceof Nc?function(e){return Qo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yc extends fc{}class vc extends fc{constructor(e){super(),this.elements=e}}function xc(e,t){const n=kc(t);for(const r of e.elements)n.some(e=>Bo(e,r))||n.push(r);return{arrayValue:{values:n}}}class bc extends fc{constructor(e){super(),this.elements=e}}function wc(e,t){let n=kc(t);for(const r of e.elements)n=n.filter(e=>!Bo(e,r));return{arrayValue:{values:n}}}class Nc extends fc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ec(e){return Oo(e.integerValue||e.doubleValue)}function kc(e){return Yo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sc{constructor(e,t){this.version=e,this.transformResults=t}}class jc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jc}static exists(e){return new jc(void 0,e)}static updateTime(e){return new jc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Cc{}function Tc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fc(e.key,jc.none()):new Rc(e.key,e.data,jc.none());{const n=e.data,r=rl.empty();let s=new So(Xa.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Lc(e.key,r,new _o(s.toArray()),jc.none())}}function Ic(e,t,n){e instanceof Rc?function(e,t,n){const r=e.value.clone(),s=Mc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lc?function(e,t,n){if(!_c(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Dc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ac(e,t,n,r){return e instanceof Rc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const s=e.value.clone(),i=Uc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const s=Uc(e.fieldTransforms,r,t),i=t.data;return i.setAll(Dc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return _c(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Oc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=gc(r.transform,e||null);null!=s&&(null===n&&(n=rl.empty()),n.set(r.field,s))}return n||null}function Pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ha(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vc&&t instanceof vc||e instanceof bc&&t instanceof bc?Ha(e.elements,t.elements,Bo):e instanceof Nc&&t instanceof Nc?Bo(e.Pe,t.Pe):e instanceof yc&&t instanceof yc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rc extends Cc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lc extends Cc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Dc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Mc(e,t,n){const r=new Map;Ta(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,mc(a,o,n[s]))}return r}function Uc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,pc(e,i,t))}return r}class Fc extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vc extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ic(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ac(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ac(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Tc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Ka.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oc())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(e,t)=>Pc(e,t))&&Ha(this.baseMutations,e.baseMutations,(e,t)=>Pc(e,t))}}class zc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ta(e.mutations.length===n.length);let r=ic;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new zc(e,t,n,r)}}class qc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $c{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hc,Wc;function Kc(e){switch(e){default:return Ca();case Aa.CANCELLED:case Aa.UNKNOWN:case Aa.DEADLINE_EXCEEDED:case Aa.RESOURCE_EXHAUSTED:case Aa.INTERNAL:case Aa.UNAVAILABLE:case Aa.UNAUTHENTICATED:return!1;case Aa.INVALID_ARGUMENT:case Aa.NOT_FOUND:case Aa.ALREADY_EXISTS:case Aa.PERMISSION_DENIED:case Aa.FAILED_PRECONDITION:case Aa.ABORTED:case Aa.OUT_OF_RANGE:case Aa.UNIMPLEMENTED:case Aa.DATA_LOSS:return!0}}function Gc(e){if(void 0===e)return Sa("GRPC error has no .code"),Aa.UNKNOWN;switch(e){case Hc.OK:return Aa.OK;case Hc.CANCELLED:return Aa.CANCELLED;case Hc.UNKNOWN:return Aa.UNKNOWN;case Hc.DEADLINE_EXCEEDED:return Aa.DEADLINE_EXCEEDED;case Hc.RESOURCE_EXHAUSTED:return Aa.RESOURCE_EXHAUSTED;case Hc.INTERNAL:return Aa.INTERNAL;case Hc.UNAVAILABLE:return Aa.UNAVAILABLE;case Hc.UNAUTHENTICATED:return Aa.UNAUTHENTICATED;case Hc.INVALID_ARGUMENT:return Aa.INVALID_ARGUMENT;case Hc.NOT_FOUND:return Aa.NOT_FOUND;case Hc.ALREADY_EXISTS:return Aa.ALREADY_EXISTS;case Hc.PERMISSION_DENIED:return Aa.PERMISSION_DENIED;case Hc.FAILED_PRECONDITION:return Aa.FAILED_PRECONDITION;case Hc.ABORTED:return Aa.ABORTED;case Hc.OUT_OF_RANGE:return Aa.OUT_OF_RANGE;case Hc.UNIMPLEMENTED:return Aa.UNIMPLEMENTED;case Hc.DATA_LOSS:return Aa.DATA_LOSS;default:return Ca()}}(Wc=Hc||(Hc={}))[Wc.OK=0]="OK",Wc[Wc.CANCELLED=1]="CANCELLED",Wc[Wc.UNKNOWN=2]="UNKNOWN",Wc[Wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wc[Wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wc[Wc.NOT_FOUND=5]="NOT_FOUND",Wc[Wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wc[Wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wc[Wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wc[Wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wc[Wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wc[Wc.ABORTED=10]="ABORTED",Wc[Wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wc[Wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wc[Wc.INTERNAL=13]="INTERNAL",Wc[Wc.UNAVAILABLE=14]="UNAVAILABLE",Wc[Wc.DATA_LOSS=15]="DATA_LOSS";let Qc=null;function Yc(){return new TextEncoder}const Xc=new ia([4294967295,4294967295],0);function Jc(e){const t=Yc().encode(e),n=new aa;return n.update(t),new Uint8Array(n.digest())}function Zc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new ia([n,r],0),new ia([s,i],0)]}class eu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(n<0)throw new tu(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new tu(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ia.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ia.fromNumber(n)));return 1===r.compare(Xc)&&(r=new ia([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Jc(e),[n,r]=Zc(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new eu(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=Jc(e),[n,r]=Zc(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new nu(Ka.min(),r,new No($a),Jl(),oc())}}class ru{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ru(n,t,oc(),oc(),oc())}}class su{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class iu{constructor(e,t){this.targetId=e,this.me=t}}class au{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:To.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ou{constructor(){this.fe=0,this.ge=uu(),this.pe=To.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oc(),t=oc(),n=oc();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ca()}}),new ru(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=uu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ta(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lu{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jl(),this.qe=cu(),this.Qe=new No($a)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ca()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Ol(s))if(0===n){const e=new Ja(s.path);this.Ue(t,e,il.newNoDocument(e,Ka.min()))}else Ta(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Qc||Qc.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Po(n).toUint8Array()}catch(e){if(e instanceof Co)return ja("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new eu(i,r,s)}catch(e){return ja(e instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Ol(s.target)){const t=new Ja(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,il.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=oc();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new nu(e,t,this.Qe,this.ke,n);return this.ke=Jl(),this.qe=cu(),this.Qe=new No($a),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ou,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new So($a),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ka("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ou),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function cu(){return new No(Ja.comparator)}function uu(){return new No(Ja.comparator)}const du={asc:"ASCENDING",desc:"DESCENDING"},hu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fu={and:"AND",or:"OR"};class pu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mu(e,t){return e.useProto3Json||ho(t)?t:{value:t}}function gu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vu(e,t){return gu(e,t.toTimestamp())}function xu(e){return Ta(!!e),Ka.fromTimestamp(function(e){const t=Ao(e);return new Wa(t.seconds,t.nanos)}(e))}function bu(e,t){return wu(e,t).canonicalString()}function wu(e,t){const n=function(e){return new Qa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Nu(e){const t=Qa.fromString(e);return Ta(zu(t)),t}function Eu(e,t){return bu(e.databaseId,t.path)}function ku(e,t){const n=Nu(t);if(n.get(1)!==e.databaseId.projectId)throw new Oa(Aa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Oa(Aa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ja(Cu(n))}function Su(e,t){return bu(e.databaseId,t)}function ju(e){const t=Nu(e);return 4===t.length?Qa.emptyPath():Cu(t)}function _u(e){return new Qa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Cu(e){return Ta(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Tu(e,t,n){return{name:Eu(e,t),fields:n.value.mapValue.fields}}function Iu(e,t){let n;if(t instanceof Rc)n={update:Tu(e,t.key,t.value)};else if(t instanceof Fc)n={delete:Eu(e,t.key)};else if(t instanceof Lc)n={update:Tu(e,t.key,t.data),updateMask:Bu(t.fieldMask)};else{if(!(t instanceof Vc))return Ca();n={verify:Eu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ca()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ca()}(e,t.precondition)),n}function Au(e,t){return{documents:[Su(e,t.path)]}}function Ou(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Su(e,s);const i=function(e){if(0!==e.length)return Vu(fl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Uu(e.field),direction:Lu(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=mu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Pu(e){let t=ju(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ta(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ru(e);return t instanceof fl&&ml(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new cl(Fu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ho(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new al(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new al(n,t)}(n.endAt)),Rl(t,s,a,i,o,"F",l,c)}function Ru(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fu(e.unaryFilter.field);return hl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fu(e.unaryFilter.field);return hl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fu(e.unaryFilter.field);return hl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fu(e.unaryFilter.field);return hl.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ca()}}(e):void 0!==e.fieldFilter?function(e){return hl.create(Fu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ca()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fl.create(e.compositeFilter.filters.map(e=>Ru(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ca()}}(e.compositeFilter.op))}(e):Ca()}function Lu(e){return du[e]}function Du(e){return hu[e]}function Mu(e){return fu[e]}function Uu(e){return{fieldPath:e.canonicalString()}}function Fu(e){return Xa.fromServerFormat(e.fieldPath)}function Vu(e){return e instanceof hl?function(e){if("=="===e.op){if(Jo(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NAN"}};if(Xo(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jo(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NAN"}};if(Xo(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(e.field),op:Du(e.op),value:e.value}}}(e):e instanceof fl?function(e){const t=e.getFilters().map(e=>Vu(e));return 1===t.length?t[0]:{compositeFilter:{op:Mu(e.op),filters:t}}}(e):Ca()}function Bu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function zu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ka.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ka.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:To.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new qu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $u{constructor(e){this.ct=e}}function Hu(e){const t=Pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zl(t,t.limit,"L"):t}class Wu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oo(e.integerValue));else if("doubleValue"in e){const n=Oo(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),fo(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ao(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Po(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?nl(e)?this.dt(t,Number.MAX_SAFE_INTEGER):el(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ca()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Oo(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ja.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Wu.vt=new Wu;class Ku{constructor(){this.un=new Gu}addToCollectionParentIndex(e,t){return this.un.add(t),oo.resolve()}getCollectionParents(e,t){return oo.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return oo.resolve()}deleteFieldIndex(e,t){return oo.resolve()}deleteAllFieldIndexes(e){return oo.resolve()}createTargetIndexes(e,t){return oo.resolve()}getDocumentsMatchingTarget(e,t){return oo.resolve(null)}getIndexType(e,t){return oo.resolve(0)}getFieldIndexes(e,t){return oo.resolve([])}getNextCollectionGroupToUpdate(e){return oo.resolve(null)}getMinOffset(e,t){return oo.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return oo.resolve(no.min())}updateCollectionGroup(e,t,n){return oo.resolve()}updateIndexEntries(e,t){return oo.resolve()}}class Gu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new So(Qa.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new So(Qa.comparator)).toArray()}}new Uint8Array(0);class Qu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qu(e,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qu.DEFAULT_COLLECTION_PERCENTILE=10,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qu.DEFAULT=new Qu(41943040,Qu.DEFAULT_COLLECTION_PERCENTILE,Qu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qu.DISABLED=new Qu(-1,0,0);class Yu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yu(0)}static kn(){return new Yu(-1)}}class Xu{constructor(){this.changes=new Yl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,il.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?oo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ju{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Zu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ac(n.mutation,e,_o.empty(),Wa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,oc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oc();const r=nc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ec();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,oc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Jl();const i=sc(),a=sc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Lc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ac(a.mutation,t,a.mutation.getFieldMask(),Wa.now())):i.set(t.key,_o.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Ju(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=sc();let r=new No((e,t)=>e-t),s=oc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||_o.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||oc()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=rc();l.forEach(e=>{if(!s.has(e)){const r=Tc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return oo.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ml(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):oo.resolve(nc());let a=-1,o=s;return i.next(t=>oo.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?oo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,oc())).next(e=>({batchId:a,changes:tc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ja(t)).next(e=>{let t=ec();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=ec();return this.indexManager.getCollectionParents(e,s).next(a=>oo.forEach(a,a=>{const o=function(e,t){return new Pl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,il.newInvalidDocument(r)))});let n=ec();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ac(i.mutation,r,_o.empty(),Wa.now()),Wl(t,r)&&(n=n.insert(e,r))}),n})}}class ed{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return oo.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xu(e.createTime)}}(t)),oo.resolve()}getNamedQuery(e,t){return oo.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Hu(e.bundledQuery),readTime:xu(e.readTime)}}(t)),oo.resolve()}}class td{constructor(){this.overlays=new No(Ja.comparator),this.Ir=new Map}getOverlay(e,t){return oo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nc();return oo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),oo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),oo.resolve()}getOverlaysForCollection(e,t,n){const r=nc(),s=t.length+1,i=new Ja(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return oo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new No((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=nc(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=nc(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return oo.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qc(t,n));let s=this.Ir.get(t);void 0===s&&(s=oc(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class nd{constructor(){this.sessionToken=To.EMPTY_BYTE_STRING}getSessionToken(e){return oo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oo.resolve()}}class rd{constructor(){this.Tr=new So(sd.Er),this.dr=new So(sd.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new sd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new sd(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Ja(new Qa([])),n=new sd(t,e),r=new sd(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ja(new Qa([])),n=new sd(t,e),r=new sd(t,e+1);let s=oc();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new sd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sd{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ja.comparator(e.key,t.key)||$a(e.wr,t.wr)}static Ar(e,t){return $a(e.wr,t.wr)||Ja.comparator(e.key,t.key)}}class id{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new So(sd.Er)}checkEmpty(e){return oo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Bc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new sd(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oo.resolve(i)}lookupMutationBatch(e,t){return oo.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return oo.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oo.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return oo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sd(t,0),r=new sd(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),oo.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new So($a);return t.forEach(e=>{const t=new sd(e,0),r=new sd(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),oo.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ja.isDocumentKey(s)||(s=s.child(""));const i=new sd(new Ja(s),0);let a=new So($a);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),oo.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ta(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return oo.forEach(t.mutations,r=>{const s=new sd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new sd(t,0),r=this.br.firstAfterOrEqual(n);return oo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oo.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ad{constructor(e){this.Mr=e,this.docs=new No(Ja.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return oo.resolve(n?n.document.mutableCopy():il.newInvalidDocument(t))}getEntries(e,t){let n=Jl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():il.newInvalidDocument(e))}),oo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Jl();const i=t.path,a=new Ja(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ro(to(a),n)<=0||(r.has(a.key)||Wl(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return oo.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Ca()}Or(e,t){return oo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new od(this)}getSize(e){return oo.resolve(this.size)}}class od extends Xu{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),oo.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class ld{constructor(e){this.persistence=e,this.Nr=new Yl(e=>Il(e),Al),this.lastRemoteSnapshotVersion=Ka.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rd,this.targetCount=0,this.kr=Yu.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),oo.resolve()}getLastRemoteSnapshotVersion(e){return oo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oo.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),oo.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Yu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,oo.resolve()}updateTargetData(e,t){return this.Kn(t),oo.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,oo.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),oo.waitFor(s).next(()=>r)}getTargetCount(e){return oo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return oo.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),oo.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),oo.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),oo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return oo.resolve(n)}containsKey(e,t){return oo.resolve(this.Br.containsKey(t))}}class cd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new uo(0),this.Kr=!1,this.Kr=!0,this.$r=new nd,this.referenceDelegate=e(this),this.Ur=new ld(this),this.indexManager=new Ku,this.remoteDocumentCache=function(e){return new ad(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new $u(t),this.Gr=new ed(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new td,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new id(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){ka("MemoryPersistence","Starting transaction:",e);const r=new ud(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return oo.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class ud extends io{constructor(e){super(),this.currentSequenceNumber=e}}class dd{constructor(e){this.persistence=e,this.Jr=new rd,this.Yr=null}static Zr(e){return new dd(e)}get Xr(){if(this.Yr)return this.Yr;throw Ca()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),oo.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),oo.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),oo.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oo.forEach(this.Xr,n=>{const r=Ja.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ka.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return oo.or([()=>oo.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class hd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=oc(),r=oc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hd(e,t.fromCache,n,r)}}class fd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pd{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Ge()?8:lo(Ke())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new fd;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Ea()<=ht.DEBUG&&ka("QueryEngine","SDK will not create cache indexes for query:",Hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oo.resolve()):(Ea()<=ht.DEBUG&&ka("QueryEngine","Query:",Hl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Ea()<=ht.DEBUG&&ka("QueryEngine","The SDK decides to create cache indexes for query:",Hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fl(t))):oo.resolve())}Yi(e,t){if(Dl(t))return oo.resolve(null);let n=Fl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=zl(t,null,"F"),n=Fl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=oc(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,zl(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Dl(t)||r.isEqual(Ka.min())?oo.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?oo.resolve(null):(Ea()<=ht.DEBUG&&ka("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hl(t)),this.rs(e,i,t,eo(r,-1)).next(e=>e))})}ts(e,t){let n=new So(Gl(e));return t.forEach((t,r)=>{Wl(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Ea()<=ht.DEBUG&&ka("QueryEngine","Using full collection scan to execute query:",Hl(t)),this.Ji.getDocumentsMatchingQuery(e,t,no.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class md{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new No($a),this._s=new Yl(e=>Il(e),Al),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function gd(e,t,n,r){return new md(e,t,n,r)}async function yd(e,t){const n=Ia(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=oc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function vd(e){const t=Ia(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function xd(e,t,n){let r=oc(),s=oc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Jl();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Ka.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ka("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function bd(e,t){const n=Ia(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function wd(e,t){const n=Ia(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,oo.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new qu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Nd(e,t,n){const r=Ia(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!co(e))throw e;ka("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function Ed(e,t,n){const r=Ia(e);let s=Ka.min(),i=oc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ia(e),s=r._s.get(n);return void 0!==s?oo.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Fl(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:Ka.min(),n?i:oc())).next(e=>(kd(r,Kl(t),e),{documents:e,Ts:i})))}function kd(e,t,n){let r=e.us.get(t)||Ka.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Sd{constructor(){this.activeTargetIds=cc()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jd{constructor(){this.so=new Sd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _d{_o(e){}shutdown(){}}class Cd{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ka("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ka("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Td=null;function Id(){return null===Td?Td=268435456+Math.round(2147483648*Math.random()):Td++,"0x"+Td.toString(16)}const Ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Od{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Pd="WebChannelConnection";class Rd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,s){const i=Id(),a=this.xo(e,t.toUriEncodedString());ka("RestConnection",`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(ka("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw ja("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+wa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Ad[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Id();return new Promise((i,a)=>{const o=new ca;o.setWithCredentials(!0),o.listenOnce(da.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ha.NO_ERROR:const t=o.getResponseJson();ka(Pd,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case ha.TIMEOUT:ka(Pd,`RPC '${e}' ${s} timed out`),a(new Oa(Aa.DEADLINE_EXCEEDED,"Request time out"));break;case ha.HTTP_ERROR:const n=o.getStatus();if(ka(Pd,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Aa).indexOf(t)>=0?t:Aa.UNKNOWN}(t.status);a(new Oa(e,t.message))}else a(new Oa(Aa.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Oa(Aa.UNAVAILABLE,"Connection failed."));break;default:Ca()}}finally{ka(Pd,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);ka(Pd,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Id(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ga(),a=ma(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ka(Pd,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Od({Io:t=>{h?ka(Pd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(ka(Pd,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),ka(Pd,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ua.EventType.OPEN,()=>{h||(ka(Pd,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,ua.EventType.CLOSE,()=>{h||(h=!0,ka(Pd,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,ua.EventType.ERROR,t=>{h||(h=!0,ja(Pd,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Oa(Aa.UNAVAILABLE,"The operation could not be completed")))}),p(u,ua.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Ta(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ka(Pd,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Hc[e];if(void 0!==t)return Gc(t)}(t),s=a.message;void 0===n&&(n=Aa.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Oa(n,s)),u.close()}else ka(Pd,`RPC '${e}' stream ${r} received:`,s),f.bo(s)}}),p(a,pa.STAT_EVENT,t=>{t.stat===fa.PROXY?ka(Pd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===fa.NOPROXY&&ka(Pd,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function Ld(){return"undefined"!=typeof document?document:null}function Dd(e){return new pu(e,!0)}class Md{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&ka("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ud{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Md(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Aa.RESOURCE_EXHAUSTED?(Sa(t.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Aa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Oa(Aa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ka("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ka("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fd extends Ud{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ca()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Ta(void 0===t||"string"==typeof t),To.fromBase64String(t||"")):(Ta(void 0===t||t instanceof Buffer||t instanceof Uint8Array),To.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Aa.UNKNOWN:Gc(e.code);return new Oa(t,e.message||"")}(a);n=new au(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ku(e,r.document.name),i=xu(r.document.updateTime),a=r.document.createTime?xu(r.document.createTime):Ka.min(),o=new rl({mapValue:{fields:r.document.fields}}),l=il.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new su(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ku(e,r.document),i=r.readTime?xu(r.readTime):Ka.min(),a=il.newNoDocument(s,i),o=r.removedTargetIds||[];n=new su([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ku(e,r.document),i=r.removedTargetIds||[];n=new su([],i,s,null)}else{if(!("filter"in t))return Ca();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new $c(r,s),a=e.targetId;n=new iu(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ka.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ka.min():t.readTime?xu(t.readTime):Ka.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=_u(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ol(r)?{documents:Au(e,r)}:{query:Ou(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yu(e,t.resumeToken);const r=mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ka.min())>0){n.readTime=gu(e,t.snapshotVersion.toTimestamp());const r=mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ca()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=_u(this.serializer),t.removeTarget=e,this.a_(t)}}class Vd extends Ud{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ta(!!e.streamToken),this.lastStreamToken=e.streamToken,Ta(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ta(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ta(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?xu(e.updateTime):xu(t);return n.isEqual(Ka.min())&&(n=xu(t)),new Sc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=xu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=_u(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Iu(this.serializer,e))};this.a_(t)}}class Bd extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Oa(Aa.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,wu(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Aa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Oa(Aa.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,wu(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Aa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Oa(Aa.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sa(t),this.D_=!1):ka("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class qd{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Jd(this)&&(ka("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ia(e);t.L_.add(4),await Hd(t),t.q_.set("Unknown"),t.L_.delete(4),await $d(t)}(this))})}),this.q_=new zd(n,r)}}async function $d(e){if(Jd(e))for(const t of e.B_)await t(!0)}async function Hd(e){for(const t of e.B_)await t(!1)}function Wd(e,t){const n=Ia(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Xd(n)?Yd(n):yh(n).r_()&&Gd(n,t))}function Kd(e,t){const n=Ia(e),r=yh(n);n.N_.delete(t),r.r_()&&Qd(n,t),0===n.N_.size&&(r.r_()?r.o_():Jd(n)&&n.q_.set("Unknown"))}function Gd(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ka.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yh(e).A_(t)}function Qd(e,t){e.Q_.xe(t),yh(e).R_(t)}function Yd(e){e.Q_=new lu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),yh(e).start(),e.q_.v_()}function Xd(e){return Jd(e)&&!yh(e).n_()&&e.N_.size>0}function Jd(e){return 0===Ia(e).L_.size}function Zd(e){e.Q_=void 0}async function eh(e){e.q_.set("Online")}async function th(e){e.N_.forEach((t,n)=>{Gd(e,t)})}async function nh(e,t){Zd(e),Xd(e)?(e.q_.M_(t),Yd(e)):e.q_.set("Unknown")}async function rh(e,t,n){if(e.q_.set("Online"),t instanceof au&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){ka("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await sh(e,n)}else if(t instanceof su?e.Q_.Ke(t):t instanceof iu?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ka.min()))try{const t=await vd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(To.EMPTY_BYTE_STRING,r.snapshotVersion)),Qd(e,t);const s=new qu(r.target,t,n,r.sequenceNumber);Gd(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ka("RemoteStore","Failed to raise snapshot:",t),await sh(e,t)}}async function sh(e,t,n){if(!co(t))throw t;e.L_.add(1),await Hd(e),e.q_.set("Offline"),n||(n=()=>vd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ka("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await $d(e)})}function ih(e,t){return t().catch(n=>sh(e,n,t))}async function ah(e){const t=Ia(e),n=vh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;oh(t);)try{const e=await bd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,lh(t,e)}catch(e){await sh(t,e)}ch(t)&&uh(t)}function oh(e){return Jd(e)&&e.O_.length<10}function lh(e,t){e.O_.push(t);const n=vh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function ch(e){return Jd(e)&&!vh(e).n_()&&e.O_.length>0}function uh(e){vh(e).start()}async function dh(e){vh(e).p_()}async function hh(e){const t=vh(e);for(const n of e.O_)t.m_(n.mutations)}async function fh(e,t,n){const r=e.O_.shift(),s=zc.from(r,t,n);await ih(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ah(e)}async function ph(e,t){t&&vh(e).V_&&await async function(e,t){if(function(e){return Kc(e)&&e!==Aa.ABORTED}(t.code)){const n=e.O_.shift();vh(e).s_(),await ih(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ah(e)}}(e,t),ch(e)&&uh(e)}async function mh(e,t){const n=Ia(e);n.asyncQueue.verifyOperationInProgress(),ka("RemoteStore","RemoteStore received new credentials");const r=Jd(n);n.L_.add(3),await Hd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await $d(n)}async function gh(e,t){const n=Ia(e);t?(n.L_.delete(2),await $d(n)):t||(n.L_.add(2),await Hd(n),n.q_.set("Unknown"))}function yh(e){return e.K_||(e.K_=function(e,t,n){const r=Ia(e);return r.w_(),new Fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:eh.bind(null,e),Ro:th.bind(null,e),mo:nh.bind(null,e),d_:rh.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Xd(e)?Yd(e):e.q_.set("Unknown")):(await e.K_.stop(),Zd(e))})),e.K_}function vh(e){return e.U_||(e.U_=function(e,t,n){const r=Ia(e);return r.w_(),new Vd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dh.bind(null,e),mo:ph.bind(null,e),f_:hh.bind(null,e),g_:fh.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await ah(e)):(await e.U_.stop(),e.O_.length>0&&(ka("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class xh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new xh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oa(Aa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bh(e,t){if(Sa("AsyncQueue",`${t}: ${e}`),co(e))return new Oa(Aa.UNAVAILABLE,`${t}: ${e}`);throw e}class wh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ja.comparator(t.key,n.key):(e,t)=>Ja.comparator(e.key,t.key),this.keyedMap=ec(),this.sortedSet=new No(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Nh{constructor(){this.W_=new No(Ja.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ca():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Eh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Eh(e,t,wh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ql(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class kh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Sh{constructor(){this.queries=jh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Ia(e),r=n.queries;n.queries=jh(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Oa(Aa.ABORTED,"Firestore shutting down"))}}function jh(){return new Yl(e=>$l(e),ql)}async function _h(e,t){const n=Ia(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new kh,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=bh(e,`Initialization of query '${Hl(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Ah(n)}async function Ch(e,t){const n=Ia(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Th(e,t){const n=Ia(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Ah(n)}function Ih(e,t,n){const r=Ia(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Ah(e){e.Y_.forEach(e=>{e.next()})}var Oh,Ph;(Ph=Oh||(Oh={})).ea="default",Ph.Cache="cache";class Rh{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Eh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Oh.Cache}}class Lh{constructor(e){this.key=e}}class Dh{constructor(e){this.key=e}}class Mh{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oc(),this.mutatedKeys=oc(),this.Aa=Gl(e),this.Ra=new wh(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Nh,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ca()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new Eh(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Nh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oc(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Dh(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Lh(n))}),t}ba(e){this.Ta=e.Ts,this.da=oc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Eh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Uh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fh{constructor(e){this.key=e,this.va=!1}}class Vh{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Yl(e=>$l(e),ql),this.Ma=new Map,this.xa=new Set,this.Oa=new No(Ja.comparator),this.Na=new Map,this.La=new rd,this.Ba={},this.ka=new Map,this.qa=Yu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Bh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=cf(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await qh(r,t,n,!0),s}async function zh(e,t){const n=cf(e);await qh(n,t,!0,!1)}async function qh(e,t,n,r){const s=await wd(e.localStore,Fl(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await $h(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Wd(e.remoteStore,s),o}async function $h(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Ed(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return nf(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await Ed(e.localStore,t,!0),a=new Mh(t,i.Ts),o=a.ma(i.documents),l=ru.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);nf(e,n,c.wa);const u=new Uh(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Hh(e,t,n){const r=Ia(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!ql(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Nd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kd(r.remoteStore,s.targetId),ef(r,s.targetId)}).catch(ao)):(ef(r,s.targetId),await Nd(r.localStore,s.targetId,!0))}async function Wh(e,t){const n=Ia(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kd(n.remoteStore,r.targetId))}async function Kh(e,t){const n=Ia(e);try{const e=await function(e,t){const n=Ia(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(To.EMPTY_BYTE_STRING,Ka.min()).withLastLimboFreeSnapshotVersion(Ka.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=Jl(),l=oc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(xd(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Ka.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return oo.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ta(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ta(r.va):e.removedDocuments.size>0&&(Ta(r.va),r.va=!1))}),await af(n,e,t)}catch(e){await ao(e)}}function Gh(e,t,n){const r=Ia(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Ia(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Ah(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Qh(e,t,n){const r=Ia(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new No(Ja.comparator);e=e.insert(i,il.newNoDocument(i,Ka.min()));const n=oc().add(i),s=new nu(Ka.min(),new Map,new No($a),e,n);await Kh(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),sf(r)}else await Nd(r.localStore,t,!1).then(()=>ef(r,t,n)).catch(ao)}async function Yh(e,t){const n=Ia(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ia(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=oo.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ta(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=oc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Zh(n,r,null),Jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await af(n,e)}catch(e){await ao(e)}}async function Xh(e,t,n){const r=Ia(e);try{const e=await function(e,t){const n=Ia(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ta(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Zh(r,t,n),Jh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await af(r,e)}catch(n){await ao(n)}}function Jh(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Zh(e,t,n){const r=Ia(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||tf(e,t)})}function tf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Kd(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),sf(e))}function nf(e,t,n){for(const r of n)r instanceof Lh?(e.La.addReference(r.key,t),rf(e,r)):r instanceof Dh?(ka("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||tf(e,r.key)):Ca()}function rf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(ka("SyncEngine","New document in limbo: "+n),e.xa.add(r),sf(e))}function sf(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ja(Qa.fromString(t)),r=e.qa.next();e.Na.set(r,new Fh(n)),e.Oa=e.Oa.insert(n,r),Wd(e.remoteStore,new qu(Fl(Ll(n.path)),r,"TargetPurposeLimboResolution",uo.oe))}}async function af(e,t,n){const r=Ia(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=hd.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=Ia(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>oo.forEach(t,t=>oo.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>oo.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!co(e))throw e;ka("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function of(e,t){const n=Ia(e);if(!n.currentUser.isEqual(t)){ka("SyncEngine","User change. New user:",t.toKey());const e=await yd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Oa(Aa.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await af(n,e.hs)}}function lf(e,t){const n=Ia(e),r=n.Na.get(t);if(r&&r.va)return oc().add(r.key);{let e=oc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function cf(e){const t=Ia(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Kh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qh.bind(null,t),t.Ca.d_=Th.bind(null,t.eventManager),t.Ca.$a=Ih.bind(null,t.eventManager),t}function uf(e){const t=Ia(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xh.bind(null,t),t}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return gd(this.persistence,new pd,e.initialUser,this.serializer)}Ga(e){return new cd(dd.Zr,this.serializer)}Wa(e){return new jd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Gh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=of.bind(null,this.syncEngine),await gh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Sh}createDatastore(e){const t=Dd(e.databaseInfo.databaseId),n=function(e){return new Rd(e)}(e.databaseInfo);return function(e,t,n,r){return new Bd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new qd(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Gh(this.syncEngine,e,0),Cd.D()?new Cd:new _d)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Vh(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ia(e);ka("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Hd(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}hf.provider={build:()=>new hf};class ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class pf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ba.UNAUTHENTICATED,this.clientId=qa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{ka("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ka("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=bh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function mf(e,t){e.asyncQueue.verifyOperationInProgress(),ka("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await yd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yf(e);ka("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>mh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>mh(t.remoteStore,n)),e._onlineComponents=t}async function yf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ka("FirestoreClient","Using user provided OfflineComponentProvider");try{await mf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Aa.FAILED_PRECONDITION||e.code===Aa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await mf(e,new df)}}else ka("FirestoreClient","Using default OfflineComponentProvider"),await mf(e,new df);return e._offlineComponents}async function vf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ka("FirestoreClient","Using user provided OnlineComponentProvider"),await gf(e,e._uninitializedComponentsProvider._online)):(ka("FirestoreClient","Using default OnlineComponentProvider"),await gf(e,new hf))),e._onlineComponents}function xf(e){return vf(e).then(e=>e.syncEngine)}async function bf(e){const t=await vf(e),n=t.eventManager;return n.onListen=Bh.bind(null,t.syncEngine),n.onUnlisten=Hh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=zh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Wh.bind(null,t.syncEngine),n}function wf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Pa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ff({next:o=>{i.Za(),t.enqueueAndForget(()=>Ch(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Oa(Aa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Oa(Aa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Rh(Ll(n.path),i,{includeMetadataChanges:!0,_a:!0});return _h(e,a)}(await bf(e),e.asyncQueue,t,n,r)),r.promise}function Nf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Pa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new ff({next:n=>{i.Za(),t.enqueueAndForget(()=>Ch(e,a)),n.fromCache&&"server"===r.source?s.reject(new Oa(Aa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Rh(n,i,{includeMetadataChanges:!0,_a:!0});return _h(e,a)}(await bf(e),e.asyncQueue,t,n,r)),r.promise}function Ef(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const kf=new Map;function Sf(e,t,n){if(!n)throw new Oa(Aa.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jf(e){if(!Ja.isDocumentKey(e))throw new Oa(Aa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _f(e){if(Ja.isDocumentKey(e))throw new Oa(Aa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Cf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ca()}function Tf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Oa(Aa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(e);throw new Oa(Aa.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class If{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Oa(Aa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oa(Aa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Oa(Aa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ef(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Oa(Aa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Oa(Aa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Oa(Aa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new If({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oa(Aa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oa(Aa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new If(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new La;switch(e.type){case"firstParty":return new Fa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Oa(Aa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kf.get(e);t&&(ka("ComponentProvider","Removing Datastore"),kf.delete(e),t.terminate())}(this),Promise.resolve()}}function Of(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Tf(e,Af))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ba.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Oa(Aa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ba(i)}e._authCredentials=new Da(new Ra(t,n))}}class Pf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pf(this.firestore,e,this._query)}}class Rf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rf(this.firestore,e,this._key)}}class Lf extends Pf{constructor(e,t,n){super(e,t,Ll(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rf(this.firestore,null,new Ja(e))}withConverter(e){return new Lf(this.firestore,e,this._path)}}function Df(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=at(e),Sf("collection","path",t),e instanceof Af){const n=Qa.fromString(t,...r);return _f(n),new Lf(e,null,n)}{if(!(e instanceof Rf||e instanceof Lf))throw new Oa(Aa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qa.fromString(t,...r));return _f(n),new Lf(e.firestore,null,n)}}function Mf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=at(e),1===arguments.length&&(t=qa.newId()),Sf("doc","path",t),e instanceof Af){const n=Qa.fromString(t,...r);return jf(n),new Rf(e,null,new Ja(n))}{if(!(e instanceof Rf||e instanceof Lf))throw new Oa(Aa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qa.fromString(t,...r));return jf(n),new Rf(e.firestore,e instanceof Lf?e.converter:null,new Ja(n))}}class Uf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Md(this,"async_queue_retry"),this.Vu=()=>{const e=Ld();e&&ka("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Ld();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ld();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Pa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Nv){if(!co(Nv))throw Nv;ka("AsyncQueue","Operation failed with retryable error: "+Nv)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sa("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=xh.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Ca()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Ff extends Af{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Uf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uf(e),this._firestoreClient=void 0,await e}}}function Vf(e){if(e._terminated)throw new Oa(Aa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Bf(e),e._firestoreClient}function Bf(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Mo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ef(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new pf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class zf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zf(To.fromBase64String(e))}catch(e){throw new Oa(Aa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zf(To.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Oa(Aa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $f{constructor(e){this._methodName=e}}class Hf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oa(Aa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oa(Aa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $a(this._lat,e._lat)||$a(this._long,e._long)}}class Wf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Kf=/^__.*__$/;class Gf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class Qf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ca()}}class Xf{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Yf(this.Cu)&&Kf.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Jf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Dd(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xf({Cu:e,methodName:t,qu:n,path:Xa.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(e){const t=e._freezeSettings(),n=Dd(e._databaseId);return new Jf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ep(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);lp("Data must be an object, but it was:",a,r);const o=ap(r,a);let l,c;if(i.merge)l=new _o(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=cp(t,r,n);if(!a.contains(s))throw new Oa(Aa.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);fp(e,s)||e.push(s)}l=new _o(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Gf(new rl(o),l,c)}class tp extends $f{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tp}}function np(e,t,n,r){const s=e.Qu(1,t,n);lp("Data must be an object, but it was:",s,r);const i=[],a=rl.empty();bo(r,(e,r)=>{const o=dp(t,e,n);r=at(r);const l=s.Nu(o);if(r instanceof tp)i.push(o);else{const e=ip(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new _o(i);return new Qf(a,o,s.fieldTransforms)}function rp(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[cp(t,r,n)],l=[s];if(i.length%2!=0)throw new Oa(Aa.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(cp(t,i[h])),l.push(i[h+1]);const c=[],u=rl.empty();for(let h=o.length-1;h>=0;--h)if(!fp(c,o[h])){const e=o[h];let t=l[h];t=at(t);const n=a.Nu(e);if(t instanceof tp)c.push(e);else{const r=ip(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new _o(c);return new Qf(u,d,a.fieldTransforms)}function sp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ip(n,e.Qu(r?4:3,t))}function ip(e,t){if(op(e=at(e)))return lp("Unsupported field value:",t,e),ap(e,t);if(e instanceof $f)return function(e,t){if(!Yf(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ip(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=at(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wa.fromDate(e);return{timestampValue:gu(t.serializer,n)}}if(e instanceof Wa){const n=new Wa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gu(t.serializer,n)}}if(e instanceof Hf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zf)return{bytesValue:yu(t.serializer,e._byteString)};if(e instanceof Rf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:bu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Wf)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return uc(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Cf(e)}`)}(e,t)}function ap(e,t){const n={};return wo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bo(e,(e,r)=>{const s=ip(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function op(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wa||e instanceof Hf||e instanceof zf||e instanceof Rf||e instanceof $f||e instanceof Wf)}function lp(e,t,n){if(!op(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Cf(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function cp(e,t,n){if((t=at(t))instanceof qf)return t._internalPath;if("string"==typeof t)return dp(e,t);throw hp("Field path arguments must be of type string or ",e,!1,void 0,n)}const up=new RegExp("[~\\*/\\[\\]]");function dp(e,t,n){if(t.search(up)>=0)throw hp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qf(...t.split("."))._internalPath}catch(r){throw hp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function hp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Oa(Aa.INVALID_ARGUMENT,o+e+l)}function fp(e,t){return e.some(e=>e.isEqual(t))}class pp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mp extends pp{data(){return super.data()}}function gp(e,t){return"string"==typeof t?dp(e,t):t instanceof qf?t._internalPath:t._delegate._internalPath}function yp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Oa(Aa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class xp extends vp{}function bp(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof vp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Ep).length,n=e.filter(e=>e instanceof wp).length;if(t>1||t>0&&n>0)throw new Oa(Aa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class wp extends xp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wp(e,t,n)}_apply(e){const t=this._parse(e);return _p(e._query,t),new Pf(e.firestore,e.converter,Bl(e._query,t))}_parse(e){const t=Zf(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Oa(Aa.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){jp(a,i);const t=[];for(const n of a)t.push(Sp(r,e,n));o={arrayValue:{values:t}}}else o=Sp(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||jp(a,i),o=sp(n,t,a,"in"===i||"not-in"===i);return hl.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Np(e,t,n){const r=t,s=gp("where",e);return wp._create(s,r,n)}class Ep extends vp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ep(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)_p(n,s),n=Bl(n,s)}(e._query,t),new Pf(e.firestore,e.converter,Bl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kp extends xp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Oa(Aa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Oa(Aa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cl(t,n)}(e._query,this._field,this._direction);return new Pf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Pl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Sp(e,t,n){if("string"==typeof(n=at(n))){if(""===n)throw new Oa(Aa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ml(t)&&-1!==n.indexOf("/"))throw new Oa(Aa.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qa.fromString(n));if(!Ja.isDocumentKey(r))throw new Oa(Aa.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Go(e,new Ja(r))}if(n instanceof Rf)return Go(e,n._key);throw new Oa(Aa.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function jp(e,t){if(!Array.isArray(e)||0===e.length)throw new Oa(Aa.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _p(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Oa(Aa.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Oa(Aa.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Cp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ca()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return bo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Oo(e.doubleValue));return new Wf(s)}convertGeoPoint(e){return new Hf(Oo(e.latitude),Oo(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Lo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Do(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new Wa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qa.fromString(e);Ta(zu(n));const r=new Uo(n.get(1),n.get(3)),s=new Ja(n.popFirst(5));return r.isEqual(t)||Sa(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Tp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ap extends pp{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Op extends Ap{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Pp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ip(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Op(this._firestore,this._userDataWriter,n.key,n,new Ip(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oa(Aa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Op(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ip(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Op(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ip(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Rp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Rp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ca()}}function Lp(e){e=Tf(e,Rf);const t=Tf(e.firestore,Ff);return wf(Vf(t),e._key).then(n=>qp(t,e,n))}class Dp extends Cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new zf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rf(this.firestore,null,t)}}function Mp(e){e=Tf(e,Pf);const t=Tf(e.firestore,Ff),n=Vf(t),r=new Dp(t);return yp(e._query),Nf(n,e._query).then(n=>new Pp(t,r,e,n))}function Up(e,t,n){e=Tf(e,Rf);const r=Tf(e.firestore,Ff),s=Tp(e.converter,t,n);return zp(r,[ep(Zf(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,jc.none())])}function Fp(e,t,n){e=Tf(e,Rf);const r=Tf(e.firestore,Ff),s=Zf(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=at(t))||t instanceof qf?rp(s,"updateDoc",e._key,t,n,o):np(s,"updateDoc",e._key,t),zp(r,[i.toMutation(e._key,jc.exists(!0))])}function Vp(e){return zp(Tf(e.firestore,Ff),[new Fc(e._key,jc.none())])}function Bp(e,t){const n=Tf(e.firestore,Ff),r=Mf(e),s=Tp(e.converter,t);return zp(n,[ep(Zf(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,jc.exists(!1))]).then(()=>r)}function zp(e,t){return function(e,t){const n=new Pa;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=uf(e);try{const e=await function(e,t){const n=Ia(e),r=Wa.now(),s=t.reduce((e,t)=>e.add(t.key),oc());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Jl(),l=oc();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Oc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Lc(e.key,t,sl(t.value.mapValue),jc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:tc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new No($a)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await af(r,e.changes),await ah(r.remoteStore)}catch(e){const t=bh(e,"Failed to persist write");n.reject(t)}}(await xf(e),t,n)),n.promise}(Vf(e),t)}function qp(e,t,n){const r=n.docs.get(t._key),s=new Dp(e);return new Ap(e,s,t._key,r,new Ip(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){wa=e}(Nn),yn(new ot("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Ff(new Ma(e.getProvider("auth-internal")),new Ba(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Oa(Aa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Sn(xa,"4.7.3",e),Sn(xa,"4.7.3","esm2017")}();const $p=En({apiKey:"AIzaSyDGdUSxHwKUGL4NWaQq_z6Ex4KSgxlWHig",authDomain:"e-commerce-3d587.firebaseapp.com",projectId:"e-commerce-3d587",storageBucket:"e-commerce-3d587.appspot.com",messagingSenderId:"576725083107",appId:"1:576725083107:web:9641344343363d0bb4f6d6"}),Hp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();const t=vn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ze(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;qn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ji,persistence:[ci,Ws,Gs]}),r=He("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>na)return;const r=null===t||void 0===t?void 0:t.token;ra!==r&&(ra=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){at(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){at(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=qe("auth");return i&&as(n,`http://${i}`),n}($p),Wp=new ks,Kp=new Es,Gp=new Ss;Wp.addScope("email"),Wp.addScope("profile"),Kp.addScope("email"),Kp.addScope("public_profile"),Gp.addScope("user:email");const Qp=function(e,t){const n="string"==typeof e?e:t||"(default)",r=vn("object"==typeof e?e:kn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Of(r,...e)}return r}($p);var Yp=n(579);const Xp=r.createContext();function Jp(){return(0,r.useContext)(Xp)}function Zp(e){let{children:t}=e;const[n,s]=(0,r.useState)(),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return at(e).onAuthStateChanged(t,n,r)}(Hp,async e=>{if(s(e),l(!0),e)try{const t=Mf(Qp,"users",e.uid),n=await Lp(t);if(n.exists()){const r=n.data();a(r.role||"user"),e.emailVerified!==r.emailVerified&&await Fp(t,{emailVerified:e.emailVerified})}else e.isAnonymous||(await Up(t,{email:e.email,role:"user",displayName:e.displayName||"",emailVerified:e.emailVerified,createdAt:Wa.now()}),a("user"))}catch(t){console.error("Error fetching user role:",t),a("user")}else a("");l(!1)});return e},[]);const d={currentUser:n,role:i,loading:o,rememberMe:c,setRememberMe:u,signup:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const s=await async function(e,t,n){if(xn(e.app))return Promise.reject(Wn(e));const r=Jr(e),s=is(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Us(e),t}),a=await Cs._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(Hp,e,t),i=s.user;return r&&await Bs(i,{displayName:r}),await Vs(i),await Up(Mf(Qp,"users",i.uid),{email:i.email,role:n,displayName:r||i.displayName,emailVerified:!1,createdAt:Wa.now()}),s},login:async function(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Ws:Gs;return await function(e,t){return at(e).setPersistence(t)}(Hp,n),Fs(Hp,e,t)},loginAsGuest:async function(){const e=await async function(e){var t;if(xn(e.app))return Promise.reject(Wn(e));const n=Jr(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Cs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await _s(n,{returnSecureToken:!0}),s=await Cs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}(Hp),t=e.user;return await Up(Mf(Qp,"users",t.uid),{email:null,role:"guest",isGuest:!0,createdAt:Wa.now(),displayName:`Guest_${t.uid.slice(-6)}`}),e},googleSignIn:async function(){return bi(Hp,Wp)},facebookSignIn:async function(){return bi(Hp,Kp)},githubSignIn:async function(){return bi(Hp,Gp)},logout:function(){return function(e){return at(e).signOut()}(Hp)},resetPassword:async function(e){return async function(e,t,n){const r=Jr(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ms(r,s,n),await is(r,s,"getOobCode",fs)}(Hp,e)},sendVerificationEmail:async function(){if(n&&!n.emailVerified)return Vs(n);throw new Error("User not found or email already verified")},updateUserProfile:async function(e){if(!n)return;const t=Mf(Qp,"users",n.uid);await Fp(t,e)},updateAuthProfile:async function(e){n&&await Bs(n,e)},getProfile:async function(){if(!n)return console.warn("getProfile: No current user"),null;try{console.log("Fetching profile for user:",n.uid);const e=Mf(Qp,"users",n.uid),t=await Lp(e);if(t.exists()){const e=t.data();return console.log("Profile data retrieved:",e),e}return console.log("No profile document found for user:",n.uid),null}catch(e){return console.error("Error fetching profile:",e),null}},fetchBillingAndShippingInfo:async function(){if(!n)return console.warn("No current user logged in."),null;try{const e=Mf(Qp,"users",n.uid),t=await Lp(e);return t.exists()?t.data():null}catch(e){return console.error("Error fetching billing and shipping info:",e),null}},placeOrder:async function(e){if(!n)return;const t=Df(Qp,"users",n.uid,"orders");await Bp(t,e)},sendContactMessage:async function(e){try{const t=Df(Qp,"contactMessages",n.uid,"messages");await Bp(t,{...e,createdAt:Wa.now()})}catch(t){throw console.error("Error sending contact message:",t),t}},reauthenticateUser:async function(e){if(!n||!n.email)throw new Error("No authenticated user with email");const t=bs.credential(n.email,e);return Ds(n,t)}};return(0,Yp.jsx)(Xp.Provider,{value:d,children:t})}const em=e=>{let{isOpen:t,onClose:n,title:r,message:s,details:i}=e;return t?(0,Yp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("div",{className:"flex-shrink-0",children:(0,Yp.jsx)("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Yp.jsx)("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r||"Error"})]}),(0,Yp.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Yp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("p",{className:"text-gray-700 mb-4",children:s}),i&&(0,Yp.jsxs)("details",{className:"text-sm text-gray-500",children:[(0,Yp.jsx)("summary",{className:"cursor-pointer hover:text-gray-700 mb-2",children:"Show details"}),(0,Yp.jsx)("pre",{className:"bg-gray-100 p-3 rounded text-xs overflow-auto",children:i})]})]}),(0,Yp.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,Yp.jsx)("button",{onClick:n,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"OK"})})]})}):null},tm=e=>{let{isOpen:t,onClose:n,title:r,message:s}=e;return t?(0,Yp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("div",{className:"flex-shrink-0",children:(0,Yp.jsx)("svg",{className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Yp.jsx)("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r||"Success"})]}),(0,Yp.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Yp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Yp.jsx)("div",{className:"p-6",children:(0,Yp.jsx)("p",{className:"text-gray-700",children:s})}),(0,Yp.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,Yp.jsx)("button",{onClick:n,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"OK"})})]})}):null},nm=e=>{let{isOpen:t,onClose:n,title:s,message:i,actionType:a="signin"}=e;const[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[x,b]=(0,r.useState)({isOpen:!1,title:"",message:""}),{login:w,signup:N,loginAsGuest:E}=Jp();if(!t)return null;return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:(0,Yp.jsxs)("div",{className:"bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-2xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto border border-blue-100 animate-scale-in",children:[(0,Yp.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,Yp.jsx)("div",{className:"absolute top-0 left-0 w-20 h-20 bg-blue-400 rounded-full blur-xl"}),(0,Yp.jsx)("div",{className:"absolute top-10 right-0 w-16 h-16 bg-purple-400 rounded-full blur-xl"}),(0,Yp.jsx)("div",{className:"absolute bottom-0 left-10 w-12 h-12 bg-pink-400 rounded-full blur-xl"})]}),(0,Yp.jsxs)("div",{className:"relative flex items-center justify-between p-6 border-b border-blue-200 bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl",children:[(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("div",{className:"flex-shrink-0",children:(0,Yp.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,Yp.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),(0,Yp.jsx)("h3",{className:"ml-4 text-xl font-bold text-white",children:s||(()=>{switch(a){case"favorites":return"Save Your Favorites! \ud83d\udc96";case"reviews":return"Share Your Thoughts! \u2b50";case"checkout":return"Complete Your Purchase! \ud83d\uded2";case"profile":return"Access Your Profile! \ud83d\udc64";default:return"Join Our Community! \ud83d\ude80"}})()})]}),(0,Yp.jsx)("button",{onClick:n,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-full hover:bg-white hover:bg-opacity-20",children:(0,Yp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Yp.jsxs)("div",{className:"relative p-6",children:[(0,Yp.jsx)("p",{className:"text-gray-700 mb-6 text-center leading-relaxed",children:(()=>{switch(a){case"favorites":return"Create an account to save your favorite products and access them across all your devices. Never lose track of what you love!";case"reviews":return"Share your experiences and help other customers make informed decisions. Your voice matters to our community!";case"checkout":return"Sign in to complete your purchase and track your orders. We'll keep you updated every step of the way!";case"profile":return"Access your profile, order history, and account settings. Manage everything in one place!";default:return i||"Join thousands of happy customers and unlock amazing features!"}})()}),(0,Yp.jsxs)("div",{className:"flex mb-6 bg-gray-100 rounded-xl p-1",children:[(0,Yp.jsx)("button",{onClick:()=>l(!0),className:"flex-1 py-3 px-4 text-sm font-medium rounded-lg transition-all duration-300 "+(o?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-transparent text-gray-600 hover:text-gray-800"),children:(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})}),(0,Yp.jsx)("button",{onClick:()=>l(!1),className:"flex-1 py-3 px-4 text-sm font-medium rounded-lg transition-all duration-300 "+(o?"bg-transparent text-gray-600 hover:text-gray-800":"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-lg transform scale-105"),children:(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),o&&(0,Yp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{await w(c,d),b({isOpen:!0,title:"Welcome Back! \ud83c\udf89",message:"Successfully signed in! You can now enjoy all our features."}),setTimeout(()=>{n()},1500)}catch(t){let e="Failed to sign in. Please try again.";"auth/invalid-login-credentials"===t.code?e="Invalid email or password. Please check your credentials.":"auth/user-not-found"===t.code?e="No account found with this email. Please sign up instead.":"auth/too-many-requests"===t.code&&(e="Too many failed attempts. Please try again later."),v({isOpen:!0,title:"Oops! \ud83d\ude05",message:e,details:t.message})}finally{g(!1)}},className:"space-y-4 animate-slide-in",children:[(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Yp.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password",required:!0})]})]}),(0,Yp.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:m?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]}),!o&&(0,Yp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(!0),d!==f)return v({isOpen:!0,title:"Password Mismatch! \ud83d\udd10",message:"Passwords do not match. Please try again.",details:""}),void g(!1);try{await N(c,d),b({isOpen:!0,title:"Welcome to the Family! \ud83c\udf8a",message:"Account created successfully! You can now use all features and enjoy exclusive benefits."}),setTimeout(()=>{n()},1500)}catch(t){let e="Failed to create account. Please try again.";"auth/email-already-in-use"===t.code?e="An account with this email already exists. Please sign in instead.":"auth/weak-password"===t.code?e="Password is too weak. Please use a stronger password.":"auth/invalid-email"===t.code&&(e="Please enter a valid email address."),v({isOpen:!0,title:"Account Creation Failed! \ud83d\ude14",message:e,details:t.message})}finally{g(!1)}},className:"space-y-4 animate-slide-in",children:[(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Yp.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Create a strong password",required:!0})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Yp.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password",required:!0})]})]}),(0,Yp.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 px-4 rounded-xl font-medium hover:from-purple-600 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:m?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),(0,Yp.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,Yp.jsx)("button",{onClick:async()=>{g(!0);try{await E(),b({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. Some features may be limited, but you can still explore!"}),setTimeout(()=>{n()},1500)}catch(e){v({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}finally{g(!1)}},disabled:m,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md",children:(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})})})]})]})}),(0,Yp.jsx)(em,{isOpen:y.isOpen,onClose:()=>v({isOpen:!1,title:"",message:"",details:""}),title:y.title,message:y.message,details:y.details}),(0,Yp.jsx)(tm,{isOpen:x.isOpen,onClose:()=>b({isOpen:!1,title:"",message:""}),title:x.title,message:x.message})]})};const rm=function(){const{logout:e,role:t}=Jp(),n=Z(),s=X(),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({isOpen:!1,actionType:"signup"});async function f(){try{await e(),n("/login")}catch{console.error("Failed to Logout")}}(0,r.useEffect)(()=>Hp.onAuthStateChanged(e=>{u(e)}),[]);const p=()=>{a(!1),h({isOpen:!0,actionType:"signup"})},m=()=>c&&c.isAnonymous,g=e=>s.pathname===e;return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(nm,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,actionType:"signup"}),actionType:d.actionType}),(0,Yp.jsxs)("nav",{className:"bg-white shadow-soft border-b border-gray-100 sticky top-0 z-50",children:[(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Yp.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Yp.jsx)("div",{className:"flex-shrink-0",children:(0,Yp.jsxs)(Oe,{to:"/home",className:"flex items-center space-x-2",children:[(0,Yp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:(0,Yp.jsx)("span",{className:"text-white font-bold text-sm",children:"E"})}),(0,Yp.jsx)("span",{className:"text-xl font-display font-bold text-gray-900",children:"E-Store"})]})}),(0,Yp.jsx)("div",{className:"hidden md:block",children:(0,Yp.jsxs)("div",{className:"ml-10 flex items-baseline space-x-8",children:[(0,Yp.jsx)(Oe,{to:"/home",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/home")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Home"}),(0,Yp.jsx)(Oe,{to:"/search",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/search")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Search"}),(0,Yp.jsx)(Oe,{to:"/categories",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/categories")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Categories"}),(0,Yp.jsx)(Oe,{to:"/favorites",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/favorites")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Favorites"}),"admin"===t&&(0,Yp.jsx)(Oe,{to:"/admin",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/admin")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Admin"})]})}),(0,Yp.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[c&&(0,Yp.jsx)(Oe,{to:"/checkout",className:"relative p-2 text-gray-600 hover:text-primary-600 transition-colors duration-200",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),c?(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsxs)("button",{onClick:()=>{a(!i)},className:"flex items-center space-x-2 bg-gray-50 hover:bg-gray-100 rounded-full px-3 py-2 transition-colors duration-200",children:[(0,Yp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:(0,Yp.jsx)("span",{className:"text-white font-medium text-sm",children:(()=>{if(c){if(c.isAnonymous)return"G";if(c.email)return c.email.charAt(0).toUpperCase()}return"U"})()})}),(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-700 hidden lg:block",children:(()=>{if(c){if(c.isAnonymous)return"Guest User";if(c.email)return c.email.split("@")[0]}return"User"})()}),(0,Yp.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,Yp.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-large border border-gray-100 py-1 z-50 animate-fade-in",children:[(0,Yp.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,Yp.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m()?"Guest User":c.email}),(0,Yp.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:m()?"guest account":`${t} account`})]}),!m()&&(0,Yp.jsx)(Oe,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Profile Settings"}),(0,Yp.jsx)(Oe,{to:"/favorites",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"My Favorites"}),"admin"===t&&(0,Yp.jsx)(Oe,{to:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Admin Panel"}),m()&&(0,Yp.jsx)("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 transition-colors duration-200",children:"Create Account"}),(0,Yp.jsx)("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:m()?"Exit Guest Mode":"Sign Out"})]})]}):(0,Yp.jsx)(Oe,{to:"/login",className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign In"})]}),(0,Yp.jsx)("div",{className:"md:hidden",children:(0,Yp.jsx)("button",{onClick:()=>{l(!o)},className:"text-gray-600 hover:text-gray-900 p-2 rounded-md",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),o&&(0,Yp.jsx)("div",{className:"md:hidden bg-white border-t border-gray-100 animate-slide-up",children:(0,Yp.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,Yp.jsx)(Oe,{to:"/home",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/home")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Home"}),(0,Yp.jsx)(Oe,{to:"/search",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/search")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Search"}),(0,Yp.jsx)(Oe,{to:"/categories",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/categories")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Categories"}),(0,Yp.jsx)(Oe,{to:"/favorites",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/favorites")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Favorites"}),c&&(0,Yp.jsx)(Oe,{to:"/checkout",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Cart"}),"admin"===t&&(0,Yp.jsx)(Oe,{to:"/admin",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/admin")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Admin"}),c?(0,Yp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Yp.jsxs)("div",{className:"px-3 py-2",children:[(0,Yp.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m()?"Guest User":c.email}),(0,Yp.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:m()?"guest account":`${t} account`})]}),!m()&&(0,Yp.jsx)(Oe,{to:"/profile",className:"block px-3 py-2 text-base font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Profile Settings"}),m()&&(0,Yp.jsx)("button",{onClick:()=>{p(),l(!1)},className:"w-full text-left px-3 py-2 text-base font-medium text-blue-600 hover:bg-blue-50",children:"Create Account"}),(0,Yp.jsx)("button",{onClick:()=>{f(),l(!1)},className:"w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50",children:m()?"Exit Guest Mode":"Sign Out"})]}):(0,Yp.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,Yp.jsx)(Oe,{to:"/login",className:"block px-3 py-2 text-base font-medium text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Sign In"})})]})})]})]})};const sm=function(){return(0,Yp.jsxs)("div",{className:"relative bg-gradient-to-br from-primary-50 via-white to-secondary-50 overflow-hidden",children:[(0,Yp.jsxs)("div",{className:"absolute inset-0",children:[(0,Yp.jsx)("div",{className:"absolute top-0 left-0 w-72 h-72 bg-primary-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle"}),(0,Yp.jsx)("div",{className:"absolute top-0 right-0 w-72 h-72 bg-secondary-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle",style:{animationDelay:"1s"}}),(0,Yp.jsx)("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-accent-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle",style:{animationDelay:"2s"}})]}),(0,Yp.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-primary-100 text-primary-800 mb-8 animate-fade-in",children:[(0,Yp.jsx)("span",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2"}),"New Collection Available"]}),(0,Yp.jsxs)("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-display font-bold text-gray-900 mb-6 animate-fade-in",style:{animationDelay:"0.2s"},children:["Discover Amazing",(0,Yp.jsx)("span",{className:"block bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Products"})]}),(0,Yp.jsx)("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto animate-fade-in",style:{animationDelay:"0.4s"},children:"Explore our curated collection of premium products. From electronics to fashion, find everything you need with exceptional quality and competitive prices."}),(0,Yp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in",style:{animationDelay:"0.6s"},children:[(0,Yp.jsxs)(Oe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Start Shopping",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]}),(0,Yp.jsxs)(Oe,{to:"/favorites",className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200",children:["View Favorites",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})]})]}),(0,Yp.jsxs)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto animate-fade-in",style:{animationDelay:"0.8s"},children:[(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"10K+"}),(0,Yp.jsx)("div",{className:"text-gray-600",children:"Happy Customers"})]}),(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"500+"}),(0,Yp.jsx)("div",{className:"text-gray-600",children:"Premium Products"})]}),(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"24/7"}),(0,Yp.jsx)("div",{className:"text-gray-600",children:"Customer Support"})]})]})]})}),(0,Yp.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce-gentle",children:(0,Yp.jsx)("div",{className:"w-6 h-10 border-2 border-gray-400 rounded-full flex justify-center",children:(0,Yp.jsx)("div",{className:"w-1 h-3 bg-gray-400 rounded-full mt-2 animate-pulse-slow"})})})]})};const im=function(){const e=(new Date).getFullYear();return(0,Yp.jsxs)("footer",{className:"bg-gray-900 text-white",children:[(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[(0,Yp.jsxs)("div",{className:"lg:col-span-1",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,Yp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:(0,Yp.jsx)("span",{className:"text-white font-bold text-sm",children:"E"})}),(0,Yp.jsx)("span",{className:"text-xl font-display font-bold",children:"E-Store"})]}),(0,Yp.jsx)("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Your trusted destination for premium products. We're committed to providing exceptional quality and outstanding customer service."}),(0,Yp.jsxs)("div",{className:"flex space-x-4",children:[(0,Yp.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),(0,Yp.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),(0,Yp.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"})})}),(0,Yp.jsx)("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Yp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Quick Links"}),(0,Yp.jsxs)("ul",{className:"space-y-3",children:[(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/home",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Home"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/search",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Search Products"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/favorites",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"My Favorites"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/checkout",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Shopping Cart"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/profile",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"My Account"})})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Customer Service"}),(0,Yp.jsxs)("ul",{className:"space-y-3",children:[(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Contact Us"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)(Oe,{to:"/about",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"About Us"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)("a",{href:"/shipping",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Shipping Info"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)("a",{href:"/returns",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Returns & Exchanges"})}),(0,Yp.jsx)("li",{children:(0,Yp.jsx)("a",{href:"/faq",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"FAQ"})})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Stay Updated"}),(0,Yp.jsx)("p",{className:"text-gray-400 mb-4",children:"Subscribe to our newsletter for the latest products and exclusive offers."}),(0,Yp.jsxs)("form",{className:"space-y-3",children:[(0,Yp.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 transition-colors duration-200"}),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 text-white py-3 px-4 rounded-lg font-medium hover:from-primary-700 hover:to-primary-800 transition-all duration-200 transform hover:-translate-y-1",children:"Subscribe"})]})]})]})}),(0,Yp.jsx)("div",{className:"border-t border-gray-800",children:(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Yp.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Yp.jsxs)("div",{className:"text-gray-400 text-sm",children:["\xa9 ",e," E-Store. All rights reserved."]}),(0,Yp.jsxs)("div",{className:"flex space-x-6 text-sm",children:[(0,Yp.jsx)("a",{href:"/privacy",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Privacy Policy"}),(0,Yp.jsx)("a",{href:"/terms",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Terms of Service"}),(0,Yp.jsx)("a",{href:"/cookies",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Cookie Policy"})]})]})})})]})};function am(e,t){return function(){return e.apply(t,arguments)}}const{toString:om}=Object.prototype,{getPrototypeOf:lm}=Object,{iterator:cm,toStringTag:um}=Symbol,dm=(hm=Object.create(null),e=>{const t=om.call(e);return hm[t]||(hm[t]=t.slice(8,-1).toLowerCase())});var hm;const fm=e=>(e=e.toLowerCase(),t=>dm(t)===e),pm=e=>t=>typeof t===e,{isArray:mm}=Array,gm=pm("undefined");function ym(e){return null!==e&&!gm(e)&&null!==e.constructor&&!gm(e.constructor)&&bm(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vm=fm("ArrayBuffer");const xm=pm("string"),bm=pm("function"),wm=pm("number"),Nm=e=>null!==e&&"object"===typeof e,Em=e=>{if("object"!==dm(e))return!1;const t=lm(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(um in e)&&!(cm in e)},km=fm("Date"),Sm=fm("File"),jm=fm("Blob"),_m=fm("FileList"),Cm=fm("URLSearchParams"),[Tm,Im,Am,Om]=["ReadableStream","Request","Response","Headers"].map(fm);function Pm(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mm(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(ym(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function Rm(e,t){if(ym(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Lm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Dm=e=>!gm(e)&&e!==Lm;const Mm=(Um="undefined"!==typeof Uint8Array&&lm(Uint8Array),e=>Um&&e instanceof Um);var Um;const Fm=fm("HTMLFormElement"),Vm=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Bm=fm("RegExp"),zm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Pm(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const qm=fm("AsyncFunction"),$m=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],Lm.addEventListener("message",e=>{let{source:t,data:s}=e;t===Lm&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),Lm.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,bm(Lm.postMessage)),Hm="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Lm):"undefined"!==typeof process&&process.nextTick||$m,Wm={isArray:mm,isArrayBuffer:vm,isBuffer:ym,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||bm(e.append)&&("formdata"===(t=dm(e))||"object"===t&&bm(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&vm(e.buffer),t},isString:xm,isNumber:wm,isBoolean:e=>!0===e||!1===e,isObject:Nm,isPlainObject:Em,isEmptyObject:e=>{if(!Nm(e)||ym(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Nv){return!1}},isReadableStream:Tm,isRequest:Im,isResponse:Am,isHeaders:Om,isUndefined:gm,isDate:km,isFile:Sm,isBlob:jm,isRegExp:Bm,isFunction:bm,isStream:e=>Nm(e)&&bm(e.pipe),isURLSearchParams:Cm,isTypedArray:Mm,isFileList:_m,forEach:Pm,merge:function e(){const{caseless:t}=Dm(this)&&this||{},n={},r=(r,s)=>{const i=t&&Rm(n,s)||s;Em(n[i])&&Em(r)?n[i]=e(n[i],r):Em(r)?n[i]=e({},r):mm(r)?n[i]=r.slice():n[i]=r};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Pm(arguments[s],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Pm(t,(t,r)=>{n&&bm(t)?e[r]=am(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&lm(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:dm,kindOfTest:fm,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(mm(e))return e;let t=e.length;if(!wm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[cm]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Fm,hasOwnProperty:Vm,hasOwnProp:Vm,reduceDescriptors:zm,freezeMethods:e=>{zm(e,(t,n)=>{if(bm(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];bm(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return mm(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Rm,global:Lm,isContextDefined:Dm,isSpecCompliantForm:function(e){return!!(e&&bm(e.append)&&"FormData"===e[um]&&e[cm])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Nm(e)){if(t.indexOf(e)>=0)return;if(ym(e))return e;if(!("toJSON"in e)){t[r]=e;const s=mm(e)?[]:{};return Pm(e,(e,t)=>{const i=n(e,r+1);!gm(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:qm,isThenable:e=>e&&(Nm(e)||bm(e))&&bm(e.then)&&bm(e.catch),setImmediate:$m,asap:Hm,isIterable:e=>null!=e&&bm(e[cm])};function Km(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Wm.inherits(Km,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wm.toJSONObject(this.config),code:this.code,status:this.status}}});const Gm=Km.prototype,Qm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Qm[e]={value:e}}),Object.defineProperties(Km,Qm),Object.defineProperty(Gm,"isAxiosError",{value:!0}),Km.from=(e,t,n,r,s,i)=>{const a=Object.create(Gm);return Wm.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Km.call(a,e.message,t,n,r,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Ym=Km;function Xm(e){return Wm.isPlainObject(e)||Wm.isArray(e)}function Jm(e){return Wm.endsWith(e,"[]")?e.slice(0,-2):e}function Zm(e,t,n){return e?e.concat(t).map(function(e,t){return e=Jm(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const eg=Wm.toFlatObject(Wm,{},null,function(e){return/^is[A-Z]/.test(e)});const tg=function(e,t,n){if(!Wm.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Wm.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Wm.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Wm.isSpecCompliantForm(t);if(!Wm.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Wm.isDate(e))return e.toISOString();if(Wm.isBoolean(e))return e.toString();if(!o&&Wm.isBlob(e))throw new Ym("Blob is not supported. Use a Buffer instead.");return Wm.isArrayBuffer(e)||Wm.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Wm.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Wm.isArray(e)&&function(e){return Wm.isArray(e)&&!e.some(Xm)}(e)||(Wm.isFileList(e)||Wm.endsWith(n,"[]"))&&(o=Wm.toArray(e)))return n=Jm(n),o.forEach(function(e,r){!Wm.isUndefined(e)&&null!==e&&t.append(!0===a?Zm([n],r,i):null===a?n:n+"[]",l(e))}),!1;return!!Xm(e)||(t.append(Zm(s,n,i),l(e)),!1)}const u=[],d=Object.assign(eg,{defaultVisitor:c,convertValue:l,isVisitable:Xm});if(!Wm.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Wm.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Wm.forEach(n,function(n,i){!0===(!(Wm.isUndefined(n)||null===n)&&s.call(t,n,Wm.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function ng(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rg(e,t){this._pairs=[],e&&tg(e,this,t)}const sg=rg.prototype;sg.append=function(e,t){this._pairs.push([e,t])},sg.toString=function(e){const t=e?function(t){return e.call(this,t,ng)}:ng;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ig=rg;function ag(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function og(e,t,n){if(!t)return e;const r=n&&n.encode||ag;Wm.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):Wm.isURLSearchParams(t)?t.toString():new ig(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const lg=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wm.forEach(this.handlers,function(t){null!==t&&e(t)})}},cg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ug={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ig,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dg="undefined"!==typeof window&&"undefined"!==typeof document,hg="object"===typeof navigator&&navigator||void 0,fg=dg&&(!hg||["ReactNative","NativeScript","NS"].indexOf(hg.product)<0),pg="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,mg=dg&&window.location.href||"http://localhost",gg={...e,...ug};const yg=function(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),o=s>=e.length;if(i=!i&&Wm.isArray(r)?r.length:i,o)return Wm.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&Wm.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&Wm.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(Wm.isFormData(e)&&Wm.isFunction(e.entries)){const n={};return Wm.forEachEntry(e,(e,r)=>{t(function(e){return Wm.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const vg={transitional:cg,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Wm.isObject(e);s&&Wm.isHTMLForm(e)&&(e=new FormData(e));if(Wm.isFormData(e))return r?JSON.stringify(yg(e)):e;if(Wm.isArrayBuffer(e)||Wm.isBuffer(e)||Wm.isStream(e)||Wm.isFile(e)||Wm.isBlob(e)||Wm.isReadableStream(e))return e;if(Wm.isArrayBufferView(e))return e.buffer;if(Wm.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return tg(e,new gg.classes.URLSearchParams,{visitor:function(e,t,n,r){return gg.isNode&&Wm.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=Wm.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return tg(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Wm.isString(e))try{return(t||JSON.parse)(e),Wm.trim(e)}catch(Nv){if("SyntaxError"!==Nv.name)throw Nv}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vg.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Wm.isResponse(e)||Wm.isReadableStream(e))return e;if(e&&Wm.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Nv){if(n){if("SyntaxError"===Nv.name)throw Ym.from(Nv,Ym.ERR_BAD_RESPONSE,this,null,this.response);throw Nv}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gg.classes.FormData,Blob:gg.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wm.forEach(["delete","get","head","post","put","patch"],e=>{vg.headers[e]={}});const xg=vg,bg=Wm.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wg=Symbol("internals");function Ng(e){return e&&String(e).trim().toLowerCase()}function Eg(e){return!1===e||null==e?e:Wm.isArray(e)?e.map(Eg):String(e)}function kg(e,t,n,r,s){return Wm.isFunction(r)?r.call(this,t,n):(s&&(t=n),Wm.isString(t)?Wm.isString(r)?-1!==t.indexOf(r):Wm.isRegExp(r)?r.test(t):void 0:void 0)}class Sg{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Ng(t);if(!s)throw new Error("header name must be a non-empty string");const i=Wm.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Eg(e))}const i=(e,t)=>Wm.forEach(e,(e,n)=>s(e,n,t));if(Wm.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Wm.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&bg[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Wm.isObject(e)&&Wm.isIterable(e)){let n,r,s={};for(const t of e){if(!Wm.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Wm.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Ng(e)){const n=Wm.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Wm.isFunction(t))return t.call(this,e,n);if(Wm.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ng(e)){const n=Wm.findKey(this,e);return!(!n||void 0===this[n]||t&&!kg(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Ng(e)){const s=Wm.findKey(n,e);!s||t&&!kg(0,n[s],s,t)||(delete n[s],r=!0)}}return Wm.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!kg(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Wm.forEach(this,(r,s)=>{const i=Wm.findKey(n,s);if(i)return t[i]=Eg(r),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=Eg(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Wm.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Wm.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[wg]=this[wg]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ng(e);t[r]||(!function(e,t){const n=Wm.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Wm.isArray(e)?e.forEach(r):r(e),this}}Sg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Wm.reduceDescriptors(Sg.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Wm.freezeMethods(Sg);const jg=Sg;function _g(e,t){const n=this||xg,r=t||n,s=jg.from(r.headers);let i=r.data;return Wm.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Cg(e){return!(!e||!e.__CANCEL__)}function Tg(e,t,n){Ym.call(this,null==e?"canceled":e,Ym.ERR_CANCELED,t,n),this.name="CanceledError"}Wm.inherits(Tg,Ym,{__CANCEL__:!0});const Ig=Tg;function Ag(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ym("Request failed with status code "+n.status,[Ym.ERR_BAD_REQUEST,Ym.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Og=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];s||(s=l),n[i]=o,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Pg=function(e,t){let n,r,s=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?a(l,e):(n=l,r||(r=setTimeout(()=>{r=null,a(n)},i-t)))},()=>n&&a(n)]},Rg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=Og(50,250);return Pg(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,o=i-r,l=s(o);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Lg=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Dg=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wm.asap(()=>e(...n))},Mg=gg.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,gg.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(gg.origin),gg.navigator&&/(msie|trident)/i.test(gg.navigator.userAgent)):()=>!0,Ug=gg.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const a=[e+"="+encodeURIComponent(t)];Wm.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Wm.isString(r)&&a.push("path="+r),Wm.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fg(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Vg=e=>e instanceof jg?{...e}:e;function Bg(e,t){t=t||{};const n={};function r(e,t,n,r){return Wm.isPlainObject(e)&&Wm.isPlainObject(t)?Wm.merge.call({caseless:r},e,t):Wm.isPlainObject(t)?Wm.merge({},t):Wm.isArray(t)?t.slice():t}function s(e,t,n,s){return Wm.isUndefined(t)?Wm.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!Wm.isUndefined(t))return r(void 0,t)}function a(e,t){return Wm.isUndefined(t)?Wm.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(Vg(e),Vg(t),0,!0)};return Wm.forEach(Object.keys({...e,...t}),function(r){const i=l[r]||s,a=i(e[r],t[r],r);Wm.isUndefined(a)&&i!==o||(n[r]=a)}),n}const zg=e=>{const t=Bg({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=jg.from(o),t.url=og(Fg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Wm.isFormData(r))if(gg.hasStandardBrowserEnv||gg.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(gg.hasStandardBrowserEnv&&(s&&Wm.isFunction(s)&&(s=s(t)),s||!1!==s&&Mg(t.url))){const e=i&&a&&Ug.read(a);e&&o.set(i,e)}return t},qg="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=zg(e);let s=r.data;const i=jg.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=jg.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ag(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Ym("Request aborted",Ym.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Ym("Network Error",Ym.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||cg;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Ym(t,s.clarifyTimeoutError?Ym.ETIMEDOUT:Ym.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&Wm.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Wm.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=Rg(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Rg(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new Ig(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===gg.protocols.indexOf(y)?n(new Ym("Unsupported protocol "+y+":",Ym.ERR_BAD_REQUEST,e)):m.send(s||null)})},$g=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Ym?t:new Ig(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new Ym(`timeout ${t} of ms exceeded`,Ym.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>Wm.asap(a),o}},Hg=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Wg=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Kg=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of Wg(e))yield*Hg(n,t)}(e,t);let i,a=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},Gg="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Qg=Gg&&"function"===typeof ReadableStream,Yg=Gg&&("function"===typeof TextEncoder?(Xg=new TextEncoder,e=>Xg.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Xg;const Jg=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Nv){return!1}},Zg=Qg&&Jg(()=>{let e=!1;const t=new Request(gg.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ey=Qg&&Jg(()=>Wm.isReadableStream(new Response("").body)),ty={stream:ey&&(e=>e.body)};var ny;Gg&&(ny=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ty[e]&&(ty[e]=Wm.isFunction(ny[e])?t=>t[e]():(t,n)=>{throw new Ym(`Response type '${e}' is not supported`,Ym.ERR_NOT_SUPPORT,n)})}));const ry=async(e,t)=>{const n=Wm.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Wm.isBlob(e))return e.size;if(Wm.isSpecCompliantForm(e)){const t=new Request(gg.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Wm.isArrayBufferView(e)||Wm.isArrayBuffer(e)?e.byteLength:(Wm.isURLSearchParams(e)&&(e+=""),Wm.isString(e)?(await Yg(e)).byteLength:void 0)})(t):n},sy=Gg&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=zg(e);c=c?(c+"").toLowerCase():"text";let f,p=$g([s,i&&i.toAbortSignal()],a);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Zg&&"get"!==n&&"head"!==n&&0!==(g=await ry(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Wm.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Lg(g,Rg(Dg(l)));r=Kg(n.body,65536,e,t)}}Wm.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let i=await fetch(f,h);const a=ey&&("stream"===c||"response"===c);if(ey&&(o||a&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=Wm.toFiniteNumber(i.headers.get("content-length")),[n,r]=o&&Lg(t,Rg(Dg(o),!0))||[];i=new Response(Kg(i.body,65536,n,()=>{r&&r(),m&&m()}),e)}c=c||"text";let y=await ty[Wm.findKey(ty,c)||"text"](i,e);return!a&&m&&m(),await new Promise((t,n)=>{Ag(t,n,{data:y,headers:jg.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})})}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Ym("Network Error",Ym.ERR_NETWORK,e,f),{cause:y.cause||y});throw Ym.from(y,y&&y.code,e,f)}}),iy={http:null,xhr:qg,fetch:sy};Wm.forEach(iy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Nv){}Object.defineProperty(e,"adapterName",{value:t})}});const ay=e=>`- ${e}`,oy=e=>Wm.isFunction(e)||null===e||!1===e,ly=e=>{e=Wm.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!oy(n)&&(r=iy[(t=String(n)).toLowerCase()],void 0===r))throw new Ym(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+i]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(ay).join("\n"):" "+ay(e[0]):"as no adapter specified";throw new Ym("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function cy(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ig(null,e)}function uy(e){cy(e),e.headers=jg.from(e.headers),e.data=_g.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ly(e.adapter||xg.adapter)(e).then(function(t){return cy(e),t.data=_g.call(e,e.transformResponse,t),t.headers=jg.from(t.headers),t},function(t){return Cg(t)||(cy(e),t&&t.response&&(t.response.data=_g.call(e,e.transformResponse,t.response),t.response.headers=jg.from(t.response.headers))),Promise.reject(t)})}const dy="1.11.0",hy={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{hy[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const fy={};hy.transitional=function(e,t,n){function r(e,t){return"[Axios v"+dy+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new Ym(r(s," has been removed"+(t?" in "+t:"")),Ym.ERR_DEPRECATED);return t&&!fy[s]&&(fy[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},hy.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const py={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Ym("options must be an object",Ym.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new Ym("option "+i+" must be "+n,Ym.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Ym("Unknown option "+i,Ym.ERR_BAD_OPTION)}},validators:hy},my=py.validators;class gy{constructor(e){this.defaults=e||{},this.interceptors={request:new lg,response:new lg}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Nv){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Bg(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&py.assertOptions(n,{silentJSONParsing:my.transitional(my.boolean),forcedJSONParsing:my.transitional(my.boolean),clarifyTimeoutError:my.transitional(my.boolean)},!1),null!=r&&(Wm.isFunction(r)?t.paramsSerializer={serialize:r}:py.assertOptions(r,{encode:my.function,serialize:my.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),py.assertOptions(t,{baseUrl:my.spelling("baseURL"),withXsrfToken:my.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&Wm.merge(s.common,s[t.method]);s&&Wm.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=jg.concat(i,s);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[uy.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=uy.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return og(Fg((e=Bg(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Wm.forEach(["delete","get","head","options"],function(e){gy.prototype[e]=function(t,n){return this.request(Bg(n||{},{method:e,url:t,data:(n||{}).data}))}}),Wm.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Bg(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}gy.prototype[e]=t(),gy.prototype[e+"Form"]=t(!0)});const yy=gy;class vy{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Ig(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new vy(function(t){e=t}),cancel:e}}}const xy=vy;const by={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(by).forEach(e=>{let[t,n]=e;by[n]=t});const wy=by;const Ny=function e(t){const n=new yy(t),r=am(yy.prototype.request,n);return Wm.extend(r,yy.prototype,n,{allOwnKeys:!0}),Wm.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Bg(t,n))},r}(xg);Ny.Axios=yy,Ny.CanceledError=Ig,Ny.CancelToken=xy,Ny.isCancel=Cg,Ny.VERSION=dy,Ny.toFormData=tg,Ny.AxiosError=Ym,Ny.Cancel=Ny.CanceledError,Ny.all=function(e){return Promise.all(e)},Ny.spread=function(e){return function(t){return e.apply(null,t)}},Ny.isAxiosError=function(e){return Wm.isObject(e)&&!0===e.isAxiosError},Ny.mergeConfig=Bg,Ny.AxiosHeaders=jg,Ny.formToJSON=e=>yg(Wm.isHTMLForm(e)?new FormData(e):e),Ny.getAdapter=ly,Ny.HttpStatusCode=wy,Ny.default=Ny;const Ey=Ny,ky="http://localhost:3000/api",Sy=async()=>{try{const e=`${ky}/categories/`;console.log("Fetching categories from:",e);const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return console.log("Categories response:",n),n}catch(e){return console.error("Error fetching categories:",e),console.log("Using fallback categories"),["groceries","electronics","clothing","beauty","home-decoration","furniture","automotive","sports","toys","health","books","pets"]}},jy=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{s(!0);const e=await Sy();t(e)}catch(e){console.error("Error loading categories:",e),t([])}finally{s(!1)}})()},[]);const i=e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6");if(n)return(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Yp.jsxs)("div",{className:"text-center mb-12",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),(0,Yp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})});const a=e.length>=6?e.slice(0,6):e;return(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Yp.jsxs)("div",{className:"text-center mb-12",children:[(0,Yp.jsx)("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"Shop by Category"}),(0,Yp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Explore our diverse collection of products organized by category. Find exactly what you're looking for."})]}),(0,Yp.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:a.map((e,t)=>(0,Yp.jsx)(Oe,{to:`/category/${e.toLowerCase()}`,className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2 border border-gray-100",children:(0,Yp.jsxs)("div",{className:"p-6 text-center",children:[(0,Yp.jsx)("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:i(e)}),(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary-600 transition-colors duration-200 capitalize",children:e.replace("-"," ")}),(0,Yp.jsx)("div",{className:"mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,Yp.jsx)("svg",{className:"w-5 h-5 text-primary-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]})},t))}),(0,Yp.jsx)("div",{className:"text-center mt-12",children:(0,Yp.jsxs)(Oe,{to:"/categories",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Browse All Categories",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})};const _y=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(null),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(1),[d,h]=(0,r.useState)(!0),[f,p]=(0,r.useState)({isOpen:!1,actionType:"favorites"}),[m,g]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[y,v]=(0,r.useState)({isOpen:!1,title:"",message:""}),{currentUser:x}=Jp(),b=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{s(!0);const n=new URLSearchParams({page:e.toString(),page_size:"12"}),r=await fetch(`/api/products/?${n.toString()}`);if(!r.ok)throw new Error("Failed to fetch products");const i=await r.json();t(1===e?i.results||i:e=>[...e,...i.results||i]),void 0!==i.count&&h(null!==i.next),u(e)}catch(n){a(n.message)}finally{s(!1)}},[]),w=(0,r.useCallback)(async()=>{if(x)try{const e=Df(Qp,"users",x.uid,"favorites"),t=(await Mp(e)).docs.map(e=>e.data().productId);l(t)}catch(i){console.error("Error fetching favorites:",i)}},[x]),N=(0,r.useCallback)(async()=>{try{s(!0);const e=await fetch("/api/products/?page=1&page_size=8");if(!e.ok)throw new Error("Failed to fetch featured products");const n=await e.json();t(n.results||n),h(!1)}catch(e){a(e.message)}finally{s(!1)}},[]);(0,r.useEffect)(()=>{N(),x&&w()},[x,N,w]);const E=async e=>{if(x&&!x.isAnonymous)try{const t=Df(Qp,"users",x.uid,"favorites"),n=bp(t,Np("productId","==",e)),r=await Mp(n);if(r.empty)await Bp(t,{productId:e}),l(t=>[...t,e]);else{const t=r.docs[0];await Vp(t.ref),l(t=>t.filter(t=>t!==e))}}catch(i){console.error("Error toggling favorite:",i)}else p({isOpen:!0,actionType:"favorites"})};return n&&0===e.length?(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>(0,Yp.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft animate-pulse",children:[(0,Yp.jsx)("div",{className:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-t-2xl"}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Yp.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})]},t))})}):i?(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsxs)("div",{className:"text-red-500 text-xl mb-4",children:["Error: ",i]}),(0,Yp.jsx)("button",{onClick:()=>N(),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"Try Again"})]})}):(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Yp.jsx)(nm,{isOpen:f.isOpen,onClose:()=>p({isOpen:!1,actionType:"favorites"}),actionType:f.actionType}),(0,Yp.jsx)(em,{isOpen:m.isOpen,onClose:()=>g({isOpen:!1,title:"",message:"",details:""}),title:m.title,message:m.message,details:m.details}),(0,Yp.jsx)(tm,{isOpen:y.isOpen,onClose:()=>v({isOpen:!1,title:"",message:""}),title:y.title,message:y.message}),i&&(0,Yp.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,Yp.jsx)("p",{className:"text-red-800",children:i})}),(0,Yp.jsxs)("div",{className:"text-center mb-12",children:[(0,Yp.jsx)("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"Featured Products"}),(0,Yp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover our handpicked selection of premium products with exceptional quality and competitive prices."})]}),(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,Yp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Yp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Yp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;console.log("Image failed to load:",t.target.src);const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s},onLoad:e=>{console.log("Image loaded successfully:",e.target.src),console.log("Image dimensions:",e.target.naturalWidth,"x",e.target.naturalHeight)},onLoadStart:()=>{console.log("Starting to load image for product:",e.title),console.log("Image URL:",e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`)}}),(0,Yp.jsx)("button",{onClick:()=>E(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(o.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:o.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:o.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Yp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Yp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Yp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Yp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Yp.jsxs)("div",{className:"flex space-x-2",children:[(0,Yp.jsx)(Oe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Yp.jsx)("button",{onClick:()=>(async e=>{if(x)try{const t=Df(Qp,"checkout",x.uid,"items");await Bp(t,{productId:e.id,name:e.title,price:e.price,thumbnail:e.thumbnail,quantity:1,addedAt:new Date}),v({isOpen:!0,title:"Success",message:"Product added to cart successfully! \ud83d\uded2"})}catch(i){console.error("Error adding to cart:",i),g({isOpen:!0,title:"Add to Cart Failed",message:"Failed to add product to cart. Please try again.",details:i.message})}else g({isOpen:!0,title:"Authentication Required",message:"Please log in to add items to your cart.",details:""})})(e),disabled:0===e.stock,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:"Add to Cart"})]})]})]},e.id))}),d&&(0,Yp.jsx)("div",{className:"text-center mt-12",children:(0,Yp.jsx)("button",{onClick:()=>{d&&!n&&b(c+1)},disabled:n,className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,Yp.jsxs)(Yp.Fragment,{children:["Load More Products",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})}),!d&&e.length>0&&(0,Yp.jsx)("div",{className:"text-center mt-12",children:(0,Yp.jsxs)(Oe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200",children:["View All Products",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})},Cy=()=>(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(sm,{}),(0,Yp.jsx)("div",{className:"bg-gray-50",children:(0,Yp.jsx)(jy,{})}),(0,Yp.jsx)("div",{className:"bg-white",children:(0,Yp.jsx)(_y,{})}),(0,Yp.jsx)(im,{})]}),Ty=e=>{let{productId:t,reviews:n=[]}=e;const[s,i]=(0,r.useState)(n),[a,o]=(0,r.useState)({rating:5,comment:""}),[l,c]=(0,r.useState)(!1),{currentUser:u}=Jp();(0,r.useEffect)(()=>{i(n)},[n]);return(0,Yp.jsxs)("div",{className:"mt-8",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reviews"}),u&&(0,Yp.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-medium mb-3",children:"Write a Review"}),(0,Yp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u)try{c(!0);(await fetch(`/api/products/${t}/reviews/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(o({rating:5,comment:""}),window.location.reload()):alert("Failed to submit review")}catch(n){console.error("Error submitting review:",n),alert("Failed to submit review")}finally{c(!1)}else alert("Please log in to submit a review")},children:[(0,Yp.jsxs)("div",{className:"mb-3",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),(0,Yp.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,Yp.jsx)("button",{type:"button",onClick:()=>o({...a,rating:e}),className:"focus:outline-none",children:(0,Yp.jsx)("svg",{className:"w-6 h-6 "+(e<=a.rating?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})]}),(0,Yp.jsxs)("div",{className:"mb-3",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),(0,Yp.jsx)("textarea",{value:a.comment,onChange:e=>o({...a,comment:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",required:!0})]}),(0,Yp.jsx)("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:l?"Submitting...":"Submit Review"})]})]}),(0,Yp.jsx)("div",{className:"space-y-4",children:0===s.length?(0,Yp.jsx)("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review this product!"}):s.map(e=>{return(0,Yp.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsx)("div",{className:"flex",children:(t=e.rating,[...Array(5)].map((e,n)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(n<t?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n)))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,"/5)"]})]}),(0,Yp.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,Yp.jsx)("p",{className:"text-gray-700",children:e.comment}),(0,Yp.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["- ",e.reviewer_name]})]},e.id);var t})})]})};const Iy=function(){const{id:e}=te(),[t,n]=(0,r.useState)(null),[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[l,c]=(0,r.useState)({isOpen:!1,title:"",message:""}),[u,d]=(0,r.useState)({isOpen:!1,actionType:"checkout"}),{currentUser:h}=Jp();(0,r.useEffect)(()=>{fetch(`/api/products/${e}/`).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>n(e)).catch(e=>{console.error("Error fetching the product:",e),o({isOpen:!0,title:"Error Loading Product",message:"Failed to load product details. Please try again.",details:e.message})}),f()},[e]);const f=async()=>{const e=Hp.currentUser;if(e)try{console.log("Loading checkout list for user:",e.uid);const t=Df(Qp,"checkout",e.uid,"items");console.log("Firebase collection path:",`checkout/${e.uid}/items`);const n=(await Mp(t)).docs.map(e=>e.data().productId);i(n)}catch(t){console.error("Error loading checkout list:",t),i([])}},p=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?o({isOpen:!0,title:"Error",message:e,details:""}):c({isOpen:!0,title:"Success",message:e})},m=s.includes(null===t||void 0===t?void 0:t.id);return t?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(nm,{isOpen:u.isOpen,onClose:()=>{d({isOpen:!1,actionType:"checkout"})},actionType:u.actionType}),(0,Yp.jsx)(em,{isOpen:a.isOpen,onClose:()=>{o({isOpen:!1,title:"",message:"",details:""})},title:a.title,message:a.message,details:a.details}),(0,Yp.jsx)(tm,{isOpen:l.isOpen,onClose:()=>{c({isOpen:!1,title:"",message:""})},title:l.title,message:l.message}),(0,Yp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Yp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Yp.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,Yp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Yp.jsx)("div",{children:null!==t&&void 0!==t&&t.images&&Array.isArray(t.images)&&t.images.length>0?(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.images.map((e,n)=>(0,Yp.jsx)("img",{src:e,alt:`${t.title} ${n+1}`,className:"w-full h-64 object-cover rounded-lg shadow-md"},n))}):null!==t&&void 0!==t&&t.thumbnail&&"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"!==t.thumbnail?(0,Yp.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-full max-w-md h-auto rounded-lg shadow-md"}):(0,Yp.jsx)("div",{className:"w-full max-w-md h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,Yp.jsx)("p",{className:"text-gray-500",children:"Image not available"})})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),(0,Yp.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Yp.jsx)("div",{className:"flex items-center mr-2",children:(g=t.rating,[...Array(5)].map((e,t)=>(0,Yp.jsx)("svg",{className:"w-5 h-5 "+(t<Math.floor(g)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),(0,Yp.jsxs)("span",{className:"text-lg text-gray-600",children:["(",t.rating,")"]})]}),(0,Yp.jsx)("div",{className:"mb-6",children:(0,Yp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Yp.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",t.price]}),t.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"text-lg text-gray-500 line-through",children:["$",(t.price/(1-t.discount_percentage/100)).toFixed(2)]}),t.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-2 py-1 rounded",children:["-",t.discount_percentage,"%"]})]})}),(0,Yp.jsx)("div",{className:"mb-6",children:(0,Yp.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+(t.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.stock>0?`${t.stock} in stock`:"Out of stock"})}),(0,Yp.jsx)("div",{className:"space-y-3",children:(0,Yp.jsx)("button",{onClick:m?async()=>{const e=Hp.currentUser;if(e)try{const n=Df(Qp,"checkout",e.uid,"items"),r=(await Mp(n)).docs.find(e=>e.data().productId===t.id);r&&(await Vp(Mf(Qp,"checkout",e.uid,"items",r.id)),i(s.filter(e=>e!==t.id)),p("Removed from checkout list successfully! \u2705"))}catch(n){console.error("Error removing from checkout:",n),p("Failed to remove from checkout list. Please try again.",!0)}}:async()=>{if(!h||h.isAnonymous)return void d({isOpen:!0,actionType:"checkout"});const e=Hp.currentUser;if(e)try{const n=Df(Qp,"checkout",e.uid,"items"),r=t.images&&Array.isArray(t.images)&&t.images.length>0?t.images[0]:"https://via.placeholder.com/150";await Bp(n,{productId:t.id,name:t.title,price:t.price,images:[r],discount:t.discount_percentage,stock:t.stock}),i([...s,t.id]),p("Added to checkout list successfully! \ud83d\uded2")}catch(n){console.error("Error adding to checkout:",n),p("Failed to add to checkout list. Please try again.",!0)}},disabled:0===t.stock,className:`w-full py-3 px-6 rounded-lg font-medium transition-colors ${m?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} ${0===t.stock?"bg-gray-300 cursor-not-allowed":""}`,children:m?"Remove from Checkout":"Add to Checkout"})})]})]})}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Yp.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Yp.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,Yp.jsx)("p",{className:"text-gray-700 leading-relaxed",children:t.description})]}),(0,Yp.jsx)(Ty,{productId:t.id,productTitle:t.title,reviews:t.reviews||[]})]}),(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Details"}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Category"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.category})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Brand"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.brand})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"SKU"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.sku})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Weight"}),(0,Yp.jsxs)("p",{className:"text-gray-900",children:[t.weight,"g"]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Availability"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.availability_status})]})]})]}),(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shipping & Returns"}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Shipping"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.shipping_information})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Return Policy"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.return_policy})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Warranty"}),(0,Yp.jsx)("p",{className:"text-gray-900",children:t.warranty_information})]})]})]})]})]})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,Yp.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:(0,Yp.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Loading..."})})});var g},Ay=()=>{const{category:e}=te(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)([]),{currentUser:l}=Jp();(0,r.useEffect)(()=>{(async()=>{try{if(i(!0),console.log("Loading products for category:",e),console.log("Category type:",typeof e),console.log("Category value:",e),!e)return console.error("Category is undefined or null"),n([]),void i(!1);const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{void 0!==e[n]&&null!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=`${ky}/products/${t.toString()?"?"+t.toString():""}`;console.log("Fetching products from:",n);const r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();return console.log("Products response:",s),s}catch(t){throw console.error("Error fetching products:",t),t}}({category:e});console.log("API response:",t);const r=t.results||t;console.log("Products array:",r),console.log("Products array length:",r.length),n(r)}catch(t){console.error("Error loading products:",t),n([])}finally{i(!1)}})()},[e]);const c=(0,r.useCallback)(async()=>{if(l)try{const e=Df(Qp,"users",l.uid,"favorites"),t=(await Mp(e)).docs.map(e=>e.data().productId);o(t)}catch(e){console.error("Error fetching favorites:",e)}},[l]);(0,r.useEffect)(()=>{l&&c()},[l,c]);return s?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Yp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,Yp.jsxs)("div",{className:"text-center mb-12",children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Yp.jsx)("span",{className:"text-4xl mr-4",children:(e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6"))(e)}),(0,Yp.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900",children:e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),(0,Yp.jsxs)("p",{className:"text-lg text-gray-600",children:["Discover our amazing collection of ",e.replace("-"," ")," products"]}),(0,Yp.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[t.length," product",1!==t.length?"s":""," found"]})]}),t.length>0?(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(e=>(0,Yp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Yp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Yp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Yp.jsx)("button",{onClick:()=>(async e=>{if(l)try{const t=Df(Qp,"users",l.uid,"favorites"),n=bp(t,Np("productId","==",e)),r=await Mp(n);if(r.empty)await Bp(t,{productId:e}),o(t=>[...t,e]);else{const t=r.docs[0];await Vp(t.ref),o(t=>t.filter(t=>t!==e))}}catch(t){console.error("Error toggling favorite:",t)}else alert("Please log in to add favorites")})(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(a.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:a.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:a.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Yp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Yp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Yp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Yp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Yp.jsx)("div",{className:"flex space-x-2",children:(0,Yp.jsx)(Oe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"})})]})]},e.id))}):(0,Yp.jsxs)("div",{className:"text-center py-12",children:[(0,Yp.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",children:(0,Yp.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,Yp.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),(0,Yp.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find any products in this category"}),(0,Yp.jsx)(Oe,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Browse All Products"})]}),(0,Yp.jsx)("div",{className:"text-center mt-12",children:(0,Yp.jsxs)(Oe,{to:"/categories",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors duration-200",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Categories"]})})]}),(0,Yp.jsx)(im,{})]})},Oy=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{s(!0);const e=await Sy();t(e)}catch(e){console.error("Error loading categories:",e),t([])}finally{s(!1)}})()},[]);const i=e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6"),a=e=>({groceries:"Fresh food, beverages, and household essentials",electronics:"Latest gadgets, computers, and smart devices",clothing:"Fashionable apparel for all occasions",beauty:"Cosmetics, skincare, and beauty products","womens-shoes":"Stylish footwear for women","womens-watches":"Elegant timepieces and accessories","womens-jewellery":"Beautiful jewelry and accessories","mens-shoes":"Comfortable and stylish men's footwear","mens-watches":"Sophisticated watches for men","mens-clothing":"Trendy clothing for men","mens-shirts":"Comfortable and stylish men's shirts","home-decoration":"Beautiful decor to enhance your space",furniture:"Quality furniture for every room",lighting:"Illuminate your space with style",automotive:"Car accessories and maintenance products",motorcycle:"Motorcycle gear and accessories",vehicle:"Automotive parts and accessories",sunglasses:"Protect your eyes with style",skincare:"Nourish and protect your skin","skin-care":"Nourish and protect your skin",fragrances:"Luxury perfumes and colognes",laptops:"Powerful computing solutions",smartphones:"Latest mobile technology",tablets:"Portable computing devices",headphones:"Premium audio experiences","mobile-accessories":"Essential mobile device accessories",books:"Knowledge and entertainment",sports:"Equipment for active lifestyles","sports-accessories":"Equipment and gear for sports enthusiasts",toys:"Fun and educational toys",baby:"Everything for your little ones",health:"Wellness and healthcare products",pets:"Care and comfort for your pets","womens-bags":"Stylish bags and purses for women","womens-dresses":"Elegant dresses for every occasion",tops:"Comfortable and trendy tops","kitchen-accessories":"Essential tools for your kitchen"}[e.toLowerCase()]||"Explore amazing products in this category");return n?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Yp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Yp.jsxs)("div",{className:"text-center mb-16",children:[(0,Yp.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gray-900 mb-6",children:"All Categories"}),(0,Yp.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Explore our complete collection of products organized by category. Find exactly what you're looking for with our diverse range of offerings."}),(0,Yp.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[e.length," categories available"]})]}),(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((e,t)=>(0,Yp.jsx)(Oe,{to:`/category/${e.toLowerCase()}`,className:"group bg-white rounded-3xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden",children:(0,Yp.jsxs)("div",{className:"p-8",children:[(0,Yp.jsx)("div",{className:"text-6xl mb-6 group-hover:scale-110 transition-transform duration-200 text-center",children:i(e)}),(0,Yp.jsx)("h3",{className:"text-2xl font-bold text-gray-900 group-hover:text-primary-600 transition-colors duration-200 text-center capitalize mb-4",children:e.replace("-"," ")}),(0,Yp.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a(e)}),(0,Yp.jsx)("div",{className:"flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,Yp.jsxs)("span",{className:"text-primary-600 font-semibold flex items-center",children:["Explore Category",(0,Yp.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})},t))}),(0,Yp.jsx)("div",{className:"text-center mt-16",children:(0,Yp.jsxs)(Oe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Browse all products",(0,Yp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]}),(0,Yp.jsx)(im,{})]})};const Py=function(){const e=(0,r.useRef)(),t=(0,r.useRef)(),{currentUser:n,login:s,googleSignIn:i,facebookSignIn:a,githubSignIn:o,loginAsGuest:l,rememberMe:c,setRememberMe:u}=Jp(),[d,h]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[f,p]=(0,r.useState)({isOpen:!1,title:"",message:""}),[m,g]=(0,r.useState)(!1),y=Z();return n?(0,Yp.jsx)(ge,{to:"/"}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[(0,Yp.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yp.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-400 rounded-full opacity-10 animate-float"}),(0,Yp.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-purple-400 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-pink-400 rounded-full opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-40 right-10 w-24 h-24 bg-yellow-400 rounded-full opacity-10 animate-float",style:{animationDelay:"0.5s"}})]}),(0,Yp.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,Yp.jsxs)("div",{className:"w-full max-w-md",children:[(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("h1",{className:"text-8xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"E-Store"}),(0,Yp.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto mb-6 rounded-full"})]}),(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mb-4 shadow-lg",children:(0,Yp.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Welcome Back! \ud83d\udc4b"}),(0,Yp.jsx)("p",{className:"text-gray-600 text-lg",children:"Sign in to your account and continue your shopping journey"})]}),(0,Yp.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 animate-scale-in",children:[(0,Yp.jsxs)("form",{onSubmit:async function(n){n.preventDefault();try{g(!0),await s(e.current.value,t.current.value,c),p({isOpen:!0,title:"Welcome Back! \ud83c\udf89",message:"Successfully logged in to your account. Ready to explore amazing products!"}),setTimeout(()=>y("/"),1500)}catch(r){let e="Failed to log in",t=r.message;switch(r.code){case Vn.INVALID_LOGIN_CREDENTIALS:e="Invalid login credentials",t="The email address and password you entered do not match. Please try again or create an account.";break;case Vn.USER_NOT_FOUND:e="Account not found",t="No account found with this email address. Please sign up first.";break;case Vn.TOO_MANY_ATTEMPTS_TRY_LATER:e="Too many login attempts",t="Too many failed login attempts. Please try again later.";break;case Vn.USER_DISABLED:e="Account disabled",t="This account has been disabled. Please contact support.";break;case Vn.EMAIL_NOT_VERIFIED:e="Email not verified",t="Please verify your email address before logging in.";break;default:t=r.message}h({isOpen:!0,title:"Oops! \ud83d\ude05",message:e,details:t})}g(!1)},className:"space-y-6",children:[(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Yp.jsx)("input",{ref:e,type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("input",{ref:t,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"})]})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yp.jsxs)("label",{className:"flex items-center",children:[(0,Yp.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,Yp.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),(0,Yp.jsx)(Oe,{to:"/password-reset",className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Forgot password?"})]}),(0,Yp.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:m?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]}),(0,Yp.jsxs)("div",{className:"relative my-6",children:[(0,Yp.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Yp.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Yp.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Yp.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("button",{onClick:async function(){try{g(!0),await i(),p({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with Google! Ready to start shopping!"}),setTimeout(()=>y("/"),1500)}catch(e){h({isOpen:!0,title:"Google Sign-In Error! \ud83d\ude14",message:"Failed to log in with Google",details:e.message})}g(!1)},disabled:m,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Yp.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Yp.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Yp.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Yp.jsxs)("button",{onClick:async function(){try{g(!0),await a(),p({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with Facebook! Ready to start shopping!"}),setTimeout(()=>y("/"),1500)}catch(e){h({isOpen:!0,title:"Facebook Sign-In Error! \ud83d\ude14",message:"Failed to log in with Facebook",details:e.message})}g(!1)},disabled:m,className:"w-full bg-blue-600 border border-blue-600 text-white py-3 px-4 rounded-xl font-medium hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook"]}),(0,Yp.jsxs)("button",{onClick:async function(){try{g(!0),await o(),p({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with GitHub! Ready to start shopping!"}),setTimeout(()=>y("/"),1500)}catch(e){h({isOpen:!0,title:"GitHub Sign-In Error! \ud83d\ude14",message:"Failed to log in with GitHub",details:e.message})}g(!1)},disabled:m,className:"w-full bg-gray-800 border border-gray-800 text-white py-3 px-4 rounded-xl font-medium hover:bg-gray-900 disabled:bg-gray-600 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]}),(0,Yp.jsxs)("button",{onClick:async function(){try{g(!0),await l(),p({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. You can shop and browse products, but some features may be limited."}),setTimeout(()=>y("/"),1500)}catch(e){h({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}g(!1)},disabled:m,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})]}),(0,Yp.jsx)("div",{className:"text-center mt-6",children:(0,Yp.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,Yp.jsx)(Oe,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign up here"})]})})]})]})})]}),(0,Yp.jsx)(em,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,title:"",message:"",details:""}),title:d.title,message:d.message,details:d.details}),(0,Yp.jsx)(tm,{isOpen:f.isOpen,onClose:()=>p({isOpen:!1,title:"",message:""}),title:f.title,message:f.message})]})};const Ry=function(){const e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),s=(0,r.useRef)(),{currentUser:i,signup:a,googleSignIn:o,loginAsGuest:l}=Jp(),[c,u]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[d,h]=(0,r.useState)({isOpen:!1,title:"",message:""}),[f,p]=(0,r.useState)(!1),m=Z();return i?(0,Yp.jsx)(ge,{to:"/"}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 relative overflow-hidden",children:[(0,Yp.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yp.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-purple-400 rounded-full opacity-10 animate-float"}),(0,Yp.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-pink-400 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-orange-400 rounded-full opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-40 right-10 w-24 h-24 bg-yellow-400 rounded-full opacity-10 animate-float",style:{animationDelay:"0.5s"}})]}),(0,Yp.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,Yp.jsxs)("div",{className:"w-full max-w-md",children:[(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("h1",{className:"text-8xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"E-Store"}),(0,Yp.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-600 mx-auto mb-6 rounded-full"})]}),(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mb-4 shadow-lg",children:(0,Yp.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,Yp.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Join Our Community! \ud83d\ude80"}),(0,Yp.jsx)("p",{className:"text-gray-600 text-lg",children:"Create your account and unlock amazing shopping experiences"})]}),(0,Yp.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 animate-scale-in",children:[(0,Yp.jsxs)("form",{onSubmit:async function(r){if(r.preventDefault(),t.current.value===n.current.value){try{p(!0),await a(e.current.value,t.current.value,s.current.value),h({isOpen:!0,title:"Welcome to the Family! \ud83c\udf8a",message:"Your account has been created successfully! Welcome to our amazing store community."}),setTimeout(()=>m("/"),1500)}catch(i){let e="Failed to create an account",t=i.message;switch(i.code){case Vn.EMAIL_EXISTS:e="Email address is already in use",t="This email address is already registered. Please try logging in instead.";break;case Vn.WEAK_PASSWORD:e="Password is too weak",t="Password should be at least 6 characters long.";break;case Vn.INVALID_EMAIL:e="Invalid email address",t="Please enter a valid email address.";break;default:t=i.message}u({isOpen:!0,title:"Account Creation Failed! \ud83d\ude14",message:e,details:t})}p(!1)}else u({isOpen:!0,title:"Password Mismatch! \ud83d\udd10",message:"The passwords you entered do not match. Please try again.",details:""})},className:"space-y-6",children:[(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Yp.jsx)("input",{ref:e,type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("input",{ref:t,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Create a strong password"})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Yp.jsx)("input",{ref:n,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password"})]})]}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Yp.jsxs)("select",{ref:s,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,Yp.jsx)("option",{value:"user",children:"Customer"}),(0,Yp.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,Yp.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 px-4 rounded-xl font-medium hover:from-purple-600 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:f?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),(0,Yp.jsxs)("div",{className:"relative my-6",children:[(0,Yp.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Yp.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Yp.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Yp.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("button",{onClick:async function(){try{p(!0),await o(),h({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with Google! Ready to start shopping!"}),setTimeout(()=>m("/"),1500)}catch(e){u({isOpen:!0,title:"Google Sign-In Error! \ud83d\ude14",message:"Failed to sign up with Google",details:e.message})}p(!1)},disabled:f,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Yp.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Yp.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Yp.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Yp.jsxs)("button",{onClick:async function(){try{p(!0),await l(),h({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. You can shop and browse products, but some features may be limited."}),setTimeout(()=>m("/"),1500)}catch(e){u({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}p(!1)},disabled:f,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})]}),(0,Yp.jsx)("div",{className:"text-center mt-6",children:(0,Yp.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,Yp.jsx)(Oe,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-medium transition-colors",children:"Sign in here"})]})})]})]})})]}),(0,Yp.jsx)(em,{isOpen:c.isOpen,onClose:()=>u({isOpen:!1,title:"",message:"",details:""}),title:c.title,message:c.message,details:c.details}),(0,Yp.jsx)(tm,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,title:"",message:""}),title:d.title,message:d.message})]})};const Ly=function(){const e=(0,r.useRef)(),{resetPassword:t}=Jp(),[n,s]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[i,a]=(0,r.useState)({isOpen:!1,title:"",message:""}),[o,l]=(0,r.useState)(!1),c=Z();return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[(0,Yp.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Yp.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-400 rounded-full opacity-10 animate-float"}),(0,Yp.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-purple-400 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-pink-400 rounded-full opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,Yp.jsx)("div",{className:"absolute bottom-40 right-10 w-24 h-24 bg-yellow-400 rounded-full opacity-10 animate-float",style:{animationDelay:"0.5s"}})]}),(0,Yp.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,Yp.jsxs)("div",{className:"w-full max-w-md",children:[(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("h1",{className:"text-8xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"E-Store"}),(0,Yp.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto mb-6 rounded-full"})]}),(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-orange-500 to-red-600 rounded-full mb-4 shadow-lg",children:(0,Yp.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Yp.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2",children:"Reset Password \ud83d\udd10"}),(0,Yp.jsx)("p",{className:"text-gray-600 text-lg",children:"Enter your email address and we'll send you a link to reset your password"})]}),(0,Yp.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 animate-scale-in",children:[(0,Yp.jsxs)("form",{onSubmit:async function(n){n.preventDefault();try{l(!0),await t(e.current.value),a({isOpen:!0,title:"Reset Email Sent! \ud83d\udce7",message:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."}),setTimeout(()=>c("/login"),3e3)}catch(r){let e="Failed to send reset email",t=r.message;switch(r.code){case Vn.USER_NOT_FOUND:e="Email not found",t="No account found with this email address. Please check the email address or create a new account.";break;case Vn.INVALID_EMAIL:e="Invalid email address",t="Please enter a valid email address.";break;case Vn.TOO_MANY_ATTEMPTS_TRY_LATER:e="Too many attempts",t="Too many failed attempts. Please try again later.";break;default:t=r.message}s({isOpen:!0,title:"Reset Failed! \ud83d\ude14",message:e,details:t})}l(!1)},className:"space-y-6",children:[(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Yp.jsxs)("div",{className:"relative",children:[(0,Yp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Yp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Yp.jsx)("input",{ref:e,type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email address"})]})]}),(0,Yp.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 text-white py-3 px-4 rounded-xl font-medium hover:from-orange-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:o?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Reset Email..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Reset Email"]})})]}),(0,Yp.jsx)("div",{className:"text-center mt-6",children:(0,Yp.jsxs)("p",{className:"text-gray-600",children:["Remember your password?"," ",(0,Yp.jsx)(Oe,{to:"/login",className:"text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"Back to Login"})]})}),(0,Yp.jsx)("div",{className:"mt-6 p-4 bg-orange-50 rounded-lg",children:(0,Yp.jsxs)("div",{className:"flex items-start",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Yp.jsxs)("div",{className:"text-sm text-orange-800",children:[(0,Yp.jsx)("p",{className:"font-medium",children:"Need help?"}),(0,Yp.jsx)("p",{children:"Check your spam folder if you don't receive the email within a few minutes."})]})]})})]})]})})]}),(0,Yp.jsx)(em,{isOpen:n.isOpen,onClose:()=>s({isOpen:!1,title:"",message:"",details:""}),title:n.title,message:n.message,details:n.details}),(0,Yp.jsx)(tm,{isOpen:i.isOpen,onClose:()=>a({isOpen:!1,title:"",message:""}),title:i.title,message:i.message})]})};const Dy=function(){const{currentUser:e}=Jp();return e?(0,Yp.jsx)(ye,{}):(0,Yp.jsx)(ge,{to:"/login"})},My=()=>{const[e,t]=(0,r.useState)({name:"",email:"",subject:"",message:""}),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[o,l]=(0,r.useState)({isOpen:!1,title:"",message:""}),c=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))};return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(em,{isOpen:i.isOpen,onClose:()=>a({...i,isOpen:!1}),title:i.title,message:i.message,details:i.details}),(0,Yp.jsx)(tm,{isOpen:o.isOpen,onClose:()=>l({...o,isOpen:!1}),title:o.title,message:o.message}),(0,Yp.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Contact Us"}),(0,Yp.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),s(!0);try{const n=Hp.currentUser;if(!n)return a({isOpen:!0,title:"Authentication Required",message:"Please log in to send a message.",details:""}),void s(!1);const r={...e,userId:n.uid,timestamp:new Date,status:"unread"};await Bp(Df(Qp,"contactMessages",n.uid,"messages"),r),l({isOpen:!0,title:"Message Sent! \ud83d\udce7",message:"Thank you for your message. We'll get back to you soon!"}),t({name:"",email:"",subject:"",message:""})}catch(r){console.error("Error sending message:",r),a({isOpen:!0,title:"Error Sending Message",message:"Failed to send your message. Please try again.",details:r.message})}finally{s(!1)}},className:"max-w-lg mx-auto",children:[(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{htmlFor:"name",className:"block text-gray-700 font-bold mb-2",children:"Name"}),(0,Yp.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{htmlFor:"email",className:"block text-gray-700 font-bold mb-2",children:"Email"}),(0,Yp.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{htmlFor:"subject",className:"block text-gray-700 font-bold mb-2",children:"Subject"}),(0,Yp.jsx)("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("label",{htmlFor:"message",className:"block text-gray-700 font-bold mb-2",children:"Message"}),(0,Yp.jsx)("textarea",{id:"message",name:"message",rows:"5",value:e.message,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",disabled:n,children:n?"Sending...":"Send Message"})]})]}),(0,Yp.jsx)(im,{})]})};const Uy=function(){return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Yp.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"About Us"}),(0,Yp.jsxs)("div",{className:"max-w-2xl text-center",children:[(0,Yp.jsx)("p",{className:"mb-4 text-lg",children:"Welcome to my E-Commerce Store! We offer a wide variety of high-quality product to meet and satisfy your needs."}),(0,Yp.jsx)("p",{className:"mb-4 text-lg",children:"Our mission is to provide our customers with the best products at affordable prices. We are committed to delivering excellent customer service and ensuring your satisfaction with every purchase."}),(0,Yp.jsx)("p",{className:"mb-4 text-lg",children:"Thank you for choosing E-Commerce Store. If you have any questions or need assistance, please don't hesitate to contact us."})]})]})}),(0,Yp.jsx)(im,{})]})},Fy=e=>{let{onFiltersChange:t,onSortChange:n,onClearFilters:s}=e;const[i,a]=(0,r.useState)({title:"",minPrice:"",maxPrice:"",minRating:"",maxRating:"",brand:"",category:"",inStock:!1,hasDiscount:!1}),[o,l]=(0,r.useState)("id"),[c,u]=(0,r.useState)("desc"),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{y(),v()},[]);const y=async()=>{try{const e=await fetch("/api/categories/");if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching categories:",e)}},v=async()=>{try{p([])}catch(e){console.error("Error fetching brands:",e)}finally{g(!1)}},x=(e,n)=>{const r={...i,[e]:n};a(r),t(r)},b=(e,t)=>{l(e),u(t),n(e,t)};return m?(0,Yp.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,Yp.jsxs)("div",{className:"animate-pulse",children:[(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})}):(0,Yp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Yp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters & Sorting"}),(0,Yp.jsx)("button",{onClick:()=>{a({title:"",minPrice:"",maxPrice:"",minRating:"",maxRating:"",brand:"",category:"",inStock:!1,hasDiscount:!1}),l("id"),u("desc"),s()},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear All"})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Product Title"}),(0,Yp.jsx)("input",{type:"text",value:i.title,onChange:e=>x("title",e.target.value),placeholder:"Search by product title...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Price Range"}),(0,Yp.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Min Price"}),(0,Yp.jsx)("input",{type:"number",value:i.minPrice,onChange:e=>x("minPrice",e.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Price"}),(0,Yp.jsx)("input",{type:"number",value:i.maxPrice,onChange:e=>x("maxPrice",e.target.value),placeholder:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Rating Range"}),(0,Yp.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Min Rating"}),(0,Yp.jsxs)("select",{value:i.minRating,onChange:e=>x("minRating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Yp.jsx)("option",{value:"",children:"Any Rating"}),(0,Yp.jsx)("option",{value:"1",children:"1+ Stars"}),(0,Yp.jsx)("option",{value:"2",children:"2+ Stars"}),(0,Yp.jsx)("option",{value:"3",children:"3+ Stars"}),(0,Yp.jsx)("option",{value:"4",children:"4+ Stars"}),(0,Yp.jsx)("option",{value:"5",children:"5 Stars"})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Rating"}),(0,Yp.jsxs)("select",{value:i.maxRating,onChange:e=>x("maxRating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Yp.jsx)("option",{value:"",children:"Any Rating"}),(0,Yp.jsx)("option",{value:"1",children:"1 Star"}),(0,Yp.jsx)("option",{value:"2",children:"2 Stars"}),(0,Yp.jsx)("option",{value:"3",children:"3 Stars"}),(0,Yp.jsx)("option",{value:"4",children:"4 Stars"}),(0,Yp.jsx)("option",{value:"5",children:"5 Stars"})]})]})]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Category"}),(0,Yp.jsxs)("select",{value:i.category,onChange:e=>x("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Yp.jsx)("option",{value:"",children:"All Categories"}),d.map(e=>(0,Yp.jsx)("option",{value:e,children:e},e))]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Brand"}),(0,Yp.jsxs)("select",{value:i.brand,onChange:e=>x("brand",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Yp.jsx)("option",{value:"",children:"All Brands"}),f.map(e=>(0,Yp.jsx)("option",{value:e,children:e},e))]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Availability"}),(0,Yp.jsxs)("div",{className:"space-y-2",children:[(0,Yp.jsxs)("label",{className:"flex items-center",children:[(0,Yp.jsx)("input",{type:"checkbox",checked:i.inStock,onChange:e=>x("inStock",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Yp.jsx)("span",{className:"text-sm text-gray-700",children:"In Stock Only"})]}),(0,Yp.jsxs)("label",{className:"flex items-center",children:[(0,Yp.jsx)("input",{type:"checkbox",checked:i.hasDiscount,onChange:e=>x("hasDiscount",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Yp.jsx)("span",{className:"text-sm text-gray-700",children:"On Sale Only"})]})]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Sort By"}),(0,Yp.jsxs)("div",{className:"space-y-2",children:[(0,Yp.jsx)("button",{onClick:()=>b("price","asc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("price"===o&&"asc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Price: Low to High"}),(0,Yp.jsx)("button",{onClick:()=>b("price","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("price"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Price: High to Low"}),(0,Yp.jsx)("button",{onClick:()=>b("rating","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("rating"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Highest Rated"}),(0,Yp.jsx)("button",{onClick:()=>b("created_at","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("created_at"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Newest First"}),(0,Yp.jsx)("button",{onClick:()=>b("title","asc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("title"===o&&"asc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Name: A to Z"})]})]})]})},Vy=()=>{const[e]=Le(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(1),[u,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(0),[p,m]=(0,r.useState)({}),[g,y]=(0,r.useState)("id"),[v,x]=(0,r.useState)("desc"),[b,w]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[N,E]=(0,r.useState)({isOpen:!1,title:"",message:""}),{currentUser:k}=Jp(),S=e.get("q")||"",j=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;try{i(!0);const a=new URLSearchParams({page:e.toString(),page_size:"12"});S&&(a.append("search",S),a.append("type","advanced")),t.title&&a.append("title",t.title),t.minPrice&&a.append("min_price",t.minPrice),t.maxPrice&&a.append("max_price",t.maxPrice),t.minRating&&a.append("min_rating",t.minRating),t.maxRating&&a.append("max_rating",t.maxRating),t.category&&a.append("category",t.category),t.brand&&a.append("brand",t.brand),t.inStock&&a.append("in_stock","true"),t.hasDiscount&&a.append("has_discount","true"),a.append("sort",r),a.append("order",s);const o=await fetch(`/api/products/?${a.toString()}`);if(!o.ok)throw new Error("Failed to fetch products");const l=await o.json(),u=l.results||l;n(1===e?u:e=>[...e,...u]),void 0!==l.count?(f(l.count),d(null!==l.next)):(f(u.length),d(!1)),c(e)}catch(a){console.error("Error fetching products:",a)}finally{i(!1)}},[S,p,g,v]),_=(0,r.useCallback)(async()=>{if(k)try{const e=Df(Qp,"users",k.uid,"favorites"),t=(await Mp(e)).docs.map(e=>e.data().productId);o(t)}catch(e){console.error("Error fetching favorites:",e)}},[k]);(0,r.useEffect)(()=>{j(1),k&&_()},[S,j,k,_]);return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(em,{isOpen:b.isOpen,onClose:()=>w({isOpen:!1,title:"",message:"",details:""}),title:b.title,message:b.message,details:b.details}),(0,Yp.jsx)(tm,{isOpen:N.isOpen,onClose:()=>E({isOpen:!1,title:"",message:""}),title:N.title,message:N.message}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Yp.jsx)("div",{className:"container mx-auto px-4",children:(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Yp.jsxs)("div",{className:"mb-8",children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Search Results"}),S&&(0,Yp.jsxs)("p",{className:"text-gray-600",children:['Showing results for "',S,'"']}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,Yp.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",t.length," of ",h," products",u&&` (${h-t.length} more available)`]}),(0,Yp.jsx)("p",{className:"text-sm text-gray-500",children:"Load 12 products at a time"})]})]}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,Yp.jsx)("div",{className:"lg:col-span-1",children:(0,Yp.jsx)(Fy,{onFiltersChange:e=>{m(e),j(1,e,g,v)},onSortChange:(e,t)=>{y(e),x(t),j(1,p,e,t)},onClearFilters:()=>{m({}),y("id"),x("desc"),j(1,{},"id","desc")}})}),(0,Yp.jsx)("div",{className:"lg:col-span-3",children:s&&0===t.length?(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,Yp.jsx)("div",{className:"h-48 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]},t))}):0===t.length?(0,Yp.jsxs)("div",{className:"text-center py-12",children:[(0,Yp.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Yp.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Yp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{return(0,Yp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Yp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Yp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Yp.jsx)("button",{onClick:()=>(async e=>{if(k)try{const t=Df(Qp,"users",k.uid,"favorites");if(a.includes(e)){const n=(await Mp(bp(t,Np("productId","==",e)))).docs[0];n&&(await Vp(n.ref),o(t=>t.filter(t=>t!==e)))}else await Bp(t,{productId:e}),o(t=>[...t,e])}catch(t){console.error("Error toggling favorite:",t)}else alert("Please log in to add favorites")})(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(a.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:a.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:a.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Yp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Yp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Yp.jsx)("div",{className:"flex items-center",children:(t=e.rating,[...Array(5)].map((e,n)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(t)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n)))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Yp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Yp.jsxs)("div",{className:"flex space-x-2",children:[(0,Yp.jsx)(Oe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Yp.jsx)("button",{onClick:()=>(async e=>{if(k)try{const t=Df(Qp,"checkout",k.uid,"items");await Bp(t,{productId:e.id,name:e.title,price:e.price,thumbnail:e.thumbnail,quantity:1,addedAt:new Date}),E({isOpen:!0,title:"Success",message:"Product added to cart successfully! \ud83d\uded2"})}catch(t){console.error("Error adding to cart:",t),w({isOpen:!0,title:"Add to Cart Failed",message:"Failed to add product to cart. Please try again.",details:t.message})}else w({isOpen:!0,title:"Authentication Required",message:"Please log in to add items to your cart.",details:""})})(e),disabled:0===e.stock,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:"Add to Cart"})]})]})]},e.id);var t})}),u&&(0,Yp.jsxs)("div",{className:"text-center mt-8",children:[(0,Yp.jsx)("button",{onClick:()=>j(l+1),disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:s?"Loading...":`Load More (${12*l+1}-${12*(l+1)})`}),(0,Yp.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Click to load the next 12 products"})]})]})})]})]})})}),(0,Yp.jsx)(im,{})]})},By=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)({isOpen:!1,actionType:"favorites"}),{currentUser:c}=Jp(),u=(0,r.useCallback)(()=>c&&!c.isAnonymous,[c]),d=(0,r.useCallback)(async()=>{if(!u())return l({isOpen:!0,actionType:"favorites"}),void s(!1);try{s(!0);const e=Hp.currentUser;if(e){const n=Df(Qp,"users",e.uid,"favorites"),r=(await Mp(n)).docs.map(e=>e.data().productId);if(0===r.length)return t([]),void s(!1);const i=`/api/products/?ids=${r.join(",")}`,a=await fetch(i);if(!a.ok)throw new Error(`Failed to fetch favorite products: ${a.status}`);const o=await a.json(),l=(o.results||o).filter(e=>r.includes(e.id));t(l)}}catch(i){console.error("Error fetching favorites:",i),a("Failed to load favorites")}finally{s(!1)}},[u]);(0,r.useEffect)(()=>{d()},[d]);const h=async e=>{if(c)try{const n=bp(Df(Qp,"users",c.uid,"favorites"),Np("productId","==",e)),r=await Mp(n);if(!r.empty){const n=r.docs[0];await Vp(n.ref),t(t=>t.filter(t=>t.id!==e))}}catch(i){console.error("Error removing product from favorites:",i),alert("Failed to remove from favorites.")}};return n?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Yp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your favorites..."})]})}),(0,Yp.jsx)(im,{})]}):i?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsxs)("div",{className:"text-red-500 text-xl mb-4",children:["Error: ",i]}),i.includes("Please log in")?(0,Yp.jsx)(Oe,{to:"/login",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Go to Login"}):(0,Yp.jsx)("button",{onClick:d,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"Try Again"})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(nm,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,actionType:"favorites"}),actionType:o.actionType}),(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,Yp.jsxs)("div",{className:"text-center mb-12",children:[(0,Yp.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"My Favorites"}),(0,Yp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Your saved products and items you love"})]}),e.length>0?(0,Yp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,Yp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Yp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Yp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Yp.jsx)("button",{onClick:()=>h(e.id),className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-all duration-200",title:"Remove from favorites",children:(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.discount_percentage>0&&(0,Yp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Yp.jsxs)("div",{className:"p-6",children:[(0,Yp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Yp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Yp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Yp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Yp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Yp.jsxs)("div",{className:"flex space-x-2",children:[(0,Yp.jsx)(Oe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Yp.jsx)("button",{onClick:()=>h(e.id),className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors duration-200",children:"Remove"})]})]})]},e.id))}):(0,Yp.jsxs)("div",{className:"text-center py-12",children:[(0,Yp.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",children:(0,Yp.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,Yp.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No favorites yet"}),(0,Yp.jsx)("p",{className:"text-gray-600 mb-6",children:"Start adding products to your favorites to see them here"}),(0,Yp.jsx)(Oe,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Browse Products"})]})]}),(0,Yp.jsx)(im,{})]})};const zy=function(){const{currentUser:e,updateProfile:t,getProfile:n}=Jp(),[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)({isOpen:!1,actionType:"profile"}),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)("personal"),[p,m]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",shippingAddressLine1:"",shippingAddressLine2:"",shippingCity:"",shippingState:"",shippingZip:"",shippingCountry:"US",billingAddressLine1:"",billingAddressLine2:"",billingCity:"",billingState:"",billingZip:"",billingCountry:"US",newEmail:"",confirmPassword:"",currentPassword:"",newPassword:"",confirmNewPassword:""}),g=(0,r.useCallback)(()=>e&&!e.isAnonymous,[e]),y=(0,r.useCallback)(async()=>{if(e){i(!0);try{console.log("Loading profile for user:",e.uid);const t=await n();if(console.log("Profile data loaded:",t),t){m({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||e.email||"",phone:t.phone||"",dateOfBirth:t.dateOfBirth||"",shippingAddressLine1:t.shippingAddressLine1||"",shippingAddressLine2:t.shippingAddressLine2||"",shippingCity:t.shippingCity||"",shippingState:t.shippingState||"",shippingZip:t.shippingZip||"",shippingCountry:t.shippingCountry||"US",billingAddressLine1:t.billingAddressLine1||"",billingAddressLine2:t.billingAddressLine2||"",billingCity:t.billingCity||"",billingState:t.billingState||"",billingZip:t.billingZip||"",billingCountry:t.billingCountry||"US"});const n=t.shippingAddressLine1===t.billingAddressLine1&&t.shippingCity===t.billingCity&&t.shippingState===t.billingState&&t.shippingZip===t.billingZip;d(n),console.log("Profile loaded successfully. Same as billing:",n),o("Profile data loaded successfully!"),setTimeout(()=>o(""),3e3)}else console.log("No profile data found, starting with empty form"),o("No saved profile data found. Fill out the form to create your profile."),setTimeout(()=>o(""),5e3)}catch(t){console.error("Error loading profile:",t),o("Failed to load profile data")}finally{i(!1)}}},[e,n]);(0,r.useEffect)(()=>{g()&&(console.log("Current user:",e),console.log("User UID:",null===e||void 0===e?void 0:e.uid),console.log("User email:",null===e||void 0===e?void 0:e.email),y())},[e,g,y]);const v=(e,t)=>{m(n=>({...n,[e]:t}))},x=(e,t)=>{if(m(n=>({...n,[e]:t})),u){const n=e.replace("billing","shipping");m(e=>({...e,[n]:t}))}};return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(nm,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,actionType:"profile"}),actionType:l.actionType}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Yp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Yp.jsxs)("div",{className:"text-center mb-8",children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Manage your personal information and addresses"})]}),a&&(0,Yp.jsx)("div",{className:"mb-6 p-4 border rounded-lg "+(a.includes("successfully")?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,Yp.jsx)("p",{className:"text-center "+(a.includes("successfully")?"text-green-800":"text-red-800"),children:a})}),s&&(0,Yp.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Yp.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),(0,Yp.jsx)("p",{className:"text-blue-800",children:"Loading profile data..."})]})}),(0,Yp.jsx)("div",{className:"mb-8",children:(0,Yp.jsx)("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[{id:"personal",name:"Personal Information",icon:"\ud83d\udc64"},{id:"shipping",name:"Shipping Address",icon:"\ud83d\udce6"},{id:"billing",name:"Billing Address",icon:"\ud83d\udcb3"},{id:"account",name:"Account Settings",icon:"\u2699\ufe0f"}].map(e=>(0,Yp.jsxs)("button",{onClick:()=>f(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm "+(h===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Yp.jsx)("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})}),(0,Yp.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),i(!0);try{await t({...p,sameAsBilling:u,updatedAt:(new Date).toISOString()}),o("Profile updated successfully!"),setTimeout(()=>o(""),3e3)}catch(n){o("Failed to update profile"),console.error("Error updating profile:",n)}i(!1)},className:"bg-white shadow-lg rounded-lg p-8",children:["personal"===h&&(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Personal Information"}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,Yp.jsx)("input",{type:"text",id:"firstName",value:p.firstName,onChange:e=>v("firstName",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,Yp.jsx)("input",{type:"text",id:"lastName",value:p.lastName,onChange:e=>v("lastName",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,Yp.jsx)("input",{type:"email",id:"email",value:p.email,onChange:e=>v("email",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,Yp.jsx)("input",{type:"tel",id:"phone",value:p.phone,onChange:e=>v("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,Yp.jsx)("input",{type:"date",id:"dateOfBirth",value:p.dateOfBirth,onChange:e=>v("dateOfBirth",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),"shipping"===h&&(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Shipping Address"}),(0,Yp.jsxs)("div",{className:"space-y-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-address-line1",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1 *"}),(0,Yp.jsx)("input",{type:"text",id:"shipping-address-line1",value:p.shippingAddressLine1,onChange:e=>v("shippingAddressLine1",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-address-line2",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 2"}),(0,Yp.jsx)("input",{type:"text",id:"shipping-address-line2",value:p.shippingAddressLine2,onChange:e=>v("shippingAddressLine2",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,Yp.jsx)("input",{type:"text",id:"shipping-city",value:p.shippingCity,onChange:e=>v("shippingCity",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-state",className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),(0,Yp.jsx)("input",{type:"text",id:"shipping-state",value:p.shippingState,onChange:e=>v("shippingState",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-zip",className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal/Zip Code *"}),(0,Yp.jsx)("input",{type:"text",id:"shipping-zip",value:p.shippingZip,onChange:e=>v("shippingZip",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"shipping-country",className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,Yp.jsxs)("select",{id:"shipping-country",value:p.shippingCountry,onChange:e=>v("shippingCountry",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Yp.jsx)("option",{value:"US",children:"United States"}),(0,Yp.jsx)("option",{value:"CA",children:"Canada"}),(0,Yp.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,Yp.jsx)("option",{value:"AU",children:"Australia"})]})]})]})]}),"billing"===h&&(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Billing Address"}),(0,Yp.jsxs)("div",{className:"space-y-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-address-line1",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1 *"}),(0,Yp.jsx)("input",{type:"text",id:"billing-address-line1",value:p.billingAddressLine1,onChange:e=>x("billingAddressLine1",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-address-line2",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 2"}),(0,Yp.jsx)("input",{type:"text",id:"billing-address-line2",value:p.billingAddressLine2,onChange:e=>x("billingAddressLine2",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,Yp.jsx)("input",{type:"text",id:"billing-city",value:p.billingCity,onChange:e=>x("billingCity",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-state",className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),(0,Yp.jsx)("input",{type:"text",id:"billing-state",value:p.billingState,onChange:e=>x("billingState",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-zip",className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal/Zip Code *"}),(0,Yp.jsx)("input",{type:"text",id:"billing-zip",value:p.billingZip,onChange:e=>x("billingZip",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"billing-country",className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,Yp.jsxs)("select",{id:"billing-country",value:p.billingCountry,onChange:e=>x("billingCountry",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Yp.jsx)("option",{value:"US",children:"United States"}),(0,Yp.jsx)("option",{value:"CA",children:"Canada"}),(0,Yp.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,Yp.jsx)("option",{value:"AU",children:"Australia"})]})]})]}),(0,Yp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Yp.jsxs)("label",{className:"flex items-center",children:[(0,Yp.jsx)("input",{type:"checkbox",checked:u,onChange:e=>{return t=e.target.checked,d(t),void(t&&m(e=>({...e,shippingAddressLine1:e.billingAddressLine1,shippingAddressLine2:e.billingAddressLine2,shippingCity:e.billingCity,shippingState:e.billingState,shippingZip:e.billingZip,shippingCountry:e.billingCountry})));var t},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,Yp.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Use same address for shipping and billing"})]}),(0,Yp.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"When checked, your shipping address will automatically match your billing address"})]})]}),"account"===h&&(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Account Settings"}),(0,Yp.jsxs)("div",{className:"space-y-6",children:[(0,Yp.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Account Information"}),(0,Yp.jsxs)("p",{className:"text-sm text-blue-700",children:["Email: ",(null===e||void 0===e?void 0:e.email)||"Not available"]}),(0,Yp.jsxs)("p",{className:"text-sm text-blue-700",children:["Account Type: ",null!==e&&void 0!==e&&e.isAnonymous?"Guest":"Registered User"]})]}),!(null!==e&&void 0!==e&&e.isAnonymous)&&(0,Yp.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-medium text-green-900 mb-3",children:"Change Email Address"}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"newEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Email Address"}),(0,Yp.jsx)("input",{type:"email",id:"newEmail",value:p.newEmail||"",onChange:e=>v("newEmail",e.target.value),placeholder:"Enter new email address",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,Yp.jsx)("input",{type:"password",id:"confirmPassword",value:p.confirmPassword||"",onChange:e=>v("confirmPassword",e.target.value),placeholder:"Enter current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),(0,Yp.jsx)("button",{type:"button",onClick:async()=>{if(p.newEmail&&p.confirmPassword)if(p.newEmail!==e.email){i(!0);try{await Fs(Hp,e.email,p.confirmPassword),await function(e,t){const n=at(e);return xn(n.auth.app)?Promise.reject(Wn(n.auth)):zs(n,t,null)}(Hp.currentUser,p.newEmail),await t({email:p.newEmail,updatedAt:(new Date).toISOString()}),m(e=>({...e,newEmail:"",confirmPassword:""})),o("Email address updated successfully!"),setTimeout(()=>o(""),3e3)}catch(n){console.error("Error updating email:",n),"auth/wrong-password"===n.code?o("Current password is incorrect"):"auth/email-already-in-use"===n.code?o("Email address is already in use"):"auth/invalid-email"===n.code?o("Invalid email address"):o("Failed to update email address")}i(!1)}else o("New email must be different from current email");else o("Please fill in all required fields")},disabled:s,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:s?"Updating...":"Update Email Address"})]})]}),!(null!==e&&void 0!==e&&e.isAnonymous)&&(0,Yp.jsxs)("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-medium text-purple-900 mb-3",children:"Reset Password"}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,Yp.jsx)("input",{type:"password",id:"currentPassword",value:p.currentPassword||"",onChange:e=>v("currentPassword",e.target.value),placeholder:"Enter current password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,Yp.jsx)("input",{type:"password",id:"newPassword",value:p.newPassword||"",onChange:e=>v("newPassword",e.target.value),placeholder:"Enter new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,Yp.jsx)("input",{type:"password",id:"confirmNewPassword",value:p.confirmNewPassword||"",onChange:e=>v("confirmNewPassword",e.target.value),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Yp.jsx)("button",{type:"button",onClick:async()=>{if(p.currentPassword&&p.newPassword&&p.confirmNewPassword)if(p.newPassword===p.confirmNewPassword)if(p.newPassword.length<6)o("Password must be at least 6 characters long");else{i(!0);try{await Fs(Hp,e.email,p.currentPassword),await(t=Hp.currentUser,n=p.newPassword,zs(at(t),null,n)),m(e=>({...e,currentPassword:"",newPassword:"",confirmNewPassword:""})),o("Password updated successfully!"),setTimeout(()=>o(""),3e3)}catch(r){console.error("Error updating password:",r),"auth/wrong-password"===r.code?o("Current password is incorrect"):"auth/weak-password"===r.code?o("Password is too weak"):o("Failed to update password")}var t,n;i(!1)}else o("New passwords do not match");else o("Please fill in all required fields")},disabled:s,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md font-medium hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:s?"Updating...":"Reset Password"})]})]}),(0,Yp.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"Privacy & Security"}),(0,Yp.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"Your personal information is securely stored and will only be used for order processing and customer service."}),(0,Yp.jsx)("button",{type:"button",className:"text-sm text-yellow-800 underline hover:no-underline",children:"View Privacy Policy"})]})]})]}),(0,Yp.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,Yp.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-md font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:s?"Saving...":"Save Changes"})})]})]})}),(0,Yp.jsx)(im,{})]})},qy=()=>(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Yp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Yp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Admin Functions"}),(0,Yp.jsxs)("div",{className:"flex flex-col space-y-6 items-center",children:[(0,Yp.jsx)(Oe,{to:"/product-crud",className:"bg-gray-700 hover:bg-gray-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Product Control"}),(0,Yp.jsx)(Oe,{to:"/review-moderation",className:"bg-blue-600 hover:bg-blue-500 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Review Moderation / Server Status"})]})]})}),(0,Yp.jsx)(im,{})]}),$y=()=>(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Yp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Yp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Product Control"}),(0,Yp.jsxs)("div",{className:"flex flex-col space-y-6 items-center",children:[(0,Yp.jsx)(Oe,{to:"/add-product",className:"bg-blue-500 hover:bg-blue-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Add Product"}),(0,Yp.jsx)(Oe,{to:"/update-product",className:"bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Update Product"}),(0,Yp.jsx)(Oe,{to:"/delete-product",className:"bg-red-500 hover:bg-red-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Delete Product"})]})]})}),(0,Yp.jsx)(im,{})]}),Hy=()=>{const[e,t]=(0,r.useState)({title:"",description:"",category:"",price:"",discount_percentage:"",rating:"",stock:"",brand:"",sku:"",weight:"",warranty_information:"",shipping_information:"",availability_status:"",return_policy:"",minimum_order_quantity:"",thumbnail:"",images:{},dimensions:{width:"",height:"",depth:""}}),n=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))};return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"p-6 bg-gray-900 text-white min-h-screen flex justify-center items-center",children:(0,Yp.jsxs)("div",{className:"container max-w-lg mx-auto bg-gray-800 p-6 rounded shadow-lg",children:[(0,Yp.jsx)(Oe,{to:"/product-crud",className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 text-center mb-6 block",children:"Back to Product Control"}),(0,Yp.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center text-white",children:"Add Product"}),(0,Yp.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r={...e,title:e.title||"N/A",description:e.description||"N/A",category:e.category||"N/A",price:e.price||0,discount_percentage:e.discount_percentage||0,rating:e.rating||0,stock:e.stock||0,brand:e.brand||"N/A",sku:e.sku||"N/A",weight:e.weight||0,warranty_information:e.warranty_information||"N/A",shipping_information:e.shipping_information||"N/A",availability_status:e.availability_status||"N/A",return_policy:e.return_policy||"N/A",minimum_order_quantity:e.minimum_order_quantity||1,thumbnail:e.thumbnail||"https://via.placeholder.com/150",images:e.images||{},dimensions:{width:e.dimensions.width||0,height:e.dimensions.height||0,depth:e.dimensions.depth||0}};try{await(async e=>{try{console.log("Product Data Sent:",e);const t=await Ey.post(`${ky}/products/`,e);return console.log("Response from Server:",t.data),t.data}catch(t){throw t.response?console.error("Error Response from Server:",t.response.data):console.error("Error adding product:",t.message),t}})(r),t({title:"",description:"",category:"",price:"",discount_percentage:"",rating:"",stock:"",brand:"",sku:"",weight:"",warranty_information:"",shipping_information:"",availability_status:"",return_policy:"",minimum_order_quantity:"",thumbnail:"",images:{},dimensions:{width:"",height:"",depth:""}}),alert("Product added successfully")}catch(s){console.error("Error adding product:",s)}},className:"space-y-4",children:[Object.keys(e).map(t=>"reviews"!==t&&"dimensions"!==t&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:t.replace(/_/g," ").toUpperCase()}),(0,Yp.jsx)("input",{type:"text",name:t,value:e[t],onChange:n,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",style:{transition:"width 0.4s ease-in-out",minWidth:"150px",maxWidth:"100%"}})]},t)),(0,Yp.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"Dimensions"}),Object.keys(e.dimensions).map(n=>(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:n.replace(/_/g," ").toUpperCase()}),(0,Yp.jsx)("input",{type:"text",name:n,value:e.dimensions[n],onChange:e=>t(t=>({...t,dimensions:{...t.dimensions,[n]:e.target.value}})),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",style:{transition:"width 0.4s ease-in-out",minWidth:"150px",maxWidth:"100%"}})]},n)),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300 ease-in-out",children:"Add Product"})]})]})}),(0,Yp.jsx)(im,{})]})},Wy="http://localhost:3000/api",Ky=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(""),[i,a]=(0,r.useState)("id"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)("");return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen flex flex-col items-center py-12",children:(0,Yp.jsxs)("div",{className:"w-full max-w-lg bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,Yp.jsx)(Oe,{to:"/product-crud",className:"block bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full text-center mb-6 font-semibold transition duration-300 ease-in-out",children:"Back to Product Control"}),(0,Yp.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center text-white",children:"Delete Product"}),(0,Yp.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{let t;if("id"===i?t=await Ey.get(`${Wy}/products/${e}/`):"title"===i&&(t=await Ey.get(`${Wy}/products/`,{params:{search:n,type:"regular"}})),t.data){const e="id"===i?t.data:t.data[0];l(e),h(e.id),u(!1)}else u(!0),l(null)}catch(r){console.error("Error fetching product:",r),l(null),u(!0)}},className:"bg-gray-700 p-6 rounded shadow-md mb-6",children:[(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Search By"}),(0,Yp.jsxs)("select",{value:i,onChange:e=>a(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Yp.jsx)("option",{value:"id",children:"Product ID"}),(0,Yp.jsx)("option",{value:"title",children:"Product Title"})]})]}),"id"===i&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Product ID"}),(0,Yp.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),"title"===i&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Product Title"}),(0,Yp.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 rounded-full hover:bg-green-600 transition duration-300 ease-in-out",children:"Search Product"})]}),c&&(0,Yp.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md text-center mb-6",children:[(0,Yp.jsx)("strong",{className:"font-bold",children:"Product not found!"}),(0,Yp.jsx)("span",{className:"block",children:"Please search for a valid product ID or title."})]}),o&&(0,Yp.jsxs)("div",{className:"bg-gray-700 p-6 rounded-lg shadow-md text-white",children:[(0,Yp.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Product to be Deleted"}),(0,Yp.jsxs)("p",{className:"mb-2",children:[(0,Yp.jsx)("strong",{children:"Product ID:"})," ",o.id]}),(0,Yp.jsxs)("p",{className:"mb-2",children:[(0,Yp.jsx)("strong",{children:"Title:"})," ",o.title]}),(0,Yp.jsxs)("p",{className:"mb-2",children:[(0,Yp.jsx)("strong",{children:"Description:"})," ",o.description]}),(0,Yp.jsxs)("p",{className:"mb-2",children:[(0,Yp.jsx)("strong",{children:"Category:"})," ",o.category]}),(0,Yp.jsxs)("p",{className:"mb-4",children:[(0,Yp.jsx)("strong",{children:"Price:"})," $",o.price]}),(0,Yp.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),d)try{await Ey.delete(`${Wy}/products/${d}`),h(""),alert("Product deleted successfully"),l(null)}catch(t){console.error("Error deleting product:",t)}else alert("Please select a product to delete.")},children:(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white py-2 rounded-full hover:bg-red-600 transition duration-300 ease-in-out",disabled:!o,children:"Delete Product"})})]})]})}),(0,Yp.jsx)(im,{})]})},Gy="http://localhost:3000/api",Qy=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(""),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)("id"),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)({}),f=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r})),h(e=>({...e,[n]:r}))},p=e=>{const{name:n,value:r}=e.target;t(e=>({...e,dimensions:{...e.dimensions,[n]:r}})),h(e=>({...e,dimensions:{...e.dimensions,[n]:r}}))},m=async n=>{const r=e.reviews[n].id,s=e.id;try{await((e,t)=>Ey.delete(`${ky}/products/${e}/reviews/${t}`))(s,r),t(e=>{const t=[...e.reviews];return t.splice(n,1),{...e,reviews:t}}),alert("Review removed successfully")}catch(i){console.error("Error removing review:",i)}};return(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen py-12",children:(0,Yp.jsxs)("div",{className:"container mx-auto px-6",children:[(0,Yp.jsx)(Oe,{to:"/product-crud",className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded mb-6 inline-block",children:"Back to Product Control"}),(0,Yp.jsx)("h2",{className:"text-3xl font-bold text-center mb-10",children:"Update Product"}),(0,Yp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{let e;"id"===o?e=await Ey.get(`${Gy}/products/${n}/`):"title"===o&&(e=await Ey.get(`${Gy}/products/`,{params:{search:i,type:"regular"}})),e.data?(t("id"===o?e.data:e.data[0]),u(!1)):(u(!0),t(null))}catch(r){console.error("Error fetching product:",r),t(null),u(!0)}},className:"bg-gray-800 p-6 rounded shadow-lg mb-6 mx-auto max-w-xl text-left",children:[(0,Yp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Search Product"}),(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Search By"}),(0,Yp.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",children:[(0,Yp.jsx)("option",{value:"id",children:"Product ID"}),(0,Yp.jsx)("option",{value:"title",children:"Product Title"})]})]}),"id"===o&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Product ID"}),(0,Yp.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",required:!0})]}),"title"===o&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Product Title"}),(0,Yp.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",required:!0})]}),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Search Product"})]}),c&&(0,Yp.jsxs)("div",{className:"bg-red-800 border border-red-600 text-red-100 px-4 py-3 rounded relative mb-6",children:[(0,Yp.jsx)("strong",{children:"Product not found!"})," Please search for a valid product ID or title."]}),e&&(0,Yp.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{const n={...d};await(async(e,t)=>{try{return(await Ey.patch(`${ky}/products/${e}/`,t)).data}catch(n){throw console.error("Error updating product:",n),n}})(e.id,n),t(null),h({}),alert("Product updated successfully")}catch(r){console.error("Error updating product with PATCH:",r)}},className:"bg-gray-800 p-6 rounded shadow-lg mx-auto max-w-xl text-left",children:[(0,Yp.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Edit Product Information"}),Object.keys(e).map(t=>"reviews"!==t&&"dimensions"!==t&&(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:t.replace(/_/g," ").toUpperCase()}),(0,Yp.jsx)("input",{type:"text",name:t,value:e[t],onChange:f,className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},t)),(0,Yp.jsx)("h3",{className:"text-xl font-semibold mt-8 mb-4",children:"Dimensions"}),e.dimensions&&Object.keys(e.dimensions).map(t=>(0,Yp.jsxs)("div",{className:"mb-4",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:t.replace(/_/g," ").toUpperCase()}),(0,Yp.jsx)("input",{type:"text",name:t,value:e.dimensions[t],onChange:p,className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},t)),(0,Yp.jsx)("button",{type:"submit",className:"w-full bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600 mt-6",children:"Update Product"})]}),(null===e||void 0===e?void 0:e.reviews)&&(0,Yp.jsxs)("div",{className:"bg-gray-800 p-6 rounded shadow-lg mx-auto max-w-xl mt-6",children:[(0,Yp.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Reviews"}),e.reviews.map((e,n)=>(0,Yp.jsxs)("div",{className:"mb-6 p-4 border border-gray-600 rounded-md",children:[(0,Yp.jsxs)("h4",{className:"text-lg font-semibold mb-2",children:["Review ",n+1]}),Object.keys(e).map(r=>(0,Yp.jsxs)("div",{className:"mb-2",children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:r.replace(/_/g," ").toUpperCase()}),(0,Yp.jsx)("input",{type:"text",name:r,value:e[r],onChange:e=>((e,n)=>{const{name:r,value:s}=e.target;t(e=>{const t=[...e.reviews];return t[n]={...t[n],[r]:s},{...e,reviews:t}})})(e,n),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},r)),(0,Yp.jsx)("button",{onClick:()=>m(n),className:"w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 mt-2",children:"Remove Review"})]},n)),(0,Yp.jsx)("button",{onClick:()=>{t(e=>({...e,reviews:[...e.reviews,{rating:"",comment:"",reviewer_name:"",reviewer_email:""}]}))},className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 mt-2",children:"Add Review"})]})]})}),(0,Yp.jsx)(im,{})]})};var Yy,Xy=n(393),Jy="basil",Zy="https://js.stripe.com",ev="".concat(Zy,"/").concat(Jy,"/stripe.js"),tv=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,nv=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,rv="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",sv=function(e){return tv.test(e)||nv.test(e)},iv=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(ev).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},av=null,ov=null,lv=null,cv=function(e){return null!==av?av:(av=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(rv),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Zy,'"]')),t=0;t<e.length;t++){var n=e[t];if(sv(n.src))return n}return null}();if(r&&e)console.warn(rv);else if(r){if(r&&null!==lv&&null!==ov){var s;r.removeEventListener("load",lv),r.removeEventListener("error",ov),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=iv(e)}}else r=iv(e);lv=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),ov=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",lv),r.addEventListener("error",ov)}catch(i){return void n(i)}else t(null)})).catch(function(e){return av=null,Promise.reject(e)})},uv=!1,dv=function(){return Yy||(Yy=cv(null).catch(function(e){return Yy=null,Promise.reject(e)}))};Promise.resolve().then(function(){return dv()}).catch(function(e){uv||console.warn(e)});var hv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];uv=!0;var r=Date.now();return dv().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version),i=Jy;r&&s!==i&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("7.7.0"," expected Stripe.js@").concat(i,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.7.0",startTime:t})}(a,n),a}(e,t,r)})};const fv=hv("pk_test_51Rq3nxEBsuDDBb3nE6FcyBweQ9znL4kMt52sY8pcGQEm5Ec4Mp0Z3RRSkLxKFu7yONrsgsPYBSRPFdrqjBEE9jnS002n6tqSRR");const pv=new class{constructor(){this.stripe=null,this.initializeStripe()}async initializeStripe(){try{if(!fv)return console.warn("Stripe publishable key not found. Payment functionality will be disabled."),void(this.stripe=null);this.stripe=await fv}catch(e){console.error("Failed to initialize Stripe:",e),this.stripe=null}}async createPaymentIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd";try{const n=await fetch("/api/create-payment-intent/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(100*e),currency:t})});if(!n.ok)throw new Error("Failed to create payment intent");return(await n.json()).client_secret}catch(n){throw console.error("Error creating payment intent:",n),n}}async processPayment(e,t,n){try{if(!this.stripe)throw new Error("Payment processing is not available. Please check your Stripe configuration.");const r=await this.createPaymentIntent(t),{error:s,paymentIntent:i}=await this.stripe.confirmCardPayment(r,{payment_method:e});if(s)throw new Error(s.message);if("succeeded"===i.status)return await this.createOrder(n,i.id),{success:!0,paymentIntent:i};throw new Error("Payment failed")}catch(r){throw console.error("Payment processing error:",r),r}}async createOrder(e,t){try{const n=Hp.currentUser;if(!n)throw new Error("User not authenticated");const r=Df(Qp,"users",n.uid,"orders"),s=await Bp(r,{...e,paymentIntentId:t,status:"confirmed",orderDate:Wa.now(),updatedAt:Wa.now()});return await this.sendOrderConfirmationEmail(s.id,e),s.id}catch(n){throw console.error("Error creating order:",n),n}}async sendOrderConfirmationEmail(e,t){try{var n;(await fetch("/api/send-order-confirmation/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,orderData:t,userEmail:null===(n=Hp.currentUser)||void 0===n?void 0:n.email})})).ok||console.warn("Failed to send order confirmation email")}catch(r){console.error("Error sending order confirmation email:",r)}}validateBillingInfo(e){const t=[];return(!e.line1||e.line1.trim().length<5)&&t.push("Billing address line 1 is required and must be at least 5 characters"),(!e.city||e.city.trim().length<2)&&t.push("City is required and must be at least 2 characters"),(!e.state||e.state.trim().length<2)&&t.push("State/Province is required and must be at least 2 characters"),e.zip&&/^\d{5}(-\d{4})?$/.test(e.zip)||t.push("Valid ZIP/Postal code is required"),t}validateShippingInfo(e){const t=[];return(!e.line1||e.line1.trim().length<5)&&t.push("Shipping address line 1 is required and must be at least 5 characters"),(!e.city||e.city.trim().length<2)&&t.push("City is required and must be at least 2 characters"),(!e.state||e.state.trim().length<2)&&t.push("State/Province is required and must be at least 2 characters"),e.zip&&/^\d{5}(-\d{4})?$/.test(e.zip)||t.push("Valid ZIP/Postal code is required"),t}async getOrderTracking(e){try{const t=Hp.currentUser;if(!t)throw new Error("User not authenticated");const n=Mf(Qp,"users",t.uid,"orders",e),r=await Lp(n);if(!r.exists())throw new Error("Order not found");return r.data()}catch(t){throw console.error("Error getting order tracking:",t),t}}async updateOrderStatus(e,t){try{const n=Hp.currentUser;if(!n)throw new Error("User not authenticated");const r=Mf(Qp,"users",n.uid,"orders",e);await Fp(r,{status:t,updatedAt:Wa.now()})}catch(n){throw console.error("Error updating order status:",n),n}}},mv=e=>{let{amount:t,orderData:n,onPaymentSuccess:s,onPaymentError:i,onValidationError:a}=e;const o=(0,Xy.useStripe)(),l=(0,Xy.useElements)(),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1);return(0,Yp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border-t-4 border-purple-500",children:[(0,Yp.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-purple-600",children:"Payment Information"}),d&&(0,Yp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,Yp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o&&l){u(!0),h(null);try{const e=pv.validateBillingInfo(n.billingInfo),r=pv.validateShippingInfo(n.shippingInfo);if(e.length>0||r.length>0){const t=[...e,...r];return a(t),void u(!1)}const{error:c,paymentMethod:d}=await o.createPaymentMethod({type:"card",card:l.getElement(Xy.CardElement)});if(c)return h(c.message),i(c.message),void u(!1);p(!0);const f=await pv.processPayment(d.id,t,n);if(!f.success)throw new Error("Payment failed");s(f.paymentIntent)}catch(d){console.error("Payment error:",d),h(d.message),i(d.message)}finally{u(!1),p(!1)}}},className:"space-y-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Information"}),(0,Yp.jsx)("div",{className:"border border-gray-300 rounded-lg p-3",children:(0,Yp.jsx)(Xy.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),(0,Yp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Yp.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Total"}),(0,Yp.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:["$",t.toFixed(2)]}),(0,Yp.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Your payment will be processed securely through Stripe"})]}),(0,Yp.jsx)("button",{type:"submit",disabled:!o||c||f,className:"w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white py-3 px-6 rounded-lg font-semibold shadow-md transition duration-300 ease-in-out disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed hover:from-purple-600 hover:to-blue-700",children:c?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):f?(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Confirming Payment..."]}):(0,Yp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v1"})}),"Pay $",t.toFixed(2)]})})]}),(0,Yp.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[(0,Yp.jsx)("p",{children:"\ud83d\udd12 Your payment information is encrypted and secure"}),(0,Yp.jsx)("p",{children:"Powered by Stripe"})]})]})},gv=hv("pk_test_51Rq3nxEBsuDDBb3nE6FcyBweQ9znL4kMt52sY8pcGQEm5Ec4Mp0Z3RRSkLxKFu7yONrsgsPYBSRPFdrqjBEE9jnS002n6tqSRR"),yv=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({line1:"",line2:"",city:"",state:"",zip:""}),[i,a]=(0,r.useState)({line1:"",line2:"",city:"",state:"",zip:""}),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)({isOpen:!1,actionType:"checkout"}),[x,b]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[w,N]=(0,r.useState)({isOpen:!1,title:"",message:""}),{currentUser:E,fetchBillingAndShippingInfo:k}=Jp(),S=()=>E&&!E.isAnonymous;(0,r.useEffect)(()=>{if(!S())return v({isOpen:!0,actionType:"checkout"}),void p(!1);(async()=>{try{const e=await k();e&&(s({line1:e.billingAddressLine1||"",line2:e.billingAddressLine2||"",city:e.billingCity||"",state:e.billingState||"",zip:e.billingZip||""}),a({line1:e.shippingAddressLine1||"",line2:e.shippingAddressLine2||"",city:e.shippingCity||"",state:e.shippingState||"",zip:e.shippingZip||""}))}catch(m){console.error("Error fetching billing and shipping info:",m),g("There was an error loading profile information.")}})(),(async()=>{const e=Hp.currentUser;if(e)try{const n=Df(Qp,"checkout",e.uid,"items"),r=(await Mp(n)).docs.map(e=>({id:e.id,...e.data()}));t(r)}catch(m){console.error("Error loading cart:",m),g("Failed to load cart items.")}})(),p(!1)},[E,S,k]);const j=()=>e.reduce((e,t)=>e+(parseFloat(t.price)||0)*(t.quantity||1),0),_=j(),C=.13*_,T=_+C-0;return f?(0,Yp.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,Yp.jsxs)("div",{className:"text-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 border-t-transparent mx-auto"}),(0,Yp.jsx)("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading your checkout..."})]})}):c?(0,Yp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-16",children:(0,Yp.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-center",children:[(0,Yp.jsxs)("div",{className:"mb-8",children:[(0,Yp.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Yp.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Yp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Thank you for your purchase. Your order has been successfully placed."})]}),(0,Yp.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Details"}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("p",{className:"text-sm text-gray-600",children:"Order ID"}),(0,Yp.jsx)("p",{className:"font-medium text-gray-900",children:d})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("p",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,Yp.jsxs)("p",{className:"font-medium text-gray-900",children:["$",T.toFixed(2)]})]})]})]}),(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsx)("button",{onClick:()=>window.location.href="/home",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:bg-blue-700 transition-all duration-200 shadow-lg",children:"Continue Shopping"}),(0,Yp.jsx)("button",{onClick:()=>window.location.href="/orders",className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-200",children:"View Order History"})]})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)(em,{isOpen:x.isOpen,onClose:()=>b({isOpen:!1,title:"",message:"",details:""}),title:x.title,message:x.message,details:x.details}),(0,Yp.jsx)(tm,{isOpen:w.isOpen,onClose:()=>N({isOpen:!1,title:"",message:""}),title:w.title,message:w.message}),(0,Yp.jsx)(nm,{isOpen:y.isOpen,onClose:()=>v({isOpen:!1,actionType:"checkout"}),actionType:y.actionType}),(0,Yp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,Yp.jsx)("div",{className:"mb-8",children:(0,Yp.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,Yp.jsxs)("div",{className:"flex items-center "+(o?"text-blue-600":"text-gray-400"),children:[(0,Yp.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(o?"bg-blue-600 text-white":"bg-gray-200"),children:(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,Yp.jsx)("span",{className:"ml-2 font-medium",children:"Review Order"})]}),(0,Yp.jsx)("div",{className:"w-16 h-1 bg-gray-200 rounded-full",children:(0,Yp.jsx)("div",{className:"h-1 bg-blue-600 rounded-full transition-all duration-500 "+(o?"w-full":"w-0")})}),(0,Yp.jsxs)("div",{className:"flex items-center "+(o?"text-blue-600":"text-gray-400"),children:[(0,Yp.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(o?"bg-blue-600 text-white":"bg-gray-200"),children:o?(0,Yp.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,Yp.jsx)("span",{className:"text-sm font-bold",children:"2"})}),(0,Yp.jsx)("span",{className:"ml-2 font-medium",children:"Payment"})]})]})}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Yp.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[m&&(0,Yp.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 mb-6",children:(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,Yp.jsx)("p",{className:"text-red-800",children:m})]})}),(0,Yp.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 border-t-4 border-green-500",children:[(0,Yp.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Yp.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-4",children:(0,Yp.jsxs)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Shipping Address"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Your delivery information"})]})]}),i.line1?(0,Yp.jsxs)("div",{className:"space-y-3",children:[(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{className:"text-gray-600",children:"Address Line 1:"}),(0,Yp.jsx)("span",{className:"font-medium",children:i.line1})]}),i.line2&&(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{className:"text-gray-600",children:"Address Line 2:"}),(0,Yp.jsx)("span",{className:"font-medium",children:i.line2})]}),(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{className:"text-gray-600",children:"City:"}),(0,Yp.jsx)("span",{className:"font-medium",children:i.city})]}),(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{className:"text-gray-600",children:"State/Province:"}),(0,Yp.jsx)("span",{className:"font-medium",children:i.state})]}),(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{className:"text-gray-600",children:"Postal/Zip Code:"}),(0,Yp.jsx)("span",{className:"font-medium",children:i.zip})]})]}):(0,Yp.jsxs)("div",{className:"text-center py-8",children:[(0,Yp.jsxs)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Yp.jsx)("p",{className:"text-gray-500 mb-4",children:"No shipping information found"}),(0,Yp.jsx)("button",{onClick:()=>window.location.href="/profile",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Shipping Info"})]})]}),o?gv?(0,Yp.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 border-t-4 border-blue-500",children:[(0,Yp.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Yp.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:(0,Yp.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Payment Information"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Complete your purchase securely"})]})]}),(0,Yp.jsx)(Xy.Elements,{stripe:gv,children:(0,Yp.jsx)(mv,{amount:parseFloat(T),orderData:{cartItems:e,billingInfo:n,shippingInfo:i,totalAmount:j(),orderDate:(new Date).toISOString()},onPaymentSuccess:async e=>{try{await(async()=>{const e=Hp.currentUser;if(e){const t=Df(Qp,"checkout",e.uid,"items"),n=(await Mp(t)).docs.map(t=>Vp(Mf(Qp,"checkout",e.uid,"items",t.id)));await Promise.all(n)}})(),u(!0),h(e.id),localStorage.removeItem("cart")}catch(m){console.error("Error after payment success:",m),g("Payment was successful but there was an error clearing your cart.")}},onPaymentError:e=>{g(`Payment failed: ${e}`)},onValidationError:e=>{g(e.join(". "))}})})]}):(0,Yp.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("svg",{className:"w-6 h-6 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Payment Processing Unavailable"}),(0,Yp.jsx)("p",{className:"text-red-600",children:"Please check your Stripe configuration."})]})]})}):(0,Yp.jsx)("button",{onClick:()=>{if(g(""),0===e.length)return void g("Your cart is empty. Please add items to your cart before proceeding.");const t=n&&/\w/.test(n.line1),r=i&&/\w/.test(i.line1);t&&r?l(!0):g("Both billing and shipping information are required before proceeding to payment.")},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-8 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-200",children:"Proceed to Payment"})]}),(0,Yp.jsx)("div",{className:"lg:col-span-1",children:(0,Yp.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-8 border-t-4 border-yellow-500 sticky top-8",children:[(0,Yp.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Yp.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-4",children:(0,Yp.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Order Summary"}),(0,Yp.jsxs)("p",{className:"text-gray-600",children:[e.length," item",1!==e.length?"s":""]})]})]}),e.length>0?(0,Yp.jsx)("div",{className:"space-y-4 mb-6",children:e.map((n,r)=>(0,Yp.jsx)("div",{className:"bg-gray-50 rounded-2xl p-4 hover:bg-gray-100 transition-colors",children:(0,Yp.jsx)("div",{className:"flex items-start justify-between",children:(0,Yp.jsxs)("div",{className:"flex-1",children:[(0,Yp.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Yp.jsxs)("span",{className:"font-bold text-gray-500 mr-2",children:[r+1,"."]}),(0,Yp.jsx)("h4",{className:"font-semibold text-gray-900 line-clamp-2",children:n.name||n.title})]}),(0,Yp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Yp.jsx)("button",{onClick:()=>(async n=>{const r=e.map(e=>{if(e.id===n&&e.quantity>1){const t=e.quantity-1;return Fp(Mf(Qp,"checkout",Hp.currentUser.uid,"items",n),{quantity:t}),{...e,quantity:t}}return e});t(r)})(n.id),className:"w-8 h-8 bg-white rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Yp.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,Yp.jsx)("span",{className:"font-bold text-lg min-w-[2rem] text-center",children:n.quantity||1}),(0,Yp.jsx)("button",{onClick:()=>(async n=>{const r=e.map(e=>{if(e.id===n){const t=Math.min((e.quantity||1)+1,e.stock);return t!==e.quantity&&Fp(Mf(Qp,"checkout",Hp.currentUser.uid,"items",n),{quantity:t}),{...e,quantity:t}}return e});t(r)})(n.id),className:"w-8 h-8 bg-white rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Yp.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,Yp.jsxs)("div",{className:"text-right",children:[(0,Yp.jsxs)("div",{className:"font-bold text-lg text-gray-900",children:["$",n.price]}),(0,Yp.jsx)("button",{onClick:()=>(async n=>{const r=Hp.currentUser;if(r)try{await Vp(Mf(Qp,"checkout",r.uid,"items",n)),t(e.filter(e=>e.id!==n))}catch(m){console.error("Error removing item from checkout:",m)}})(n.id),className:"text-red-500 text-sm hover:text-red-700 transition-colors",children:"Remove"})]})]})]})})},n.id))}):(0,Yp.jsxs)("div",{className:"text-center py-8",children:[(0,Yp.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),(0,Yp.jsx)("p",{className:"text-gray-500 mb-4",children:"Your cart is empty"}),(0,Yp.jsx)("button",{onClick:()=>window.location.href="/home",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]}),e.length>0&&(0,Yp.jsxs)("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[(0,Yp.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,Yp.jsx)("span",{children:"Subtotal:"}),(0,Yp.jsxs)("span",{className:"font-semibold",children:["$",_.toFixed(2)]})]}),(0,Yp.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,Yp.jsxs)("span",{children:["Discount (",0,"%):"]}),(0,Yp.jsxs)("span",{className:"font-semibold text-green-600",children:["-$",(0).toFixed(2)]})]}),(0,Yp.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,Yp.jsx)("span",{children:"Tax (13%):"}),(0,Yp.jsxs)("span",{className:"font-semibold",children:["$",C.toFixed(2)]})]}),(0,Yp.jsxs)("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-4 border-t border-gray-200",children:[(0,Yp.jsx)("span",{children:"Total:"}),(0,Yp.jsxs)("span",{className:"text-blue-600",children:["$",T.toFixed(2)]})]})]})]})})]})]}),(0,Yp.jsx)(im,{})]})},vv=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)({isOpen:!1,title:"",message:"",details:""}),[o,l]=(0,r.useState)({isOpen:!1,title:"",message:""}),[c,u]=(0,r.useState)("Checking..."),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),{currentUser:m,role:g}=Jp();console.log("ReviewModeration - currentUser:",m),console.log("ReviewModeration - role:",g);(0,r.useEffect)(()=>{""!==g&&p(!0)},[g]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{v(),y()},1e3);return()=>clearTimeout(e)},[]);const y=async()=>{try{h(!0);const e=await fetch("https://e-commerce-6zf9.onrender.com/server-status/");if(e.ok){const t=await e.json();u(t.status)}else u("Error: Unable to fetch server status")}catch(e){u("Error: Unable to fetch server status")}finally{h(!1)}},v=async()=>{try{s(!0);const e=await fetch("/api/reviews/pending/");if(!e.ok)throw new Error("Failed to fetch pending reviews");{const n=await e.json();t(n)}}catch(e){console.error("Error fetching pending reviews:",e),a({isOpen:!0,title:"Error Loading Reviews",message:"Failed to load pending reviews. Please try again.",details:e.message})}finally{s(!1)}},x=async(e,n)=>{try{const r=await fetch(`/api/reviews/${e}/moderate/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n})});if(r.ok)l({isOpen:!0,title:"Review Moderated",message:`Review ${n} successfully`}),t(t=>t.filter(t=>t.id!==e));else{const e=await r.json();a({isOpen:!0,title:"Error Moderating Review",message:"Failed to moderate review. Please try again.",details:e.detail||e.message||"Unknown error"})}}catch(r){console.error("Error moderating review:",r),a({isOpen:!0,title:"Network Error",message:"Failed to moderate review due to a network error. Please try again.",details:r.message})}};return n?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Yp.jsx)("div",{className:"container mx-auto px-4",children:(0,Yp.jsxs)("div",{className:"animate-pulse",children:[(0,Yp.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Yp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})})}),(0,Yp.jsx)(im,{})]}):f?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(()=>{const e=m&&"admin"===g;return console.log("ReviewModeration - isAdmin check:",e,"currentUser:",!!m,"role:",g),e})()?(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Yp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Yp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Yp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Yp.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Server Status"}),(0,Yp.jsx)("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center",children:d?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Yp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Yp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Status"]})})]}),(0,Yp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Yp.jsx)("div",{className:"w-3 h-3 rounded-full "+("ok"===c?"bg-green-500":"bg-red-500")}),(0,Yp.jsx)("span",{className:"text-gray-700 font-medium",children:"ok"===c?"Server is running normally":c})]}),(0,Yp.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Last checked: ",(new Date).toLocaleTimeString()]})]}),(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Yp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Yp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Review Moderation"}),(0,Yp.jsxs)("div",{className:"text-sm text-gray-600",children:[e.length," pending review",1!==e.length?"s":""]})]}),(0,Yp.jsx)(em,{isOpen:i.isOpen,onClose:()=>a({isOpen:!1,title:"",message:"",details:""}),title:i.title,message:i.message,details:i.details}),(0,Yp.jsx)(tm,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,title:"",message:""}),title:o.title,message:o.message}),0===e.length?(0,Yp.jsxs)("div",{className:"text-center py-12",children:[(0,Yp.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Yp.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Yp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Reviews"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"All reviews have been moderated."})]}):(0,Yp.jsx)("div",{className:"space-y-6",children:e.map(e=>{return(0,Yp.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,Yp.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Yp.jsx)("div",{className:"flex",children:(n=e.rating,[...Array(5)].map((e,t)=>(0,Yp.jsx)("svg",{className:"w-4 h-4 "+(t<n?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Yp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),(0,Yp.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,"/5)"]})]}),(0,Yp.jsx)("h3",{className:"font-medium text-gray-900",children:e.reviewer_name}),(0,Yp.jsx)("p",{className:"text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,Yp.jsxs)("div",{className:"flex space-x-2",children:[(0,Yp.jsx)("button",{onClick:()=>x(e.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Approve"}),(0,Yp.jsx)("button",{onClick:()=>x(e.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Reject"})]})]}),(0,Yp.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Yp.jsx)("p",{className:"text-gray-700",children:e.comment})})]},e.id);var t,n})})]})]})})}):(0,Yp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Yp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Yp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Access Denied"}),(0,Yp.jsx)("p",{className:"text-xl mb-8",children:"You don't have permission to access this page."}),(0,Yp.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Debug info: Role = ",g,", User = ",null===m||void 0===m?void 0:m.email]})]})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Yp.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Loading admin permissions..."})]})}),(0,Yp.jsx)(im,{})]})},xv=e=>{var t,n,s,i,a,o,l,c,u,d;let{orderId:h}=e;const[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{h&&(async()=>{try{g(!0);const e=await pv.getOrderTracking(h);p(e)}catch(y){v(y.message)}finally{g(!1)}})()},[h]);return m?(0,Yp.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):y?(0,Yp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:y}):f?(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Yp.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Order Tracking"}),(0,Yp.jsx)("div",{className:"flex items-center space-x-2",children:(0,Yp.jsx)("span",{className:`px-3 py-1 rounded-full text-white text-sm font-medium ${(e=>{switch(e){case"confirmed":return"bg-green-500";case"processing":return"bg-blue-500";case"shipped":return"bg-purple-500";case"delivered":return"bg-green-600";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}})(f.status)}`,children:(e=>{switch(e){case"confirmed":return"Order Confirmed";case"processing":return"Processing";case"shipped":return"Shipped";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return"Unknown"}})(f.status)})})]}),(0,Yp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Order Information"}),(0,Yp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Yp.jsxs)("p",{children:[(0,Yp.jsx)("span",{className:"font-medium",children:"Order ID:"})," ",h]}),(0,Yp.jsxs)("p",{children:[(0,Yp.jsx)("span",{className:"font-medium",children:"Order Date:"})," ",new Date(f.orderDate).toLocaleDateString()]}),(0,Yp.jsxs)("p",{children:[(0,Yp.jsx)("span",{className:"font-medium",children:"Payment Status:"}),(0,Yp.jsx)("span",{className:"text-green-600 font-medium ml-1",children:"Paid"})]}),f.paymentIntentId&&(0,Yp.jsxs)("p",{children:[(0,Yp.jsx)("span",{className:"font-medium",children:"Payment ID:"})," ",f.paymentIntentId]})]})]}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Shipping Address"}),(0,Yp.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Yp.jsx)("p",{children:null===(t=f.shippingInfo)||void 0===t?void 0:t.line1}),(null===(n=f.shippingInfo)||void 0===n?void 0:n.line2)&&(0,Yp.jsx)("p",{children:f.shippingInfo.line2}),(0,Yp.jsxs)("p",{children:[null===(s=f.shippingInfo)||void 0===s?void 0:s.city,", ",null===(i=f.shippingInfo)||void 0===i?void 0:i.state," ",null===(a=f.shippingInfo)||void 0===a?void 0:a.zip]})]})]})]}),(0,Yp.jsxs)("div",{className:"mb-6",children:[(0,Yp.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"Order Items"}),(0,Yp.jsx)("div",{className:"space-y-3",children:null===(o=f.cartItems)||void 0===o?void 0:o.map((e,t)=>(0,Yp.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Yp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Yp.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,Yp.jsx)("span",{className:"text-gray-600 font-medium",children:t+1})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,Yp.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]})]}),(0,Yp.jsxs)("div",{className:"text-right",children:[(0,Yp.jsxs)("p",{className:"font-semibold text-gray-800",children:["$",e.price]}),e.discount&&(0,Yp.jsxs)("p",{className:"text-sm text-green-600",children:["-",e.discount,"% off"]})]})]},t))})]}),(0,Yp.jsxs)("div",{className:"border-t pt-4",children:[(0,Yp.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"Order Summary"}),(0,Yp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{children:"Subtotal:"}),(0,Yp.jsxs)("span",{children:["$",null===(l=f.totalAmount)||void 0===l?void 0:l.subtotal]})]}),(null===(c=f.totalAmount)||void 0===c?void 0:c.discountTotal)>0&&(0,Yp.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,Yp.jsx)("span",{children:"Discount:"}),(0,Yp.jsxs)("span",{children:["-$",f.totalAmount.discountTotal]})]}),(0,Yp.jsxs)("div",{className:"flex justify-between",children:[(0,Yp.jsx)("span",{children:"Tax:"}),(0,Yp.jsxs)("span",{children:["$",null===(u=f.totalAmount)||void 0===u?void 0:u.tax]})]}),(0,Yp.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,Yp.jsx)("span",{children:"Total:"}),(0,Yp.jsxs)("span",{children:["$",null===(d=f.totalAmount)||void 0===d?void 0:d.total]})]})]})]}),"shipped"===f.status&&(0,Yp.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("p",{className:"font-medium text-blue-800",children:"Estimated Delivery"}),(0,Yp.jsx)("p",{className:"text-sm text-blue-600",children:"Your order is on its way! Expected delivery in 3-5 business days."})]})]})}),(0,Yp.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,Yp.jsxs)("div",{className:"flex items-center",children:[(0,Yp.jsx)("svg",{className:"w-5 h-5 text-gray-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Yp.jsxs)("div",{children:[(0,Yp.jsx)("p",{className:"font-medium text-gray-800",children:"Need Help?"}),(0,Yp.jsx)("p",{className:"text-sm text-gray-600",children:"If you have any questions about your order, please contact our support team."})]})]})})]}):(0,Yp.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:"Order not found"})},bv=()=>{const{currentUser:e}=Jp(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(e)try{i(!0);const t=bp(Df(Qp,"users",e.uid,"orders"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=gp("orderBy",e);return kp._create(n,t)}("orderDate","desc")),r=(await Mp(t)).docs.map(e=>({id:e.id,...e.data()}));n(r)}catch(l){console.error("Error fetching orders:",l),c("Failed to load order history")}finally{i(!1)}})()},[e]);const u=e=>{switch(e){case"confirmed":return"bg-green-500";case"processing":return"bg-blue-500";case"shipped":return"bg-purple-500";case"delivered":return"bg-green-600";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},d=e=>{switch(e){case"confirmed":return"Order Confirmed";case"processing":return"Processing";case"shipped":return"Shipped";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return"Unknown"}},h=e=>e.totalAmount?parseFloat(e.totalAmount.total||0):0;return s?(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Yp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),(0,Yp.jsx)(im,{})]}):(0,Yp.jsxs)(Yp.Fragment,{children:[(0,Yp.jsx)(rm,{}),(0,Yp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Yp.jsx)("div",{className:"container mx-auto px-4",children:(0,Yp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Yp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order History"}),l&&(0,Yp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:l}),0===t.length?(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Yp.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Yp.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,Yp.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Orders Yet"}),(0,Yp.jsx)("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet. Start shopping to see your order history here."}),(0,Yp.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Start Shopping"})]}):(0,Yp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Yp.jsxs)("div",{className:"lg:col-span-1",children:[(0,Yp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Your Orders"}),(0,Yp.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n,r;return(0,Yp.jsxs)("div",{onClick:()=>o(e),className:"bg-white rounded-lg shadow-md p-4 cursor-pointer transition-all hover:shadow-lg "+((null===a||void 0===a?void 0:a.id)===e.id?"ring-2 ring-blue-500":""),children:[(0,Yp.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Yp.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Order #",e.id.slice(-8)]}),(0,Yp.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${u(e.status)}`,children:d(e.status)})]}),(0,Yp.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:(r=e.orderDate,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,Yp.jsxs)("p",{className:"font-semibold text-gray-800",children:["$",h(e).toFixed(2)]}),(0,Yp.jsxs)("p",{className:"text-sm text-gray-600",children:[(null===(t=e.cartItems)||void 0===t?void 0:t.length)||0," item",1!==(null===(n=e.cartItems)||void 0===n?void 0:n.length)?"s":""]})]},e.id)})})]}),(0,Yp.jsx)("div",{className:"lg:col-span-2",children:a?(0,Yp.jsx)(xv,{orderId:a.id}):(0,Yp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Yp.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Yp.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Yp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Yp.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Select an Order"}),(0,Yp.jsx)("p",{className:"text-gray-600",children:"Click on an order from the list to view its details and tracking information."})]})})]})]})})}),(0,Yp.jsx)(im,{})]})};const wv=function(){return(0,Yp.jsx)("div",{className:"App",children:(0,Yp.jsxs)(be,{children:[(0,Yp.jsx)(ve,{path:"/login",element:(0,Yp.jsx)(Py,{})}),(0,Yp.jsx)(ve,{path:"/signup",element:(0,Yp.jsx)(Ry,{})}),(0,Yp.jsx)(ve,{path:"/password-reset",element:(0,Yp.jsx)(Ly,{})}),(0,Yp.jsx)(ve,{path:"/category/:category",element:(0,Yp.jsx)(Ay,{})}),(0,Yp.jsx)(ve,{path:"/categories",element:(0,Yp.jsx)(Oy,{})}),(0,Yp.jsx)(ve,{path:"/products/:id",element:(0,Yp.jsx)(Iy,{})}),(0,Yp.jsxs)(ve,{path:"/",element:(0,Yp.jsx)(Dy,{}),children:[(0,Yp.jsx)(ve,{index:!0,element:(0,Yp.jsx)(ge,{to:"/home"})}),(0,Yp.jsx)(ve,{path:"/home",element:(0,Yp.jsx)(Cy,{})}),(0,Yp.jsx)(ve,{path:"/contact",element:(0,Yp.jsx)(My,{})}),(0,Yp.jsx)(ve,{path:"/profile",element:(0,Yp.jsx)(zy,{})}),(0,Yp.jsx)(ve,{path:"/about",element:(0,Yp.jsx)(Uy,{})}),(0,Yp.jsx)(ve,{path:"/search",element:(0,Yp.jsx)(Vy,{})}),(0,Yp.jsx)(ve,{path:"/admin",element:(0,Yp.jsx)(qy,{})}),(0,Yp.jsx)(ve,{path:"/product-crud",element:(0,Yp.jsx)($y,{})}),(0,Yp.jsx)(ve,{path:"/add-product",element:(0,Yp.jsx)(Hy,{})}),(0,Yp.jsx)(ve,{path:"/delete-product",element:(0,Yp.jsx)(Ky,{})}),(0,Yp.jsx)(ve,{path:"/update-product",element:(0,Yp.jsx)(Qy,{})}),(0,Yp.jsx)(ve,{path:"/favorites",element:(0,Yp.jsx)(By,{})}),(0,Yp.jsx)(ve,{path:"/checkout",element:(0,Yp.jsx)(yv,{})}),(0,Yp.jsx)(ve,{path:"/review-moderation",element:(0,Yp.jsx)(vv,{})}),(0,Yp.jsx)(ve,{path:"/orders",element:(0,Yp.jsx)(bv,{})})]})]})})};(0,i.H)(document.getElementById("root")).render((0,Yp.jsx)(Te,{children:(0,Yp.jsx)(Zp,{children:(0,Yp.jsx)(wv,{})})}))})()})();
//# sourceMappingURL=main.17618496.js.map