/*! For license information please see main.729555b7.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!E.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+j(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+j(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+j(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,O(N);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,k=null,S=-1,C=5,j=-1;function T(){return!(t.unstable_now()-j<C)}function I(){if(null!==k){var e=t.unstable_now();j=e;var n=!0;try{n=k(!0,e)}finally{n?_():(E=!1,k=null)}}else E=!1}if("function"===typeof b)_=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=I,_=function(){R.postMessage(null)}}else _=function(){y(I,0)};function O(e){k=e,E||(E=!0,_())}function P(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,P(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,O(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,M=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case N:return"Portal";case k:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ma){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,_e=null,Ee=null;function ke(e){if(e=bs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function je(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return je(e,t,n)}finally{Ie=!1,(null!==_e||null!==Ee)&&(Te(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Oe=!1}function Le(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){De=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){De=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===r)return qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Ye=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,_t,Et,kt,St=!1,Ct=[],jt=null,Tt=null,It=null,At=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==jt&&Ft(jt)&&(jt=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&zt(jt,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var $t=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Wt(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Kt(e,t,n,r){if(qt){var s=Qt(e,t,n,r);if(null===s)qr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return jt=Dt(jt,e,t,n,r,s),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,s),!0;case"mouseover":return It=Dt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Dt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Dt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Yt?Yt.value:Yt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return En}var Sn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Sn),jn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),On=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Pn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(xs(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ir(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function kr(e){if(_r[e])return _r[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Sr=kr("animationend"),Cr=kr("animationiteration"),jr=kr("animationstart"),Tr=kr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Pr=Ar[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(jr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),De){if(!De)throw Error(i(198));var u=Me;De=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Sr:case Cr:case jr:l=yn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if(Yn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Yt=s)?Yt.value:Yt.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Re(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Re(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=Re(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],_s=-1;function Es(e){return{current:e}}function ks(e){0>_s||(e.current=Ns[_s],Ns[_s]=null,_s--)}function Ss(e,t){_s++,Ns[_s]=e.current,e.current=t}var Cs={},js=Es(Cs),Ts=Es(!1),Is=Cs;function As(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Os(){ks(Ts),ks(js)}function Ps(e,t,n){if(js.current!==Cs)throw Error(i(168));Ss(js,t),Ss(Ts,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return M({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Is=js.current,Ss(js,e),Ss(Ts,Ts.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ls(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,ks(Ts),ks(js),Ss(js,e)):ks(Ts),Ss(Ts,n)}var Fs=null,Us=!1,Vs=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Bs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Ze,Bs),s}finally{bt=t,Vs=!1}}return null}var $s=[],qs=0,Hs=null,Ws=0,Ks=[],Gs=0,Qs=null,Xs=1,Ys="";function Js(e,t){$s[qs++]=Ws,$s[qs++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Ks[Gs++]=Xs,Ks[Gs++]=Ys,Ks[Gs++]=Qs,Qs=e;var r=Xs;e=Ys;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xs=1<<32-at(t)+s|n<<s|r,Ys=i+e}else Xs=1<<i|n<<s|r,Ys=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=$s[--qs],$s[qs]=null,Ws=$s[--qs],$s[qs]=null;for(;e===Qs;)Qs=Ks[--Gs],Ks[Gs]=null,Ys=Ks[--Gs],Ks[Gs]=null,Xs=Ks[--Gs],Ks[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Xs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Dc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case R:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),si&&Js(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return si&&Js(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((i=Dc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return o(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(L(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Fc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),Ni=Es(null),_i=null,Ei=null,ki=null;function Si(){ki=Ei=_i=null}function Ci(e){var t=Ni.current;ks(Ni),e._currentValue=t}function ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){_i=e,ki=Ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Ei){if(null===_i)throw Error(i(308));Ei=e,_i.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var Ai=null;function Ri(e){null===Ai?Ai=[e]:Ai.push(e)}function Oi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ri(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ri(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pi(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var qi={},Hi=Es(qi),Wi=Es(qi),Ki=Es(qi);function Gi(e){if(e===qi)throw Error(i(174));return e}function Qi(e,t){switch(Ss(Ki,t),Ss(Wi,e),Ss(Hi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Hi),Ss(Hi,t)}function Xi(){ks(Hi),ks(Wi),ks(Ki)}function Yi(e){Gi(Ki.current);var t=Gi(Hi.current),n=le(t,e.type);t!==n&&(Ss(Wi,e),Ss(Hi,n))}function Ji(e){Wi.current===e&&(ks(Hi),ks(Wi))}var Zi=Es(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Za:eo,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=to,e=n(r,s)}while(ua)}if(ra.current=Ja,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ya(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ml|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Na(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function Ea(e,t){var n=aa,r=ba(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,xo=!0),r=r.queue,Da(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,Sa.bind(null,n,r,s,t),void 0,null),null===Il)throw Error(i(349));0!==(30&ia)||ka(n,t,s)}return s}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,ja(t)&&Ta(e)}function Ca(e,t,n){return n(function(){ja(t)&&Ta(e)})}function ja(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Pi(e,1);null!==t&&rc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function Oa(e,t,n,r){var s=va();aa.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=ba();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}aa.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function La(e,t){return Oa(8390656,8,e,t)}function Da(e,t){return Pa(2048,8,e,t)}function Ma(e,t){return Pa(4,2,e,t)}function Fa(e,t){return Pa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ua.bind(null,t,e),n)}function za(){}function Ba(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Wa(){return ba().memoizedState}function Ka(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Xa(t,n);else if(null!==(n=Oi(e,t,n,r))){rc(n,e,r,tc()),Ya(n,t,r)}}function Ga(e,t,n){var r=nc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ri(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Oi(e,t,s,r))&&(rc(n,e,r,s=tc()),Ya(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=va();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Il)throw Error(i(349));0!==(30&ia)||ka(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(si){var n=Ys;t=":"+t+"R"+(n=(Xs&~(1<<32-at(Xs)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:Da,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:$a,useReducer:wa,useRef:Ra,useState:function(){return wa(xa)},useDebugValue:za,useDeferredValue:function(e){return qa(ba(),oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1},to={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:Da,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:$a,useReducer:Na,useRef:Ra,useState:function(){return Na(xa)},useDebugValue:za,useDeferredValue:function(e){var t=ba();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[Na(xa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(rc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(rc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(rc(t,e,r,n),Vi(t,e,r))}};function io(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function ao(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Rs(t)?Is:js.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Rs(t)?Is:js.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ro(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),Bi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),ho(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ho(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=x.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function No(e,t,n,r,s){n=n.render;var i=t.ref;return Ti(t,s),r=ga(e,t,n,r,i,s),n=ya(),null===e||xo?(si&&n&&ei(t),t.flags|=1,wo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,r,s)}function ko(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Pl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Pl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ss(Pl,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ss(Pl,Ol),Ol|=r;return wo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var i=Rs(n)?Is:js.current;return i=As(t,i),Ti(t,s),n=ga(e,t,n,r,i,s),r=ya(),null===e||xo?(si&&r&&ei(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function jo(e,t,n,r,s){if(Rs(n)){var i=!0;Ds(t)}else i=!1;if(Ti(t,s),null===t.stateNode)qo(e,t),ao(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=As(t,c=Rs(n)?Is:js.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Li=!1;var h=t.memoizedState;a.state=h,Bi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ts.current||Li?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Li||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=As(t,l=Rs(n)?Is:js.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Li=!1,h=t.memoizedState,a.state=h,Bi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Ts.current||Li?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Li||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,s)}function To(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Ho(e,t,i);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):wo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Qi(e,t.containerInfo)}function Ao(e,t,n,r,s){return fi(),pi(s),t.flags|=256,wo(e,t,n,r),t.child}var Ro,Oo,Po,Lo,Do={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ss(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,s,0,null),e=Dc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Do,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Mc({mode:"visible",children:r.children},s,0,null),(a=Dc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Il)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Pi(e,s),rc(r,e,s,-1))}return gc(),Vo(e,t,o,r=uo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Gs++]=Xs,Ks[Gs++]=Ys,Ks[Gs++]=Qs,Xs=e.id,Ys=e.overflow,Qs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,s}return e=(o=e.child).sibling,s=Pc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ji(e.return,t,n)}function Bo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $o(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ss(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Rs(t.type)&&Os(),Ko(t),null;case 3:return r=t.stateNode,Xi(),ks(Ts),ks(js),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Oo(e,t),Ko(t),null;case 5:Ji(t);var s=Gi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ko(t),null}if(e=Gi(Hi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Ur(Lr[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Ur(Lr[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":X(e,r),s=Q(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi(Ki.current),Gi(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(ks(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ii&&(oc(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Xi(),Oo(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ci(t.type._context),Ko(t),null;case 19:if(ks(Zi),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>$l&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ko(t),null}else 2*Ye()-a.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Zi.current,Ss(Zi,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Rs(t.type)&&Os(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),ks(Ts),ks(js),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(ks(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(Zi),null;case 4:return Xi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gi(Hi.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&tl(t,n,i)}s=s.next}while(s!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||el(n,t);case 6:var r=dl,s=hl;dl=null,fl(e,t,n),hl=s,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),s=s.next}while(s!==r)}fl(e,t,n);break;case 1:if(!Yo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,fl(e,t,n),Yo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,o,s),dl=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),sl(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Ye())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,gl(t,e),Yo=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Nl(h);continue}}null!==p?(p.return=f,Zo=p):Nl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var c=Yo;if(Xo=a,(Yo=l)&&!c)for(Zo=s;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Zo=l):_l(s);for(;null!==i;)Zo=i,xl(i,t,n),i=i.sibling;Zo=s,Xo=o,Yo=c}wl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Zo=i):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$i(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Nl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var i=t.return;try{il(t)}catch(l){kc(t,i,l)}break;case 5:var a=t.return;try{il(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var El,kl=Math.ceil,Sl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,jl=x.ReactCurrentBatchConfig,Tl=0,Il=null,Al=null,Rl=0,Ol=0,Pl=Es(0),Ll=0,Dl=null,Ml=0,Fl=0,Ul=0,Vl=null,zl=null,Bl=0,$l=1/0,ql=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Ql=null,Xl=0,Yl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Tl)?Ye():-1!==Zl?Zl:Zl=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(i(185));yt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Fl|=n),4===Ll&&lc(e,Rl)),sc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&($l=Ye()+500,Us&&Bs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Il?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Us=!0,zs(e)}(cc.bind(null,e)):zs(cc.bind(null,e)),as(function(){0===(6&Tl)&&Bs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,ec=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var s=Tl;Tl|=2;var a=mc();for(Il===e&&Rl===t||(ql=null,$l=Ye()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Si(),Sl.current=a,Tl=s,null!==Al?t=0:(Il=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ac(e,s))),1===t)throw n=Dl,fc(e,0),lc(e,r),sc(e,Ye()),n;if(6===t)lc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Dl,fc(e,0),lc(e,r),sc(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Nc(e,zl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(Nc.bind(null,e,zl,ql),t);break}Nc(e,zl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(Nc.bind(null,e,zl,ql),r);break}Nc(e,zl,ql);break;default:throw Error(i(329))}}}return sc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Tl))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return sc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Dl,fc(e,0),lc(e,t),sc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nc(e,zl,ql),sc(e,Ye()),null}function uc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&($l=Ye()+500,Us&&Bs())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=jl.transition,r=bt;try{if(jl.transition=null,bt=1,e)return e()}finally{bt=r,jl.transition=n,0===(6&(Tl=t))&&Bs()}}function hc(){Ol=Pl.current,ks(Pl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Os();break;case 3:Xi(),ks(Ts),ks(js),na();break;case 5:Ji(r);break;case 4:Xi();break;case 13:case 19:ks(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Al=e=Pc(e.current,null),Rl=Ol=t,Ll=0,Dl=null,Ul=Fl=Ml=0,zl=Vl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Si(),ra.current=Ja,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,Cl.current=null,null===n||null===n.return){Ll=1,Dl=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),pi(co(c,l));break e}}a=c=co(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Ja,null===e?Ja:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Il||0===(268435455&Ml)&&0===(268435455&Fl)||lc(Il,Rl)}function yc(e,t){var n=Tl;Tl|=2;var r=mc();for(Il===e&&Rl===t||(ql=null,fc(e,t));;)try{vc();break}catch(s){pc(e,s)}if(Si(),Tl=n,Sl.current=r,null!==Al)throw Error(i(261));return Il=null,Rl=0,Ll}function vc(){for(;null!==Al;)xc(Al)}function bc(){for(;null!==Al&&!Qe();)xc(Al)}function xc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Ol)))return void(Al=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function Nc(e,t,n){var r=bt,s=jl.transition;try{jl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Il&&(Al=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=jl.transition,jl.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(es=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ts),qt=!!es,ts=es=null,e.current=n,bl(n,e,s),Xe(),Tl=l,bt=o,jl.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Xl=s),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Bs()}(e,t,n,r)}finally{jl.transition=s,bt=r}return null}function _c(){if(null!==Ql){var e=xt(Xl),t=jl.transition,n=bt;try{if(jl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Xl=0,0!==(6&Tl))throw Error(i(331));var s=Tl;for(Tl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(al(d),d===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(N){kc(l,l.return,N)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Tl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{bt=n,jl.transition=t}}return!1}function Ec(e,t,n){e=Ui(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),sc(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Ui(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Ye()-Bl?fc(e,0):Ul|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Pi(e,t))&&(yt(e,t,n),sc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Dc(n.children,s,a,t);case E:o=8,s|=8;break;case k:return(e=Rc(12,n,t,2|s)).elementType=k,e.lanes=a,e;case T:return(e=Rc(13,n,t,s)).elementType=T,e.lanes=a,e;case I:return(e=Rc(19,n,t,s)).elementType=I,e.lanes=a,e;case O:return Mc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case j:o=11;break e;case A:o=14;break e;case R:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,s,i,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Bc(e){if(!e)return Cs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Ls(e,n,t)}return t}function $c(e,t,n,r,s,i,a,o,l){return(e=zc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=Fi(r=tc(),s=nc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),sc(e,r),e}function qc(e,t,n,r){var s=t.current,i=tc(),a=nc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(rc(e,s,a,i),Vi(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fi();break;case 5:Yi(t);break;case 1:Rs(t.type)&&Ds(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ss(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ss(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ss(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ss(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $o(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=As(t,js.current);Ti(t,n),s=ga(null,t,r,e,s,n);var a=ya();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(a=!0,Ds(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Di(t),s.updater=so,t.stateNode=s,s._reactInternals=t,lo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),wo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===j)return 11;if(e===A)return 14}return 2}(r),e=no(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=jo(null,t,r,e,n);break e;case 11:t=No(null,t,r,e,n);break e;case 14:t=_o(null,t,r,no(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:no(r,s),n);case 1:return r=t.type,s=t.pendingProps,jo(e,t,r,s=t.elementType===r?s:no(r,s),n);case 3:e:{if(Io(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),Bi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=co(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=co(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Ho(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Fo(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:no(r,s),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ss(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ts.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ji(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ji(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ti(t,n),r=r(s=Ii(s)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return s=no(r=t.type,t.pendingProps),_o(e,t,r,s=no(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:no(r,s),qo(e,t),t.tag=1,Rs(r)?(e=!0,Ds(t)):e=!1,Ti(t,n),ao(t,r,s),lo(t,r,s,n),To(null,t,r,!0,e,n);case 19:return $o(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=$c(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[ps]=a.current,Br(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ps]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(a)}Xc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Xc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[ps]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Ye()),0===(6&Tl)&&($l=Ye()+500,Bs()))}break;case 13:dc(function(){var t=Pi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},Nt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Pi(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Et=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=uc,Te=dc;var tu={usingClientEntryPoint:!1,Events:[bs,xs,ws,Se,Ce,uc]},nu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{st=su.inject(ru),it=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>tg,hasStandardBrowserEnv:()=>rg,hasStandardBrowserWebWorkerEnv:()=>sg,navigator:()=>ng,origin:()=>ig});var s,i=n(43),a=n.t(i,2),o=n(391);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,d=s.Pop,m=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){d=s.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:d,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(l({},o.state,{idx:g}),""));let x={get action(){return d},get location(){return e(i,o)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(c,v),m=e,()=>{i.removeEventListener(c,v),m=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d=s.Push;let r=f(x.location,e,t);n&&n(r,e),g=y()+1;let l=h(r,g),c=x.createHref(r);try{o.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;i.location.assign(c)}a&&m&&m({action:d,location:x.location,delta:1})},replace:function(e,t){d=s.Replace;let r=f(x.location,e,t);n&&n(r,e),g=y();let i=h(r,g),l=x.createHref(r);o.replaceState(i,"",l),a&&m&&m({action:d,location:x.location,delta:0})},go:e=>o.go(e)};return x}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let s=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=R(s);a=I(i[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=F([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))s(e,t,r);else s(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=w(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,_=3,E=2,k=1,S=10,C=-2,j=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=C),t&&(r+=E),n.filter(e=>!j(e)).reduce((e,t)=>e+(N.test(t)?_:""===t?k:S),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:F([i,u.pathname]),pathnameBase:U(F([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=m(e):(s=l({},e),u(!s.pathname||!s.pathname.includes("?"),P("?","pathname","search",s)),u(!s.pathname||!s.pathname.includes("#"),P("#","pathname","hash",s)),u(!s.search||!s.search.includes("#"),P("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?m(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:V(r),hash:z(s)}}(s,i),d=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],q=(new Set($),["get",...$]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=i.createContext(null);const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=i.createContext(null);function J(){return null!=i.useContext(Q)}function Z(){return J()||u(!1),i.useContext(Q).location}function ee(e){i.useContext(G).static||i.useLayoutEffect(e)}function te(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=i.useRef(!1);return ee(()=>{n.current=!0}),i.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},s)))},[e,t])}():function(){J()||u(!1);let e=i.useContext(W),{basename:t,future:n,navigator:r}=i.useContext(G),{matches:s}=i.useContext(X),{pathname:a}=Z(),o=JSON.stringify(D(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return ee(()=>{l.current=!0}),i.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=M(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:F([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}const ne=i.createContext(null);function re(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(G),{matches:s}=i.useContext(X),{pathname:a}=Z(),o=JSON.stringify(D(s,r.v7_relativeSplatPath));return i.useMemo(()=>M(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,r){J()||u(!1);let{navigator:a}=i.useContext(G),{matches:o}=i.useContext(X),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=Z();if(t){var p;let e="string"===typeof t?m(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let x=ue(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,r);return t&&x?i.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},x):x}function ae(){let e=function(){var e;let t=i.useContext(Y),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const oe=i.createElement(ae,null);class le extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ue(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,s)=>{let a,u=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,c&&(d<0&&0===s?(p="route-fallback",!1||ge[p]||(ge[p]=!0),u=!0,f=null):d===s&&(u=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:u?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=i.useContext(W);return t||u(!1),t}function pe(e){let t=i.useContext(K);return t||u(!1),t}function me(e){let t=function(){let e=i.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:s}=e;J()||u(!1);let{future:a,static:o}=i.useContext(G),{matches:l}=i.useContext(X),{pathname:c}=Z(),d=te(),h=M(t,D(l,a.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return i.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function be(e){return function(e){let t=i.useContext(X).outlet;return t?i.createElement(ne.Provider,{value:e},t):t}(e.context)}function xe(e){u(!1)}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:a=s.Pop,navigator:o,static:l=!1,future:c}=e;J()&&u(!1);let d=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:d,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof r&&(r=m(r));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=r,b=i.useMemo(()=>{let e=O(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:a}},[d,f,p,g,y,v,a]);return null==b?null:i.createElement(G.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:b}))}function Ne(e){let{children:t,location:n}=e;return ie(_e(t),n)}new Promise(()=>{});i.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,_e(e.props.children,s));e.type!==xe&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=_e(e.props.children,s)),n.push(a)}),n}var Ee=n(950),ke=n.t(Ee,2);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function je(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(By){}new Map;const Ie=a.startTransition;ke.flushSync,a.useId;function Ae(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),g(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return f("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,o)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback(e=>{d&&Ie?Ie(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>ye(r),[r]),i.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Re="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=Ce(e,Te),{basename:g}=i.useContext(G),y=!1;if("string"===typeof d&&Oe.test(d)&&(n=d,Re))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=O(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(By){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;J()||u(!1);let{basename:r,navigator:s}=i.useContext(G),{hash:a,pathname:o,search:l}=se(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:F([r,o])),s.createHref({pathname:c,search:l,hash:a})}(d,{relative:s}),b=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=te(),u=Z(),d=se(e,{relative:o});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,e,a,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return i.createElement("a",Se({},m,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Le,De;function Me(e){let t=i.useRef(je(e)),n=i.useRef(!1),r=Z(),s=i.useMemo(()=>function(e,t){let n=je(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=te(),o=i.useCallback((e,t)=>{const r=je("function"===typeof e?e(s):e);n.current=!0,a("?"+r,t)},[a,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));const Fe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Ve;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(e){return function(e){const t=Fe(e);return Ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Be=function(e){try{return Ue.decodeString(e,!0)}catch(By){console.error("base64Decode failed: ",By)}return null};const $e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,qe=()=>{try{return $e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:3000/api",REACT_APP_FIREBASE_API_KEY:"AIzaSyDGdUSxHwKUGL4NWaQq_z6Ex4KSgxlWHig",REACT_APP_FIREBASE_AUTH_DOMAIN:"e-commerce-3d587.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"e-commerce-3d587",REACT_APP_FIREBASE_STORAGE_BUCKET:"e-commerce-3d587.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"576725083107",REACT_APP_FIREBASE_APP_ID:"1:576725083107:web:9641344343363d0bb4f6d6"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(By){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(By){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${By}`)}},He=e=>{var t,n;return null===(n=null===(t=qe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},We=()=>{var e;return null===(e=qe())||void 0===e?void 0:e.config},Ke=e=>{var t;return null===(t=qe())||void 0===t?void 0:t[`_${e}`]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return!function(){var e;const t=null===(e=qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(By){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"===typeof indexedDB}catch(By){return!1}}class Je extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(et,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Je(n,i,t)}}const et=/\{\$([^}]+)}/g;function tt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(nt(n)&&nt(i)){if(!tt(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nt(e){return null!==e&&"object"===typeof e}function rt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function st(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function it(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class at{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ot),void 0===r.error&&(r.error=ot),void 0===r.complete&&(r.complete=ot);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(By){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(By){"undefined"!==typeof console&&console.error&&console.error(By)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ot(){}function lt(e){return e&&e._delegate?e._delegate:e}class ct{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ut="[DEFAULT]";class dt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(By){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(By){if(r)return null;throw By}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ut})}catch(By){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(By){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===ut?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return this.component?this.component.multipleInstances?e:ut:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ht{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ft=[];var pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pt||(pt={}));const mt={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},gt=pt.INFO,yt={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},vt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=yt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class bt{constructor(e){this.name=e,this._logLevel=gt,this._logHandler=vt,this._userLogHandler=null,ft.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?mt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}let xt,wt;const Nt=new WeakMap,_t=new WeakMap,Et=new WeakMap,kt=new WeakMap,St=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Et.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return It(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(wt||(wt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(At(this),n),It(Nt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return It(e.apply(At(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(At(this),t,...r);return Et.set(i,t.sort?t.sort():[t]),It(i)}}function Tt(e){return"function"===typeof e?jt(e):(e instanceof IDBTransaction&&function(e){if(_t.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});_t.set(e,t)}(e),t=e,(xt||(xt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ct):e);var t}function It(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(It(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Nt.set(t,e)}).catch(()=>{}),St.set(t,e),t}(e);if(kt.has(e))return kt.get(e);const t=Tt(e);return t!==e&&(kt.set(e,t),St.set(t,e)),t}const At=e=>St.get(e);const Rt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Pt=new Map;function Lt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pt.get(t))return Pt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Ot.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Rt.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Pt.set(t,i),i}Ct=(e=>({...e,get:(t,n,r)=>Lt(t,n)||e.get(t,n,r),has:(t,n)=>!!Lt(t,n)||e.has(t,n)}))(Ct);class Dt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Mt="@firebase/app",Ft="0.10.13",Ut=new bt("@firebase/app"),Vt="@firebase/app-compat",zt="@firebase/analytics-compat",Bt="@firebase/analytics",$t="@firebase/app-check-compat",qt="@firebase/app-check",Ht="@firebase/auth",Wt="@firebase/auth-compat",Kt="@firebase/database",Gt="@firebase/data-connect",Qt="@firebase/database-compat",Xt="@firebase/functions",Yt="@firebase/functions-compat",Jt="@firebase/installations",Zt="@firebase/installations-compat",en="@firebase/messaging",tn="@firebase/messaging-compat",nn="@firebase/performance",rn="@firebase/performance-compat",sn="@firebase/remote-config",an="@firebase/remote-config-compat",on="@firebase/storage",ln="@firebase/storage-compat",cn="@firebase/firestore",un="@firebase/vertexai-preview",dn="@firebase/firestore-compat",hn="firebase",fn="[DEFAULT]",pn={[Mt]:"fire-core",[Vt]:"fire-core-compat",[Bt]:"fire-analytics",[zt]:"fire-analytics-compat",[qt]:"fire-app-check",[$t]:"fire-app-check-compat",[Ht]:"fire-auth",[Wt]:"fire-auth-compat",[Kt]:"fire-rtdb",[Gt]:"fire-data-connect",[Qt]:"fire-rtdb-compat",[Xt]:"fire-fn",[Yt]:"fire-fn-compat",[Jt]:"fire-iid",[Zt]:"fire-iid-compat",[en]:"fire-fcm",[tn]:"fire-fcm-compat",[nn]:"fire-perf",[rn]:"fire-perf-compat",[sn]:"fire-rc",[an]:"fire-rc-compat",[on]:"fire-gcs",[ln]:"fire-gcs-compat",[cn]:"fire-fst",[dn]:"fire-fst-compat",[un]:"fire-vertex","fire-js":"fire-js",[hn]:"fire-js-all"},mn=new Map,gn=new Map,yn=new Map;function vn(e,t){try{e.container.addComponent(t)}catch(By){Ut.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,By)}}function bn(e){const t=e.name;if(yn.has(t))return Ut.debug(`There were multiple attempts to register component ${t}.`),!1;yn.set(t,e);for(const n of mn.values())vn(n,e);for(const n of gn.values())vn(n,e);return!0}function xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wn(e){return void 0!==e.settings}const Nn=new Ze("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _n{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const En="10.14.1";function kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:fn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Nn.create("bad-app-name",{appName:String(s)});if(n||(n=We()),!n)throw Nn.create("no-options");const i=mn.get(s);if(i){if(tt(n,i.options)&&tt(r,i.config))return i;throw Nn.create("duplicate-app",{appName:s})}const a=new ht(s);for(const l of yn.values())a.addComponent(l);const o=new _n(n,r,a);return mn.set(s,o),o}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;const t=mn.get(e);if(!t&&e===fn&&We())return kn();if(!t)throw Nn.create("no-app",{appName:e});return t}function Cn(e,t,n){var r;let s=null!==(r=pn[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ut.warn(e.join(" "))}bn(new ct(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const jn="firebase-heartbeat-store";let Tn=null;function In(){return Tn||(Tn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=It(a);return r&&a.addEventListener("upgradeneeded",e=>{r(It(a.result),e.oldVersion,e.newVersion,It(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(jn)}catch(By){console.warn(By)}}}).catch(e=>{throw Nn.create("idb-open",{originalErrorMessage:e.message})})),Tn}async function An(e,t){try{const n=(await In()).transaction(jn,"readwrite"),r=n.objectStore(jn);await r.put(t,Rn(e)),await n.done}catch(By){if(By instanceof Je)Ut.warn(By.message);else{const t=Nn.create("idb-set",{originalErrorMessage:null===By||void 0===By?void 0:By.message});Ut.warn(t.message)}}}function Rn(e){return`${e.name}!${e.options.appId}`}class On{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ln(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(By){Ut.warn(By)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Pn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Dn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=ze(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(By){return Ut.warn(By),""}}}function Pn(){return(new Date).toISOString().substring(0,10)}class Ln{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ye()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await In()).transaction(jn),n=await t.objectStore(jn).get(Rn(e));return await t.done,n}catch(By){if(By instanceof Je)Ut.warn(By.message);else{const t=Nn.create("idb-get",{originalErrorMessage:null===By||void 0===By?void 0:By.message});Ut.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return An(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return An(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Dn(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var Mn;Mn="",bn(new ct("platform-logger",e=>new Dt(e),"PRIVATE")),bn(new ct("heartbeat",e=>new On(e),"PRIVATE")),Cn(Mt,Ft,Mn),Cn(Mt,Ft,"esm2017"),Cn("fire-js","");Cn("firebase","10.14.1","app");function Fn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Un(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vn=Un,zn=new Ze("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bn={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},$n=new bt("@firebase/auth");function qn(e){if($n.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$n.error(`Auth (${En}): ${e}`,...n)}}function Hn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xn(e,...n)}function Wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xn(e,...n)}function Kn(e,t,n){const r=Object.assign(Object.assign({},Vn()),{[t]:n});return new Ze("auth","Firebase",r).create(t,{appName:e.name})}function Gn(e){return Kn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Hn(e,"argument-error"),Kn(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return zn.create(e,...n)}function Yn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Xn(t,...r)}}function Jn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw qn(t),new Error(t)}function Zn(e,t){e||Jn(t)}function er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tr(){return"http:"===nr()||"https:"===nr()}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function rr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class sr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return rr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ir(e,t){Zn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class ar{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const or={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lr=new sr(3e4,6e4);function cr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ur(e,t,n,r){return dr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=rt(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),ar.fetch()(fr(e,e.config.apiHost,n,a),l)})}async function dr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},or),t);try{const t=new mr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw gr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw gr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw gr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw gr(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Kn(e,o,a);Hn(e,o)}}catch(By){if(By instanceof Je)throw By;Hn(e,"network-request-failed",{message:String(By)})}}async function hr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await ur(e,t,n,r,s);return"mfaPendingCredential"in i&&Hn(e,"multi-factor-auth-required",{_serverResponse:i}),i}function fr(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?ir(e.config,s):`${e.config.apiScheme}://${s}`}function pr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Wn(this.auth,"network-request-failed")),lr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Wn(e,t,r);return s.customData._tokenResponse=n,s}function yr(e){return void 0!==e&&void 0!==e.enterprise}class vr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function br(e,t){return ur(e,"GET","/v2/recaptchaConfig",cr(e,t))}async function xr(e,t){return ur(e,"POST","/v1/accounts:lookup",t)}function wr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(By){}}function Nr(e){return 1e3*Number(e)}function _r(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return qn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(qn("Failed to decode base64 JWT payload"),null)}catch(By){return qn("Caught error parsing JWT payload as JSON",null===By||void 0===By?void 0:By.toString()),null}}function Er(e){const t=_r(e);return Yn(t,"internal-error"),Yn("undefined"!==typeof t.exp,"internal-error"),Yn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function kr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(By){throw By instanceof Je&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(By)&&e.auth.currentUser===e&&await e.auth.signOut(),By}}class Sr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(By){return void("auth/network-request-failed"===(null===By||void 0===By?void 0:By.code)&&this.schedule(!0))}this.schedule()}}class Cr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await kr(e,xr(n,{idToken:r}));Yn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Tr(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cr(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Tr(e){return e.map(e=>{var{providerId:t}=e,n=Fn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ir{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yn(e.idToken,"internal-error"),Yn("undefined"!==typeof e.idToken,"internal-error"),Yn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Er(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Yn(0!==e.length,"internal-error");const t=Er(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Yn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await dr(e,{},async()=>{const n=rt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=fr(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ar.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Ir;return n&&(Yn("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Yn("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Yn("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ir,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function Ar(e,t){Yn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Rr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Fn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await kr(this,this.stsTokenManager.getToken(this.auth,e));return Yn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=lt(e),r=await n.getIdToken(t),s=_r(r);Yn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wr(Nr(s.auth_time)),issuedAtTime:wr(Nr(s.iat)),expirationTime:wr(Nr(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=lt(e);await jr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Yn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await jr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await kr(this,async function(e,t){return ur(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:N}=t;Yn(v&&N,e,"internal-error");const _=Ir.fromJSON(this.name,N);Yn("string"===typeof v,e,"internal-error"),Ar(u,e.name),Ar(d,e.name),Yn("boolean"===typeof b,e,"internal-error"),Yn("boolean"===typeof x,e,"internal-error"),Ar(h,e.name),Ar(f,e.name),Ar(p,e.name),Ar(m,e.name),Ar(g,e.name),Ar(y,e.name);const E=new Rr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ir;r.updateFromServerResponse(t);const s=new Rr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await jr(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Yn(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Tr(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Ir;a.updateFromIdToken(n);const o=new Rr({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Cr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Or=new Map;function Pr(e){Zn(e instanceof Function,"Expected a class definition");let t=Or.get(e);return t?(Zn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Or.set(e,t),t)}class Lr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lr.type="NONE";const Dr=Lr;function Mr(e,t,n){return`firebase:${e}:${t}:${n}`}class Fr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Mr(this.userKey,r.apiKey,s),this.fullPersistenceKey=Mr("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Fr(Pr(Dr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Pr(Dr);const i=Mr(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Rr._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Fr(s,e,n)):new Fr(s,e,n)}}function Ur(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($r(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Hr(t))return"Blackberry";if(Wr(t))return"Webos";if(zr(t))return"Safari";if((t.includes("chrome/")||Br(t))&&!t.includes("edge/"))return"Chrome";if(qr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/firefox\//i.test(e)}function zr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/crios\//i.test(e)}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iemobile/i.test(e)}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/android/i.test(e)}function Hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/blackberry/i.test(e)}function Wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/webos/i.test(e)}function Kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Gr(){return function(){const e=Qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return Kr(e)||qr(e)||Wr(e)||Hr(e)||/windows phone/i.test(e)||$r(e)}function Xr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ur(Qe());break;case"Worker":t=`${Ur(Qe())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${En}/${r}`}class Yr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(By){r(By)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(By){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===By||void 0===By?void 0:By.message})}}}class Jr{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Zr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ts(this),this.idTokenSubscription=new ts(this),this.beforeStateQueue=new Yr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Fr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(By){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await xr(this,{idToken:e}),n=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(By){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(By))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(By){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jr(e)}catch(By){if("auth/network-request-failed"!==(null===By||void 0===By?void 0:By.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Gn(this));const t=e?lt(e):null;return t&&Yn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Yn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ur(e,"GET","/v2/passwordPolicy",cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Jr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ze("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ur(e,"POST","/v2/accounts:revokeToken",cr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;Yn(t,this,"argument-error"),this.redirectPersistenceManager=await Fr.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yn(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if($n.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$n.warn(`Auth (${En}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function es(e){return lt(e)}class ts{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new at(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ns={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rs(e){return ns.loadJS(e)}function ss(e){return`__${e}${Math.floor(1e6*Math.random())}`}class is{constructor(e){this.type="recaptcha-enterprise",this.auth=es(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;yr(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{br(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new vr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&yr(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ns.recaptchaEnterpriseScript;0!==t.length&&(t+=s),rs(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function as(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new is(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function os(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await as(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await as(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function ls(e,t,n){const r=es(e);Yn(r._canInitEmulator,r,"emulator-config-failed"),Yn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=cs(t),{host:a,port:o}=function(e){const t=cs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:us(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:us(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function us(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ds{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,t){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function hs(e,t){return ur(e,"POST","/v1/accounts:signUp",t)}async function fs(e,t){return hr(e,"POST","/v1/accounts:signInWithPassword",cr(e,t))}class ps extends ds{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ps(e,t,"password")}static _fromEmailAndCode(e,t){return new ps(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return os(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fs);case"emailLink":return async function(e,t){return hr(e,"POST","/v1/accounts:signInWithEmailLink",cr(e,t))}(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return os(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hs);case"emailLink":return async function(e,t){return hr(e,"POST","/v1/accounts:signInWithEmailLink",cr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ms(e,t){return hr(e,"POST","/v1/accounts:signInWithIdp",cr(e,t))}class gs extends ds{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Fn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new gs(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ms(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ms(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ms(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rt(t)}return e}}const ys={USER_NOT_FOUND:"user-not-found"};class vs extends ds{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new vs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new vs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return hr(e,"POST","/v1/accounts:signInWithPhoneNumber",cr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await hr(e,"POST","/v1/accounts:signInWithPhoneNumber",cr(e,t));if(n.temporaryProof)throw gr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return hr(e,"POST","/v1/accounts:signInWithPhoneNumber",cr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ys)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new vs({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class bs{constructor(e){var t,n,r,s,i,a;const o=st(it(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Yn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=st(it(e)).link,n=t?st(it(t)).deep_link_id:null,r=st(it(e)).deep_link_id;return(r?st(it(r)).link:null)||r||n||t||e}(e);try{return new bs(t)}catch(n){return null}}}class xs{constructor(){this.providerId=xs.PROVIDER_ID}static credential(e,t){return ps._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=bs.parseLink(t);return Yn(n,"argument-error"),ps._fromEmailAndCode(e,n.code,n.tenantId)}}xs.PROVIDER_ID="password",xs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ws{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ns extends ws{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends Ns{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _s.credential(t.oauthAccessToken)}catch(n){return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com",_s.PROVIDER_ID="facebook.com";class Es extends Ns{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Es.credential(n,r)}catch(s){return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com",Es.PROVIDER_ID="google.com";class ks extends Ns{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ks.credential(t.oauthAccessToken)}catch(n){return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com",ks.PROVIDER_ID="github.com";class Ss extends Ns{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ss.credential(n,r)}catch(s){return null}}}async function Cs(e,t){return hr(e,"POST","/v1/accounts:signUp",cr(e,t))}Ss.TWITTER_SIGN_IN_METHOD="twitter.com",Ss.PROVIDER_ID="twitter.com";class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Rr._fromIdTokenResponse(e,n,r),i=Ts(n);return new js({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ts(n);return new js({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ts(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Is extends Je{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Is.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Is(e,t,n,r)}}function As(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Is._fromErrorAndOperation(e,n,t,r);throw n})}async function Rs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await kr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return js._forOperation(e,"link",r)}async function Os(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(wn(r.app))return Promise.reject(Gn(r));const s="reauthenticate";try{const i=await kr(e,As(r,s,t,e),n);Yn(i.idToken,r,"internal-error");const a=_r(i.idToken);Yn(a,r,"internal-error");const{sub:o}=a;return Yn(e.uid===o,r,"user-mismatch"),js._forOperation(e,s,i)}catch(By){throw"auth/user-not-found"===(null===By||void 0===By?void 0:By.code)&&Hn(r,"user-mismatch"),By}}async function Ps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(wn(e.app))return Promise.reject(Gn(e));const r="signIn",s=await As(e,r,t),i=await js._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Ls(e,t){return Ps(es(e),t)}async function Ds(e){const t=es(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Ms="__sak";class Fs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ms,"1"),this.storage.removeItem(Ms),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Us extends Fs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Gr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Us.type="LOCAL";const Vs=Us;class zs extends Fs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zs.type="SESSION";const Bs=zs;class $s{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new $s(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}$s.receivers=[];class Hs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=qs("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Ws(){return window}function Ks(){return"undefined"!==typeof Ws().WorkerGlobalScope&&"function"===typeof Ws().importScripts}const Gs="firebaseLocalStorageDb",Qs="firebaseLocalStorage",Xs="fbase_key";class Ys{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Js(e,t){return e.transaction([Qs],t?"readwrite":"readonly").objectStore(Qs)}function Zs(){const e=indexedDB.open(Gs,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Qs,{keyPath:Xs})}catch(By){n(By)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Qs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Gs);return new Ys(e).toPromise()}(),t(await Zs()))})})}async function ei(e,t,n){const r=Js(e,!0).put({[Xs]:t,value:n});return new Ys(r).toPromise()}function ti(e,t){const n=Js(e,!0).delete(t);return new Ys(n).toPromise()}class ni{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Zs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(By){if(t++>3)throw By;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ks()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$s._getInstance(Ks()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Hs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zs();return await ei(e,Ms,"1"),await ti(e,Ms),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ei(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Js(e,!1).get(t),r=await new Ys(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ti(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Js(e,!1).getAll();return new Ys(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ni.type="LOCAL";const ri=ni;ss("rcb"),new sr(3e4,6e4);const si="recaptcha";async function ii(e,t,n){var r;const s=await n.verify();try{let i;if(Yn("string"===typeof s,e,"argument-error"),Yn(n.type===si,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Yn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ur(e,"POST","/v2/accounts/mfaEnrollment:start",cr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Yn("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Yn(n,e,"missing-multi-factor-info");const a=await function(e,t){return ur(e,"POST","/v2/accounts/mfaSignIn:start",cr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ur(e,"POST","/v1/accounts:sendVerificationCode",cr(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class ai{constructor(e){this.providerId=ai.PROVIDER_ID,this.auth=es(e)}verifyPhoneNumber(e,t){return ii(this.auth,e,lt(t))}static credential(e,t){return vs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ai.credentialFromTaggedObject(t)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?vs._fromTokenResponse(n,r):null}}function oi(e,t){return t?Pr(t):(Yn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ai.PROVIDER_ID="phone",ai.PHONE_SIGN_IN_METHOD="phone";class li extends ds{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ms(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ms(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ci(e){return Ps(e.auth,new li(e),e.bypassAuthState)}function ui(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),Os(n,new li(e),e.bypassAuthState)}async function di(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),Rs(n,new li(e),e.bypassAuthState)}class hi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(By){this.reject(By)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(By){this.reject(By)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ci;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return ui;default:Hn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fi=new sr(2e3,1e4);class pi extends hi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yn(e,this.auth,"internal-error"),e}async onExecution(){Zn(1===this.filter.length,"Popup operations only handle one event");const e=qs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,fi.get())};e()}}pi.currentPopupAction=null;const mi=new Map;class gi extends hi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=mi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=bi(t),r=vi(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(By){e=()=>Promise.reject(By)}mi.set(this.auth._key(),e)}return this.bypassAuthState||mi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function yi(e,t){mi.set(e._key(),t)}function vi(e){return Pr(e._redirectPersistence)}function bi(e){return Mr("pendingRedirect",e.config.apiKey,e.name)}async function xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(wn(e.app))return Promise.reject(Gn(e));const r=es(e),s=oi(r,t),i=new gi(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class wi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _i(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_i(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ni(e))}saveEventToCache(e){this.cachedEventUids.add(Ni(e)),this.lastProcessedEventTime=Date.now()}}function Ni(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function _i(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ei=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ki=/^https?/;async function Si(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ur(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ci(r))return}catch(n){}Hn(e,"unauthorized-domain")}function Ci(e){const t=er(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ki.test(n))return!1;if(Ei.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ji=new sr(3e4,6e4);function Ti(){const e=Ws().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ii(e){return new Promise((t,n)=>{var r,s,i;function a(){Ti(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ti(),n(Wn(e,"network-request-failed"))},timeout:ji.get()})}if(null===(s=null===(r=Ws().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Ws().gapi)||void 0===i?void 0:i.load)){const t=ss("iframefcb");return Ws()[t]=()=>{gapi.load?a():n(Wn(e,"network-request-failed"))},rs(`${ns.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw Ai=null,e})}let Ai=null;const Ri=new sr(5e3,15e3),Oi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Li(e){const t=e.config;Yn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ir(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:En},s=Pi.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${rt(r).slice(1)}`}async function Di(e){const t=await function(e){return Ai=Ai||Ii(e),Ai}(e),n=Ws().gapi;return Yn(n,e,"internal-error"),t.open({where:document.body,url:Li(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Wn(e,"network-request-failed"),i=Ws().setTimeout(()=>{r(s)},Ri.get());function a(){Ws().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Mi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(By){}}}function Ui(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Mi),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Qe().toLowerCase();n&&(o=Br(c)?"_blank":n),Vr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Kr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Fi(null);const d=window.open(t||"",o,u);Yn(d,e,"popup-blocked");try{d.focus()}catch(By){}return new Fi(d)}const Vi="__/auth/handler",zi="emulator/auth/handler",Bi=encodeURIComponent("fac");async function $i(e,t,n,r,s,i){Yn(e.config.authDomain,e,"auth-domain-config-required"),Yn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:En,eventId:s};if(t instanceof ws){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Ns){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Bi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Vi}`;return ir(t,zi)}(e)}?${rt(o).slice(1)}${c}`}const qi="webStorageSupport";const Hi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bs,this._completeRedirectFn=xi,this._overrideRedirectResult=yi}async _openPopup(e,t,n,r){var s;Zn(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Ui(e,await $i(e,t,n,er(),r),qs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ws().location.href=e}(await $i(e,t,n,er(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Di(e),n=new wi(e);return t.register("authEvent",t=>{Yn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qi,{type:qi},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[qi];void 0!==s&&t(!!s),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Si(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qr()||zr()||Kr()}};var Wi="@firebase/auth",Ki="1.7.9";class Gi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qi=Ke("authIdTokenMaxAge")||300;let Xi=null;var Yi;ns={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Wn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Yi="Browser",bn(new ct("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Yn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Yi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xr(Yi)},c=new Zr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bn(new ct("auth-internal",e=>(e=>new Gi(e))(es(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(Wi,Ki,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yi)),Cn(Wi,Ki,"esm2017");var Ji,Zi,ea="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ta={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Zi=ta.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Ji=ta.Integer=r}).apply("undefined"!==typeof ea?ea:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var na,ra,sa,ia,aa,oa,la,ca,ua="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},da={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ua&&ua];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){s.setTimeout(()=>{throw e},0)}function E(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,j=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){_(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,O);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=$(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var s=t;w(t=new O(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}d(ve,O),d(be,O);var xe={},we=null;function Ne(){return we=we||new ne}function _e(e){O.call(this,xe.La,e)}function Ee(e){const t=Ne();re(t,new _e(t))}function ke(e,t){O.call(this,xe.STAT_EVENT,e),this.stat=t}function Se(e){const t=Ne();re(t,new ke(t,e))}function Ce(e,t){O.call(this,xe.Ma,e),this.size=t}function je(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(_e,O),xe.STAT_EVENT="statevent",d(ke,O),xe.Ma="timingevent",d(Ce,O),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Pe,pe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ae=new Pe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=je(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=je(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ee(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var i=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ke(this),We(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Se(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Se(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Se(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ie(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ke(this),We(this)}}}catch(ha){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Se(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){Nt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return Nt(e),t=St(e,t),e.g.has(t)}function kt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function jt(){this.g=new fe}function Tt(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(By){throw t.push(r+"type="+encodeURIComponent("_badmap")),By}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Nt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,Et(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(It,pe),It.prototype.g=function(){return new At(this.l,this.j)},It.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Pt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(By){}}}function qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ma){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),j||(C(),j=!0),T.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Tt(o,e,"req"+n+"_")}catch(ha){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),j||(C(),j=!0),T.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=je(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Ce(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=je(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),dn(e),Yt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new It({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Le(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Lt(i)))+"&"+t:this.m&&Dt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=je(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ca=da.createWebChannelTransport=function(){return new mn},la=da.getStatEventTarget=function(){return Ne()},oa=da.Event=xe,aa=da.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,ia=da.ErrorCode=Re,Oe.COMPLETE="complete",sa=da.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ra=da.WebChannel=ge,da.FetchXmlHttpFactory=It,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,na=da.XhrIo=Mt}).apply("undefined"!==typeof ua?ua:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ha="@firebase/firestore";class fa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fa.UNAUTHENTICATED=new fa(null),fa.GOOGLE_CREDENTIALS=new fa("google-credentials-uid"),fa.FIRST_PARTY=new fa("first-party-uid"),fa.MOCK_USER=new fa("mock-user");let pa="10.14.0";const ma=new bt("@firebase/firestore");function ga(){return ma.logLevel}function ya(e){if(ma.logLevel<=pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(xa);ma.debug(`Firestore (${pa}): ${e}`,...s)}}function va(e){if(ma.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(xa);ma.error(`Firestore (${pa}): ${e}`,...s)}}function ba(e){if(ma.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(xa);ma.warn(`Firestore (${pa}): ${e}`,...s)}}function xa(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function wa(){const e=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw va(e),new Error(e)}function Na(e,t){e||wa()}function _a(e,t){return e}const Ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ka extends Je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ca{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ja{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fa.UNAUTHENTICATED))}shutdown(){}}class Ta{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ia{constructor(e){this.t=e,this.currentUser=fa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Na(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sa,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ya("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ya("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sa)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ya("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Na("string"==typeof t.accessToken),new Ca(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Na(null===e||"string"==typeof e),new fa(e)}}class Aa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=fa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ra{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Aa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pa{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Na(void 0===this.o);const n=e=>{null!=e.error&&ya("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,ya("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ya("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ya("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Na("string"==typeof e.token),this.R=e.token,new Oa(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function La(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Da{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=La(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Ma(e,t){return e<t?-1:e>t?1:0}function Fa(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Ua{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ka(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ka(Ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ka(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ka(Ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ua.fromMillis(Date.now())}static fromDate(e){return Ua.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ua(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ma(this.nanoseconds,e.nanoseconds):Ma(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Va{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Va(e)}static min(){return new Va(new Ua(0,0))}static max(){return new Va(new Ua(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class za{constructor(e,t,n){void 0===t?t=0:t>e.length&&wa(),void 0===n?n=e.length-t:n>e.length-t&&wa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===za.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof za?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ba extends za{construct(e,t,n){return new Ba(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new ka(Ea.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Ba(e)}static emptyPath(){return new Ba([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qa extends za{construct(e,t,n){return new qa(e,t,n)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new ka(Ea.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ka(Ea.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ka(Ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new ka(Ea.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qa(t)}static emptyPath(){return new qa([])}}class Ha{constructor(e){this.path=e}static fromPath(e){return new Ha(Ba.fromString(e))}static fromName(e){return new Ha(Ba.fromString(e).popFirst(5))}static empty(){return new Ha(Ba.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ba.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ba.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ha(new Ba(e.slice()))}}class Wa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Wa.UNKNOWN_ID=-1;function Ka(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Va.fromTimestamp(1e9===r?new Ua(n+1,0):new Ua(n,r));return new Qa(s,Ha.empty(),t)}function Ga(e){return new Qa(e.readTime,e.key,-1)}class Qa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Qa(Va.min(),Ha.empty(),-1)}static max(){return new Qa(Va.max(),Ha.empty(),-1)}}function Xa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ha.comparator(e.documentKey,t.documentKey),0!==n?n:Ma(e.largestBatchId,t.largestBatchId))}const Ya="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ja{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Za(e){if(e.code!==Ea.FAILED_PRECONDITION||e.message!==Ya)throw e;ya("LocalStore","Unexpectedly lost primary lease")}class eo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new eo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof eo?t:eo.resolve(t)}catch(e){return eo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):eo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):eo.reject(t)}static resolve(e){return new eo((t,n)=>{t(e)})}static reject(e){return new eo((t,n)=>{n(e)})}static waitFor(e){return new eo((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=eo.resolve(!1);for(const n of e)t=t.next(e=>e?eo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new eo((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new eo((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function to(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(e){return"IndexedDbTransactionError"===e.name}class ro{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function so(e){return null==e}function io(e){return 0===e&&1/e==-1/0}function ao(e){return"number"==typeof e&&Number.isInteger(e)&&!io(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}ro.oe=-1;const oo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],co=lo,uo=[...co,"indexConfiguration","indexState","indexEntries"];function ho(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function po(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class mo{constructor(e,t){this.comparator=e,this.root=t||yo.EMPTY}insert(e,t){return new mo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yo.BLACK,null,null))}remove(e){return new mo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new go(this.root,e,this.comparator,!1)}getReverseIterator(){return new go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new go(this.root,e,this.comparator,!0)}}class go{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yo{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:yo.RED,this.left=null!=r?r:yo.EMPTY,this.right=null!=s?s:yo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new yo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wa();if(this.right.isRed())throw wa();const e=this.left.check();if(e!==this.right.check())throw wa();return e+(this.isRed()?0:1)}}yo.EMPTY=null,yo.RED=!0,yo.BLACK=!1,yo.EMPTY=new class{constructor(){this.size=0}get key(){throw wa()}get value(){throw wa()}get color(){throw wa()}get left(){throw wa()}get right(){throw wa()}copy(e,t,n,r,s){return this}insert(e,t,n){return new yo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vo{constructor(e){this.comparator=e,this.data=new mo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bo(this.data.getIterator())}getIteratorFrom(e){return new bo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof vo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vo(this.comparator);return t.data=e,t}}class bo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xo{constructor(e){this.fields=e,e.sort(qa.comparator)}static empty(){return new xo([])}unionWith(e){let t=new vo(qa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fa(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class wo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class No{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new wo("Invalid base64 string: "+e):e}}(e);return new No(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new No(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ma(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}No.EMPTY_BYTE_STRING=new No("");const _o=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(e){if(Na(!!e),"string"==typeof e){let t=0;const n=_o.exec(e);if(Na(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ko(e.seconds),nanos:ko(e.nanos)}}function ko(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function So(e){return"string"==typeof e?No.fromBase64String(e):No.fromUint8Array(e)}function Co(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jo(e){const t=e.mapValue.fields.__previous_value__;return Co(t)?jo(t):t}function To(e){const t=Eo(e.mapValue.fields.__local_write_time__.timestampValue);return new Ua(t.seconds,t.nanos)}class Io{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Ao{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ao("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}const Ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Co(e)?4:Qo(e)?9007199254740991:Ko(e)?10:11:wa()}function Po(e,t){if(e===t)return!0;const n=Oo(e);if(n!==Oo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return To(e).isEqual(To(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Eo(e.timestampValue),r=Eo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return So(e.bytesValue).isEqual(So(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ko(e.geoPointValue.latitude)===ko(t.geoPointValue.latitude)&&ko(e.geoPointValue.longitude)===ko(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ko(e.integerValue)===ko(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ko(e.doubleValue),r=ko(t.doubleValue);return n===r?io(n)===io(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fa(e.arrayValue.values||[],t.arrayValue.values||[],Po);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ho(n)!==ho(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Po(n[s],r[s])))return!1;return!0}(e,t);default:return wa()}}function Lo(e,t){return void 0!==(e.values||[]).find(e=>Po(e,t))}function Do(e,t){if(e===t)return 0;const n=Oo(e),r=Oo(t);if(n!==r)return Ma(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ma(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ko(e.integerValue||e.doubleValue),r=ko(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mo(e.timestampValue,t.timestampValue);case 4:return Mo(To(e),To(t));case 5:return Ma(e.stringValue,t.stringValue);case 6:return function(e,t){const n=So(e),r=So(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Ma(n[s],r[s]);if(0!==e)return e}return Ma(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ma(ko(e.latitude),ko(t.latitude));return 0!==n?n:Ma(ko(e.longitude),ko(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Fo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Ma((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Fo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ro.mapValue&&t===Ro.mapValue)return 0;if(e===Ro.mapValue)return 1;if(t===Ro.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ma(r[a],i[a]);if(0!==e)return e;const t=Do(n[r[a]],s[i[a]]);if(0!==t)return t}return Ma(r.length,i.length)}(e.mapValue,t.mapValue);default:throw wa()}}function Mo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ma(e,t);const n=Eo(e),r=Eo(t),s=Ma(n.seconds,r.seconds);return 0!==s?s:Ma(n.nanos,r.nanos)}function Fo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Do(n[s],r[s]);if(e)return e}return Ma(n.length,r.length)}function Uo(e){return Vo(e)}function Vo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Eo(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return So(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ha.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Vo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Vo(e.fields[s])}`;return n+"}"}(e.mapValue):wa()}function zo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bo(e){return!!e&&"integerValue"in e}function $o(e){return!!e&&"arrayValue"in e}function qo(e){return!!e&&"nullValue"in e}function Ho(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wo(e){return!!e&&"mapValue"in e}function Ko(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Go(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Go(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Go(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Qo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Xo{constructor(e){this.value=e}static empty(){return new Xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(t)}setAll(e){let t=qa.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Go(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Wo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){fo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Xo(Go(this.value))}}function Yo(e){const t=[];return fo(e.fields,(e,n)=>{const r=new qa([e]);if(Wo(n)){const e=Yo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xo(t)}class Jo{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Jo(e,0,Va.min(),Va.min(),Va.min(),Xo.empty(),0)}static newFoundDocument(e,t,n,r){return new Jo(e,1,t,Va.min(),n,r,0)}static newNoDocument(e,t){return new Jo(e,2,t,Va.min(),Va.min(),Xo.empty(),0)}static newUnknownDocument(e,t){return new Jo(e,3,t,Va.min(),Va.min(),Xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Va.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Va.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zo{constructor(e,t){this.position=e,this.inclusive=t}}function el(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ha.comparator(Ha.fromName(a.referenceValue),n.key):Do(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function tl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Po(e.position[n],t.position[n]))return!1;return!0}class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function rl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sl{}class il extends sl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new fl(e,t,n):"array-contains"===t?new yl(e,n):"in"===t?new vl(e,n):"not-in"===t?new bl(e,n):"array-contains-any"===t?new xl(e,n):new il(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new pl(e,n):new ml(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Do(t,this.value)):null!==t&&Oo(this.value)===Oo(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class al extends sl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new al(e,t)}matches(e){return ol(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ol(e){return"and"===e.op}function ll(e){return cl(e)&&ol(e)}function cl(e){for(const t of e.filters)if(t instanceof al)return!1;return!0}function ul(e){if(e instanceof il)return e.field.canonicalString()+e.op.toString()+Uo(e.value);if(ll(e))return e.filters.map(e=>ul(e)).join(",");{const t=e.filters.map(e=>ul(e)).join(",");return`${e.op}(${t})`}}function dl(e,t){return e instanceof il?function(e,t){return t instanceof il&&e.op===t.op&&e.field.isEqual(t.field)&&Po(e.value,t.value)}(e,t):e instanceof al?function(e,t){return t instanceof al&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&dl(n,t.filters[r]),!0)}(e,t):void wa()}function hl(e){return e instanceof il?function(e){return`${e.field.canonicalString()} ${e.op} ${Uo(e.value)}`}(e):e instanceof al?function(e){return e.op.toString()+" {"+e.getFilters().map(hl).join(" ,")+"}"}(e):"Filter"}class fl extends il{constructor(e,t,n){super(e,t,n),this.key=Ha.fromName(n.referenceValue)}matches(e){const t=Ha.comparator(e.key,this.key);return this.matchesComparison(t)}}class pl extends il{constructor(e,t){super(e,"in",t),this.keys=gl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ml extends il{constructor(e,t){super(e,"not-in",t),this.keys=gl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ha.fromName(e.referenceValue))}class yl extends il{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $o(t)&&Lo(t.arrayValue,this.value)}}class vl extends il{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lo(this.value.arrayValue,t)}}class bl extends il{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lo(this.value.arrayValue,t)}}class xl extends il{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Lo(this.value.arrayValue,e))}}class wl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Nl(e){return new wl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function _l(e){const t=_a(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ul(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),so(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Uo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Uo(e)).join(",")),t.ue=e}return t.ue}function El(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tl(e.startAt,t.startAt)&&tl(e.endAt,t.endAt)}function kl(e){return Ha.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Sl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Cl(e,t,n,r,s,i,a,o){return new Sl(e,t,n,r,s,i,a,o)}function jl(e){return new Sl(e)}function Tl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Il(e){return null!==e.collectionGroup}function Al(e){const t=_a(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new vo(qa.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new nl(r,n))}),e.has(qa.keyField().canonicalString())||t.ce.push(new nl(qa.keyField(),n))}return t.ce}function Rl(e){const t=_a(e);return t.le||(t.le=Ol(t,Al(e))),t.le}function Ol(e,t){if("F"===e.limitType)return Nl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new nl(e.field,t)});const n=e.endAt?new Zo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zo(e.startAt.position,e.startAt.inclusive):null;return Nl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Pl(e,t){const n=e.filters.concat([t]);return new Sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ll(e,t,n){return new Sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dl(e,t){return El(Rl(e),Rl(t))&&e.limitType===t.limitType}function Ml(e){return`${_l(Rl(e))}|lt:${e.limitType}`}function Fl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>hl(e)).join(", ")}]`),so(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Uo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Uo(e)).join(",")),`Target(${t})`}(Rl(e))}; limitType=${e.limitType})`}function Ul(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ha.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Al(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=el(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Al(e),t))&&!(e.endAt&&!function(e,t,n){const r=el(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Al(e),t))}(e,t)}function Vl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zl(e){return(t,n)=>{let r=!1;for(const s of Al(e)){const e=Bl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Bl(e,t,n){const r=e.field.isKeyField()?Ha.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Do(r,s):wa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wa()}}class $l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return po(this.inner)}size(){return this.innerSize}}const ql=new mo(Ha.comparator);function Hl(){return ql}const Wl=new mo(Ha.comparator);function Kl(){let e=Wl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Gl(e){let t=Wl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ql(){return Yl()}function Xl(){return Yl()}function Yl(){return new $l(e=>e.toString(),(e,t)=>e.isEqual(t))}const Jl=new mo(Ha.comparator),Zl=new vo(Ha.comparator);function ec(){let e=Zl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const tc=new vo(Ma);function nc(){return tc}function rc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:io(t)?"-0":t}}function sc(e){return{integerValue:""+e}}function ic(e,t){return ao(t)?sc(t):rc(e,t)}class ac{constructor(){this._=void 0}}function oc(e,t,n){return e instanceof uc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Co(t)&&(t=jo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dc?hc(e,t):e instanceof fc?pc(e,t):function(e,t){const n=cc(e,t),r=gc(n)+gc(e.Pe);return Bo(n)&&Bo(e.Pe)?sc(r):rc(e.serializer,r)}(e,t)}function lc(e,t,n){return e instanceof dc?hc(e,t):e instanceof fc?pc(e,t):n}function cc(e,t){return e instanceof mc?function(e){return Bo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class uc extends ac{}class dc extends ac{constructor(e){super(),this.elements=e}}function hc(e,t){const n=yc(t);for(const r of e.elements)n.some(e=>Po(e,r))||n.push(r);return{arrayValue:{values:n}}}class fc extends ac{constructor(e){super(),this.elements=e}}function pc(e,t){let n=yc(t);for(const r of e.elements)n=n.filter(e=>!Po(e,r));return{arrayValue:{values:n}}}class mc extends ac{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function gc(e){return ko(e.integerValue||e.doubleValue)}function yc(e){return $o(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vc{constructor(e,t){this.version=e,this.transformResults=t}}class bc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bc}static exists(e){return new bc(void 0,e)}static updateTime(e){return new bc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class wc{}function Nc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Rc(e.key,bc.none()):new Cc(e.key,e.data,bc.none());{const n=e.data,r=Xo.empty();let s=new vo(qa.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new jc(e.key,r,new xo(s.toArray()),bc.none())}}function _c(e,t,n){e instanceof Cc?function(e,t,n){const r=e.value.clone(),s=Ic(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jc?function(e,t,n){if(!xc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ic(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Tc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ec(e,t,n,r){return e instanceof Cc?function(e,t,n,r){if(!xc(e.precondition,t))return n;const s=e.value.clone(),i=Ac(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof jc?function(e,t,n,r){if(!xc(e.precondition,t))return n;const s=Ac(e.fieldTransforms,r,t),i=t.data;return i.setAll(Tc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return xc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=cc(r.transform,e||null);null!=s&&(null===n&&(n=Xo.empty()),n.set(r.field,s))}return n||null}function Sc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fa(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dc&&t instanceof dc||e instanceof fc&&t instanceof fc?Fa(e.elements,t.elements,Po):e instanceof mc&&t instanceof mc?Po(e.Pe,t.Pe):e instanceof uc&&t instanceof uc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Cc extends wc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jc extends wc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Tc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ic(e,t,n){const r=new Map;Na(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,lc(a,o,n[s]))}return r}function Ac(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,oc(e,i,t))}return r}class Rc extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oc extends wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&_c(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ec(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ec(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Xl();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Nc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Va.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ec())}isEqual(e){return this.batchId===e.batchId&&Fa(this.mutations,e.mutations,(e,t)=>Sc(e,t))&&Fa(this.baseMutations,e.baseMutations,(e,t)=>Sc(e,t))}}class Lc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Na(e.mutations.length===n.length);let r=Jl;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Lc(e,t,n,r)}}class Dc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fc,Uc;function Vc(e){switch(e){default:return wa();case Ea.CANCELLED:case Ea.UNKNOWN:case Ea.DEADLINE_EXCEEDED:case Ea.RESOURCE_EXHAUSTED:case Ea.INTERNAL:case Ea.UNAVAILABLE:case Ea.UNAUTHENTICATED:return!1;case Ea.INVALID_ARGUMENT:case Ea.NOT_FOUND:case Ea.ALREADY_EXISTS:case Ea.PERMISSION_DENIED:case Ea.FAILED_PRECONDITION:case Ea.ABORTED:case Ea.OUT_OF_RANGE:case Ea.UNIMPLEMENTED:case Ea.DATA_LOSS:return!0}}function zc(e){if(void 0===e)return va("GRPC error has no .code"),Ea.UNKNOWN;switch(e){case Fc.OK:return Ea.OK;case Fc.CANCELLED:return Ea.CANCELLED;case Fc.UNKNOWN:return Ea.UNKNOWN;case Fc.DEADLINE_EXCEEDED:return Ea.DEADLINE_EXCEEDED;case Fc.RESOURCE_EXHAUSTED:return Ea.RESOURCE_EXHAUSTED;case Fc.INTERNAL:return Ea.INTERNAL;case Fc.UNAVAILABLE:return Ea.UNAVAILABLE;case Fc.UNAUTHENTICATED:return Ea.UNAUTHENTICATED;case Fc.INVALID_ARGUMENT:return Ea.INVALID_ARGUMENT;case Fc.NOT_FOUND:return Ea.NOT_FOUND;case Fc.ALREADY_EXISTS:return Ea.ALREADY_EXISTS;case Fc.PERMISSION_DENIED:return Ea.PERMISSION_DENIED;case Fc.FAILED_PRECONDITION:return Ea.FAILED_PRECONDITION;case Fc.ABORTED:return Ea.ABORTED;case Fc.OUT_OF_RANGE:return Ea.OUT_OF_RANGE;case Fc.UNIMPLEMENTED:return Ea.UNIMPLEMENTED;case Fc.DATA_LOSS:return Ea.DATA_LOSS;default:return wa()}}(Uc=Fc||(Fc={}))[Uc.OK=0]="OK",Uc[Uc.CANCELLED=1]="CANCELLED",Uc[Uc.UNKNOWN=2]="UNKNOWN",Uc[Uc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uc[Uc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uc[Uc.NOT_FOUND=5]="NOT_FOUND",Uc[Uc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uc[Uc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uc[Uc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uc[Uc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uc[Uc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uc[Uc.ABORTED=10]="ABORTED",Uc[Uc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uc[Uc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uc[Uc.INTERNAL=13]="INTERNAL",Uc[Uc.UNAVAILABLE=14]="UNAVAILABLE",Uc[Uc.DATA_LOSS=15]="DATA_LOSS";let Bc=null;function $c(){return new TextEncoder}const qc=new Ji([4294967295,4294967295],0);function Hc(e){const t=$c().encode(e),n=new Zi;return n.update(t),new Uint8Array(n.digest())}function Wc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ji([n,r],0),new Ji([s,i],0)]}class Kc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(n<0)throw new Gc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Gc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ji.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ji.fromNumber(n)));return 1===r.compare(qc)&&(r=new Ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Hc(e),[n,r]=Wc(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Kc(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=Hc(e),[n,r]=Wc(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qc{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qc(Va.min(),r,new mo(Ma),Hl(),ec())}}class Xc{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xc(n,t,ec(),ec(),ec())}}class Yc{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Jc{constructor(e,t){this.targetId=e,this.me=t}}class Zc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:No.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class eu{constructor(){this.fe=0,this.ge=ru(),this.pe=No.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ec(),t=ec(),n=ec();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wa()}}),new Xc(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=ru()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Na(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tu{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hl(),this.qe=nu(),this.Qe=new mo(Ma)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:wa()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(kl(s))if(0===n){const e=new Ha(s.path);this.Ue(t,e,Jo.newNoDocument(e,Va.min()))}else Na(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Bc||Bc.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=So(n).toUint8Array()}catch(e){if(e instanceof wo)return ba("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Kc(i,r,s)}catch(e){return ba(e instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&kl(s.target)){const t=new Ha(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Jo.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=ec();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Qc(e,t,this.Qe,this.ke,n);return this.ke=Hl(),this.qe=nu(),this.Qe=new mo(Ma),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new eu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vo(Ma),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ya("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nu(){return new mo(Ha.comparator)}function ru(){return new mo(Ha.comparator)}const su={asc:"ASCENDING",desc:"DESCENDING"},iu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},au={and:"AND",or:"OR"};class ou{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lu(e,t){return e.useProto3Json||so(t)?t:{value:t}}function cu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function du(e,t){return cu(e,t.toTimestamp())}function hu(e){return Na(!!e),Va.fromTimestamp(function(e){const t=Eo(e);return new Ua(t.seconds,t.nanos)}(e))}function fu(e,t){return pu(e,t).canonicalString()}function pu(e,t){const n=function(e){return new Ba(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function mu(e){const t=Ba.fromString(e);return Na(Lu(t)),t}function gu(e,t){return fu(e.databaseId,t.path)}function yu(e,t){const n=mu(t);if(n.get(1)!==e.databaseId.projectId)throw new ka(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ka(Ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ha(wu(n))}function vu(e,t){return fu(e.databaseId,t)}function bu(e){const t=mu(e);return 4===t.length?Ba.emptyPath():wu(t)}function xu(e){return new Ba(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wu(e){return Na(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nu(e,t,n){return{name:gu(e,t),fields:n.value.mapValue.fields}}function _u(e,t){let n;if(t instanceof Cc)n={update:Nu(e,t.key,t.value)};else if(t instanceof Rc)n={delete:gu(e,t.key)};else if(t instanceof jc)n={update:Nu(e,t.key,t.data),updateMask:Pu(t.fieldMask)};else{if(!(t instanceof Oc))return wa();n={verify:gu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof uc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw wa()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:du(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:wa()}(e,t.precondition)),n}function Eu(e,t){return{documents:[vu(e,t.path)]}}function ku(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vu(e,s);const i=function(e){if(0!==e.length)return Ou(al.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Au(e.field),direction:ju(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=lu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Su(e){let t=bu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Na(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Cu(e);return t instanceof al&&ll(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new nl(Ru(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,so(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Zo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Zo(n,t)}(n.endAt)),Cl(t,s,a,i,o,"F",l,c)}function Cu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ru(e.unaryFilter.field);return il.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ru(e.unaryFilter.field);return il.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ru(e.unaryFilter.field);return il.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ru(e.unaryFilter.field);return il.create(s,"!=",{nullValue:"NULL_VALUE"});default:return wa()}}(e):void 0!==e.fieldFilter?function(e){return il.create(Ru(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return al.create(e.compositeFilter.filters.map(e=>Cu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return wa()}}(e.compositeFilter.op))}(e):wa()}function ju(e){return su[e]}function Tu(e){return iu[e]}function Iu(e){return au[e]}function Au(e){return{fieldPath:e.canonicalString()}}function Ru(e){return qa.fromServerFormat(e.fieldPath)}function Ou(e){return e instanceof il?function(e){if("=="===e.op){if(Ho(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NAN"}};if(qo(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ho(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NAN"}};if(qo(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(e.field),op:Tu(e.op),value:e.value}}}(e):e instanceof al?function(e){const t=e.getFilters().map(e=>Ou(e));return 1===t.length?t[0]:{compositeFilter:{op:Iu(e.op),filters:t}}}(e):wa()}function Pu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Lu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Du{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Va.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Va.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:No.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mu{constructor(e){this.ct=e}}function Fu(e){const t=Su({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ll(t,t.limit,"L"):t}class Uu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ko(e.integerValue));else if("doubleValue"in e){const n=ko(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),io(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Eo(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(So(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Qo(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ko(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):wa()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(ko(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ha.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Uu.vt=new Uu;class Vu{constructor(){this.un=new zu}addToCollectionParentIndex(e,t){return this.un.add(t),eo.resolve()}getCollectionParents(e,t){return eo.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return eo.resolve()}deleteFieldIndex(e,t){return eo.resolve()}deleteAllFieldIndexes(e){return eo.resolve()}createTargetIndexes(e,t){return eo.resolve()}getDocumentsMatchingTarget(e,t){return eo.resolve(null)}getIndexType(e,t){return eo.resolve(0)}getFieldIndexes(e,t){return eo.resolve([])}getNextCollectionGroupToUpdate(e){return eo.resolve(null)}getMinOffset(e,t){return eo.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,t){return eo.resolve(Qa.min())}updateCollectionGroup(e,t,n){return eo.resolve()}updateIndexEntries(e,t){return eo.resolve()}}class zu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new vo(Ba.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new vo(Ba.comparator)).toArray()}}new Uint8Array(0);class Bu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Bu(e,Bu.DEFAULT_COLLECTION_PERCENTILE,Bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Bu.DEFAULT_COLLECTION_PERCENTILE=10,Bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bu.DEFAULT=new Bu(41943040,Bu.DEFAULT_COLLECTION_PERCENTILE,Bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bu.DISABLED=new Bu(-1,0,0);class $u{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $u(0)}static kn(){return new $u(-1)}}class qu{constructor(){this.changes=new $l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?eo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ec(n.mutation,e,xo.empty(),Ua.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ec()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ec();const r=Ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Kl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ql();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ec()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Hl();const i=Yl(),a=Yl();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof jc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ec(a.mutation,t,a.mutation.getFieldMask(),Ua.now())):i.set(t.key,xo.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Hu(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Yl();let r=new mo((e,t)=>e-t),s=ec();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||xo.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ec()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Xl();l.forEach(e=>{if(!s.has(e)){const r=Nc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return eo.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ha.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Il(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):eo.resolve(Ql());let a=-1,o=s;return i.next(t=>eo.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?eo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ec())).next(e=>({batchId:a,changes:Gl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ha(t)).next(e=>{let t=Kl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Kl();return this.indexManager.getCollectionParents(e,s).next(a=>eo.forEach(a,a=>{const o=function(e,t){return new Sl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Jo.newInvalidDocument(r)))});let n=Kl();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ec(i.mutation,r,xo.empty(),Ua.now()),Ul(t,r)&&(n=n.insert(e,r))}),n})}}class Ku{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return eo.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:hu(e.createTime)}}(t)),eo.resolve()}getNamedQuery(e,t){return eo.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Fu(e.bundledQuery),readTime:hu(e.readTime)}}(t)),eo.resolve()}}class Gu{constructor(){this.overlays=new mo(Ha.comparator),this.Ir=new Map}getOverlay(e,t){return eo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ql();return eo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),eo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),eo.resolve()}getOverlaysForCollection(e,t,n){const r=Ql(),s=t.length+1,i=new Ha(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return eo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new mo((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Ql(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Ql(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return eo.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Dc(t,n));let s=this.Ir.get(t);void 0===s&&(s=ec(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Qu{constructor(){this.sessionToken=No.EMPTY_BYTE_STRING}getSessionToken(e){return eo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,eo.resolve()}}class Xu{constructor(){this.Tr=new vo(Yu.Er),this.dr=new vo(Yu.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Yu(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Yu(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Ha(new Ba([])),n=new Yu(t,e),r=new Yu(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ha(new Ba([])),n=new Yu(t,e),r=new Yu(t,e+1);let s=ec();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Yu(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Yu{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ha.comparator(e.key,t.key)||Ma(e.wr,t.wr)}static Ar(e,t){return Ma(e.wr,t.wr)||Ha.comparator(e.key,t.key)}}class Ju{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vo(Yu.Er)}checkEmpty(e){return eo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Pc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Yu(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return eo.resolve(i)}lookupMutationBatch(e,t){return eo.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return eo.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return eo.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return eo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Yu(t,0),r=new Yu(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),eo.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vo(Ma);return t.forEach(e=>{const t=new Yu(e,0),r=new Yu(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),eo.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ha.isDocumentKey(s)||(s=s.child(""));const i=new Yu(new Ha(s),0);let a=new vo(Ma);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),eo.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Na(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return eo.forEach(t.mutations,r=>{const s=new Yu(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Yu(t,0),r=this.br.firstAfterOrEqual(n);return eo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,eo.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zu{constructor(e){this.Mr=e,this.docs=new mo(Ha.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return eo.resolve(n?n.document.mutableCopy():Jo.newInvalidDocument(t))}getEntries(e,t){let n=Hl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Jo.newInvalidDocument(e))}),eo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Hl();const i=t.path,a=new Ha(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Xa(Ga(a),n)<=0||(r.has(a.key)||Ul(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return eo.resolve(s)}getAllFromCollectionGroup(e,t,n,r){wa()}Or(e,t){return eo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ed(this)}getSize(e){return eo.resolve(this.size)}}class ed extends qu{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),eo.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class td{constructor(e){this.persistence=e,this.Nr=new $l(e=>_l(e),El),this.lastRemoteSnapshotVersion=Va.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xu,this.targetCount=0,this.kr=$u.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),eo.resolve()}getLastRemoteSnapshotVersion(e){return eo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return eo.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),eo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),eo.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new $u(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,eo.resolve()}updateTargetData(e,t){return this.Kn(t),eo.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,eo.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),eo.waitFor(s).next(()=>r)}getTargetCount(e){return eo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return eo.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),eo.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),eo.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),eo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return eo.resolve(n)}containsKey(e,t){return eo.resolve(this.Br.containsKey(t))}}class nd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ro(0),this.Kr=!1,this.Kr=!0,this.$r=new Qu,this.referenceDelegate=e(this),this.Ur=new td(this),this.indexManager=new Vu,this.remoteDocumentCache=function(e){return new Zu(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Mu(t),this.Gr=new Ku(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Ju(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){ya("MemoryPersistence","Starting transaction:",e);const r=new rd(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return eo.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class rd extends Ja{constructor(e){super(),this.currentSequenceNumber=e}}class sd{constructor(e){this.persistence=e,this.Jr=new Xu,this.Yr=null}static Zr(e){return new sd(e)}get Xr(){if(this.Yr)return this.Yr;throw wa()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),eo.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),eo.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),eo.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eo.forEach(this.Xr,n=>{const r=Ha.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Va.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return eo.or([()=>eo.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class id{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ec(),r=ec();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new id(e,t.fromCache,n,r)}}class ad{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class od{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Xe()?8:to(Qe())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new ad;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ga()<=pt.DEBUG&&ya("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),eo.resolve()):(ga()<=pt.DEBUG&&ya("QueryEngine","Query:",Fl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ga()<=pt.DEBUG&&ya("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rl(t))):eo.resolve())}Yi(e,t){if(Tl(t))return eo.resolve(null);let n=Rl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ll(t,null,"F"),n=Rl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ec(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,Ll(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Tl(t)||r.isEqual(Va.min())?eo.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?eo.resolve(null):(ga()<=pt.DEBUG&&ya("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fl(t)),this.rs(e,i,t,Ka(r,-1)).next(e=>e))})}ts(e,t){let n=new vo(zl(e));return t.forEach((t,r)=>{Ul(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return ga()<=pt.DEBUG&&ya("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Qa.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ld{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new mo(Ma),this._s=new $l(e=>_l(e),El),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function cd(e,t,n,r){return new ld(e,t,n,r)}async function ud(e,t){const n=_a(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ec();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function dd(e){const t=_a(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function hd(e,t,n){let r=ec(),s=ec();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Hl();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Va.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ya("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function fd(e,t){const n=_a(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function pd(e,t){const n=_a(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,eo.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new Du(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function md(e,t,n){const r=_a(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!no(e))throw e;ya("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function gd(e,t,n){const r=_a(e);let s=Va.min(),i=ec();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=_a(e),s=r._s.get(n);return void 0!==s?eo.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Rl(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:Va.min(),n?i:ec())).next(e=>(yd(r,Vl(t),e),{documents:e,Ts:i})))}function yd(e,t,n){let r=e.us.get(t)||Va.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class vd{constructor(){this.activeTargetIds=nc()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bd{constructor(){this.so=new vd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xd{_o(e){}shutdown(){}}class wd{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ya("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ya("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nd=null;function _d(){return null===Nd?Nd=268435456+Math.round(2147483648*Math.random()):Nd++,"0x"+Nd.toString(16)}const Ed={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kd{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Sd="WebChannelConnection";class Cd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,s){const i=_d(),a=this.xo(e,t.toUriEncodedString());ya("RestConnection",`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(ya("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw ba("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Ed[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=_d();return new Promise((i,a)=>{const o=new na;o.setWithCredentials(!0),o.listenOnce(sa.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ia.NO_ERROR:const t=o.getResponseJson();ya(Sd,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case ia.TIMEOUT:ya(Sd,`RPC '${e}' ${s} timed out`),a(new ka(Ea.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const n=o.getStatus();if(ya(Sd,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ea).indexOf(t)>=0?t:Ea.UNKNOWN}(t.status);a(new ka(e,t.message))}else a(new ka(Ea.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ka(Ea.UNAVAILABLE,"Connection failed."));break;default:wa()}}finally{ya(Sd,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);ya(Sd,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=_d(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ca(),a=la(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ya(Sd,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new kd({Io:t=>{h?ya(Sd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(ya(Sd,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),ya(Sd,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ra.EventType.OPEN,()=>{h||(ya(Sd,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,ra.EventType.CLOSE,()=>{h||(h=!0,ya(Sd,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,ra.EventType.ERROR,t=>{h||(h=!0,ba(Sd,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new ka(Ea.UNAVAILABLE,"The operation could not be completed")))}),p(u,ra.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Na(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ya(Sd,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Fc[e];if(void 0!==t)return zc(t)}(t),s=a.message;void 0===n&&(n=Ea.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new ka(n,s)),u.close()}else ya(Sd,`RPC '${e}' stream ${r} received:`,s),f.bo(s)}}),p(a,oa.STAT_EVENT,t=>{t.stat===aa.PROXY?ya(Sd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===aa.NOPROXY&&ya(Sd,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function jd(){return"undefined"!=typeof document?document:null}function Td(e){return new ou(e,!0)}class Id{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&ya("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ad{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Id(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ea.RESOURCE_EXHAUSTED?(va(t.toString()),va("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ea.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new ka(Ea.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ya("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ya("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rd extends Ad{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:wa()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Na(void 0===t||"string"==typeof t),No.fromBase64String(t||"")):(Na(void 0===t||t instanceof Buffer||t instanceof Uint8Array),No.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ea.UNKNOWN:zc(e.code);return new ka(t,e.message||"")}(a);n=new Zc(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=yu(e,r.document.name),i=hu(r.document.updateTime),a=r.document.createTime?hu(r.document.createTime):Va.min(),o=new Xo({mapValue:{fields:r.document.fields}}),l=Jo.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=yu(e,r.document),i=r.readTime?hu(r.readTime):Va.min(),a=Jo.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Yc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=yu(e,r.document),i=r.removedTargetIds||[];n=new Yc([],i,s,null)}else{if(!("filter"in t))return wa();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Mc(r,s),a=e.targetId;n=new Jc(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Va.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Va.min():t.readTime?hu(t.readTime):Va.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=xu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=kl(r)?{documents:Eu(e,r)}:{query:ku(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=uu(e,t.resumeToken);const r=lu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Va.min())>0){n.readTime=cu(e,t.snapshotVersion.toTimestamp());const r=lu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wa()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=xu(this.serializer),t.removeTarget=e,this.a_(t)}}class Od extends Ad{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Na(!!e.streamToken),this.lastStreamToken=e.streamToken,Na(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Na(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Na(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?hu(e.updateTime):hu(t);return n.isEqual(Va.min())&&(n=hu(t)),new vc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=hu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=xu(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>_u(this.serializer,e))};this.a_(t)}}class Pd extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ka(Ea.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,pu(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ka(Ea.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,pu(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ka(Ea.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ld{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(va(t),this.D_=!1):ya("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Dd{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Hd(this)&&(ya("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=_a(e);t.L_.add(4),await Fd(t),t.q_.set("Unknown"),t.L_.delete(4),await Md(t)}(this))})}),this.q_=new Ld(n,r)}}async function Md(e){if(Hd(e))for(const t of e.B_)await t(!0)}async function Fd(e){for(const t of e.B_)await t(!1)}function Ud(e,t){const n=_a(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),qd(n)?$d(n):uh(n).r_()&&zd(n,t))}function Vd(e,t){const n=_a(e),r=uh(n);n.N_.delete(t),r.r_()&&Bd(n,t),0===n.N_.size&&(r.r_()?r.o_():Hd(n)&&n.q_.set("Unknown"))}function zd(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Va.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uh(e).A_(t)}function Bd(e,t){e.Q_.xe(t),uh(e).R_(t)}function $d(e){e.Q_=new tu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),uh(e).start(),e.q_.v_()}function qd(e){return Hd(e)&&!uh(e).n_()&&e.N_.size>0}function Hd(e){return 0===_a(e).L_.size}function Wd(e){e.Q_=void 0}async function Kd(e){e.q_.set("Online")}async function Gd(e){e.N_.forEach((t,n)=>{zd(e,t)})}async function Qd(e,t){Wd(e),qd(e)?(e.q_.M_(t),$d(e)):e.q_.set("Unknown")}async function Xd(e,t,n){if(e.q_.set("Online"),t instanceof Zc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){ya("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Yd(e,n)}else if(t instanceof Yc?e.Q_.Ke(t):t instanceof Jc?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Va.min()))try{const t=await dd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(No.EMPTY_BYTE_STRING,r.snapshotVersion)),Bd(e,t);const s=new Du(r.target,t,n,r.sequenceNumber);zd(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ya("RemoteStore","Failed to raise snapshot:",t),await Yd(e,t)}}async function Yd(e,t,n){if(!no(t))throw t;e.L_.add(1),await Fd(e),e.q_.set("Offline"),n||(n=()=>dd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ya("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Md(e)})}function Jd(e,t){return t().catch(n=>Yd(e,n,t))}async function Zd(e){const t=_a(e),n=dh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;eh(t);)try{const e=await fd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,th(t,e)}catch(e){await Yd(t,e)}nh(t)&&rh(t)}function eh(e){return Hd(e)&&e.O_.length<10}function th(e,t){e.O_.push(t);const n=dh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function nh(e){return Hd(e)&&!dh(e).n_()&&e.O_.length>0}function rh(e){dh(e).start()}async function sh(e){dh(e).p_()}async function ih(e){const t=dh(e);for(const n of e.O_)t.m_(n.mutations)}async function ah(e,t,n){const r=e.O_.shift(),s=Lc.from(r,t,n);await Jd(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Zd(e)}async function oh(e,t){t&&dh(e).V_&&await async function(e,t){if(function(e){return Vc(e)&&e!==Ea.ABORTED}(t.code)){const n=e.O_.shift();dh(e).s_(),await Jd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Zd(e)}}(e,t),nh(e)&&rh(e)}async function lh(e,t){const n=_a(e);n.asyncQueue.verifyOperationInProgress(),ya("RemoteStore","RemoteStore received new credentials");const r=Hd(n);n.L_.add(3),await Fd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Md(n)}async function ch(e,t){const n=_a(e);t?(n.L_.delete(2),await Md(n)):t||(n.L_.add(2),await Fd(n),n.q_.set("Unknown"))}function uh(e){return e.K_||(e.K_=function(e,t,n){const r=_a(e);return r.w_(),new Rd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Kd.bind(null,e),Ro:Gd.bind(null,e),mo:Qd.bind(null,e),d_:Xd.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),qd(e)?$d(e):e.q_.set("Unknown")):(await e.K_.stop(),Wd(e))})),e.K_}function dh(e){return e.U_||(e.U_=function(e,t,n){const r=_a(e);return r.w_(),new Od(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sh.bind(null,e),mo:oh.bind(null,e),f_:ih.bind(null,e),g_:ah.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Zd(e)):(await e.U_.stop(),e.O_.length>0&&(ya("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class hh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new hh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ka(Ea.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fh(e,t){if(va("AsyncQueue",`${t}: ${e}`),no(e))return new ka(Ea.UNAVAILABLE,`${t}: ${e}`);throw e}class ph{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ha.comparator(t.key,n.key):(e,t)=>Ha.comparator(e.key,t.key),this.keyedMap=Kl(),this.sortedSet=new mo(this.comparator)}static emptySet(e){return new ph(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ph))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ph;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class mh{constructor(){this.W_=new mo(Ha.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):wa():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class gh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new gh(e,t,ph.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class yh{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vh{constructor(){this.queries=bh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=_a(e),r=n.queries;n.queries=bh(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new ka(Ea.ABORTED,"Firestore shutting down"))}}function bh(){return new $l(e=>Ml(e),Dl)}async function xh(e,t){const n=_a(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new yh,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=fh(e,`Initialization of query '${Fl(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Eh(n)}async function wh(e,t){const n=_a(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Nh(e,t){const n=_a(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Eh(n)}function _h(e,t,n){const r=_a(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Eh(e){e.Y_.forEach(e=>{e.next()})}var kh,Sh;(Sh=kh||(kh={})).ea="default",Sh.Cache="cache";class Ch{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new gh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kh.Cache}}class jh{constructor(e){this.key=e}}class Th{constructor(e){this.key=e}}class Ih{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ec(),this.mutatedKeys=ec(),this.Aa=zl(e),this.Ra=new ph(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new mh,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ul(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wa()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new gh(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ec(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Th(e))}),this.da.forEach(n=>{e.has(n)||t.push(new jh(n))}),t}ba(e){this.Ta=e.Ts,this.da=ec();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return gh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Ah{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Rh{constructor(e){this.key=e,this.va=!1}}class Oh{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new $l(e=>Ml(e),Dl),this.Ma=new Map,this.xa=new Set,this.Oa=new mo(Ha.comparator),this.Na=new Map,this.La=new Xu,this.Ba={},this.ka=new Map,this.qa=$u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Ph(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tf(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Dh(r,t,n,!0),s}async function Lh(e,t){const n=tf(e);await Dh(n,t,!0,!1)}async function Dh(e,t,n,r){const s=await pd(e.localStore,Rl(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Mh(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Ud(e.remoteStore,s),o}async function Mh(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await gd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Qh(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await gd(e.localStore,t,!0),a=new Ih(t,i.Ts),o=a.ma(i.documents),l=Xc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Qh(e,n,c.wa);const u=new Ah(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Fh(e,t,n){const r=_a(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!Dl(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await md(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Vd(r.remoteStore,s.targetId),Kh(r,s.targetId)}).catch(Za)):(Kh(r,s.targetId),await md(r.localStore,s.targetId,!0))}async function Uh(e,t){const n=_a(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vd(n.remoteStore,r.targetId))}async function Vh(e,t){const n=_a(e);try{const e=await function(e,t){const n=_a(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(No.EMPTY_BYTE_STRING,Va.min()).withLastLimboFreeSnapshotVersion(Va.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=Hl(),l=ec();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(hd(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Va.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return eo.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Na(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Na(r.va):e.removedDocuments.size>0&&(Na(r.va),r.va=!1))}),await Jh(n,e,t)}catch(e){await Za(e)}}function zh(e,t,n){const r=_a(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=_a(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Eh(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bh(e,t,n){const r=_a(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new mo(Ha.comparator);e=e.insert(i,Jo.newNoDocument(i,Va.min()));const n=ec().add(i),s=new Qc(Va.min(),new Map,new mo(Ma),e,n);await Vh(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),Yh(r)}else await md(r.localStore,t,!1).then(()=>Kh(r,t,n)).catch(Za)}async function $h(e,t){const n=_a(e),r=t.batch.batchId;try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=eo.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Na(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ec();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Wh(n,r,null),Hh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jh(n,e)}catch(e){await Za(e)}}async function qh(e,t,n){const r=_a(e);try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Na(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Wh(r,t,n),Hh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Jh(r,e)}catch(n){await Za(n)}}function Hh(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Wh(e,t,n){const r=_a(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function Kh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Gh(e,t)})}function Gh(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Vd(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Yh(e))}function Qh(e,t,n){for(const r of n)r instanceof jh?(e.La.addReference(r.key,t),Xh(e,r)):r instanceof Th?(ya("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Gh(e,r.key)):wa()}function Xh(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(ya("SyncEngine","New document in limbo: "+n),e.xa.add(r),Yh(e))}function Yh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ha(Ba.fromString(t)),r=e.qa.next();e.Na.set(r,new Rh(n)),e.Oa=e.Oa.insert(n,r),Ud(e.remoteStore,new Du(Rl(jl(n.path)),r,"TargetPurposeLimboResolution",ro.oe))}}async function Jh(e,t,n){const r=_a(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=id.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=_a(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>eo.forEach(t,t=>eo.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>eo.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!no(e))throw e;ya("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function Zh(e,t){const n=_a(e);if(!n.currentUser.isEqual(t)){ya("SyncEngine","User change. New user:",t.toKey());const e=await ud(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new ka(Ea.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Jh(n,e.hs)}}function ef(e,t){const n=_a(e),r=n.Na.get(t);if(r&&r.va)return ec().add(r.key);{let e=ec();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function tf(e){const t=_a(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ef.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bh.bind(null,t),t.Ca.d_=Nh.bind(null,t.eventManager),t.Ca.$a=_h.bind(null,t.eventManager),t}function nf(e){const t=_a(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$h.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qh.bind(null,t),t}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return cd(this.persistence,new od,e.initialUser,this.serializer)}Ga(e){return new nd(sd.Zr,this.serializer)}Wa(e){return new bd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class sf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zh.bind(null,this.syncEngine),await ch(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vh}createDatastore(e){const t=Td(e.databaseInfo.databaseId),n=function(e){return new Cd(e)}(e.databaseInfo);return function(e,t,n,r){return new Pd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Dd(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>zh(this.syncEngine,e,0),wd.D()?new wd:new xd)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Oh(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=_a(e);ya("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Fd(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}sf.provider={build:()=>new sf};class af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):va("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class of{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=fa.UNAUTHENTICATED,this.clientId=Da.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{ya("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ya("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=fh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function lf(e,t){e.asyncQueue.verifyOperationInProgress(),ya("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ud(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function cf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uf(e);ya("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>lh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>lh(t.remoteStore,n)),e._onlineComponents=t}async function uf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ya("FirestoreClient","Using user provided OfflineComponentProvider");try{await lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ea.FAILED_PRECONDITION||e.code===Ea.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ba("Error using user provided cache. Falling back to memory cache: "+n),await lf(e,new rf)}}else ya("FirestoreClient","Using default OfflineComponentProvider"),await lf(e,new rf);return e._offlineComponents}async function df(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ya("FirestoreClient","Using user provided OnlineComponentProvider"),await cf(e,e._uninitializedComponentsProvider._online)):(ya("FirestoreClient","Using default OnlineComponentProvider"),await cf(e,new sf))),e._onlineComponents}function hf(e){return df(e).then(e=>e.syncEngine)}async function ff(e){const t=await df(e),n=t.eventManager;return n.onListen=Ph.bind(null,t.syncEngine),n.onUnlisten=Fh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Lh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Uh.bind(null,t.syncEngine),n}function pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new af({next:o=>{i.Za(),t.enqueueAndForget(()=>wh(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new ka(Ea.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new ka(Ea.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Ch(jl(n.path),i,{includeMetadataChanges:!0,_a:!0});return xh(e,a)}(await ff(e),e.asyncQueue,t,n,r)),r.promise}function mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Sa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new af({next:n=>{i.Za(),t.enqueueAndForget(()=>wh(e,a)),n.fromCache&&"server"===r.source?s.reject(new ka(Ea.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Ch(n,i,{includeMetadataChanges:!0,_a:!0});return xh(e,a)}(await ff(e),e.asyncQueue,t,n,r)),r.promise}function gf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yf=new Map;function vf(e,t,n){if(!n)throw new ka(Ea.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bf(e){if(!Ha.isDocumentKey(e))throw new ka(Ea.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xf(e){if(Ha.isDocumentKey(e))throw new ka(Ea.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function wf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":wa()}function Nf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ka(Ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wf(e);throw new ka(Ea.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class _f{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ka(Ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ka(Ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ka(Ea.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ka(Ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ka(Ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ka(Ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ka(Ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ka(Ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ja;switch(e.type){case"firstParty":return new Ra(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ka(Ea.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yf.get(e);t&&(ya("ComponentProvider","Removing Datastore"),yf.delete(e),t.terminate())}(this),Promise.resolve()}}function kf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Nf(e,Ef))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=fa.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ka(Ea.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fa(i)}e._authCredentials=new Ta(new Ca(t,n))}}class Sf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sf(this.firestore,e,this._query)}}class Cf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cf(this.firestore,e,this._key)}}class jf extends Sf{constructor(e,t,n){super(e,t,jl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cf(this.firestore,null,new Ha(e))}withConverter(e){return new jf(this.firestore,e,this._path)}}function Tf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=lt(e),vf("collection","path",t),e instanceof Ef){const n=Ba.fromString(t,...r);return xf(n),new jf(e,null,n)}{if(!(e instanceof Cf||e instanceof jf))throw new ka(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ba.fromString(t,...r));return xf(n),new jf(e.firestore,null,n)}}function If(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=lt(e),1===arguments.length&&(t=Da.newId()),vf("doc","path",t),e instanceof Ef){const n=Ba.fromString(t,...r);return bf(n),new Cf(e,null,new Ha(n))}{if(!(e instanceof Cf||e instanceof jf))throw new ka(Ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ba.fromString(t,...r));return bf(n),new Cf(e.firestore,e instanceof jf?e.converter:null,new Ha(n))}}class Af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Id(this,"async_queue_retry"),this.Vu=()=>{const e=jd();e&&ya("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=jd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=jd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Sa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(By){if(!no(By))throw By;ya("AsyncQueue","Operation failed with retryable error: "+By)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw va("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=hh.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&wa()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Rf extends Ef{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Af,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Af(e),this._firestoreClient=void 0,await e}}}function Of(e){if(e._terminated)throw new ka(Ea.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Pf(e),e._firestoreClient}function Pf(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Io(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new of(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Lf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lf(No.fromBase64String(e))}catch(e){throw new ka(Ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Lf(No.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Df{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ka(Ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mf{constructor(e){this._methodName=e}}class Ff{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ka(Ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ka(Ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ma(this._lat,e._lat)||Ma(this._long,e._long)}}class Uf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Vf=/^__.*__$/;class zf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cc(e,this.data,t,this.fieldTransforms)}}class Bf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $f(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wa()}}class qf{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ip(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if($f(this.Cu)&&Vf.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Hf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Td(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qf({Cu:e,methodName:t,qu:n,path:qa.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wf(e){const t=e._freezeSettings(),n=Td(e._databaseId);return new Hf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Kf(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);tp("Data must be an object, but it was:",a,r);const o=Zf(r,a);let l,c;if(i.merge)l=new xo(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=np(t,r,n);if(!a.contains(s))throw new ka(Ea.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);ap(e,s)||e.push(s)}l=new xo(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new zf(new Xo(o),l,c)}class Gf extends Mf{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function Qf(e,t,n,r){const s=e.Qu(1,t,n);tp("Data must be an object, but it was:",s,r);const i=[],a=Xo.empty();fo(r,(e,r)=>{const o=sp(t,e,n);r=lt(r);const l=s.Nu(o);if(r instanceof Gf)i.push(o);else{const e=Jf(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new xo(i);return new Bf(a,o,s.fieldTransforms)}function Xf(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[np(t,r,n)],l=[s];if(i.length%2!=0)throw new ka(Ea.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(np(t,i[h])),l.push(i[h+1]);const c=[],u=Xo.empty();for(let h=o.length-1;h>=0;--h)if(!ap(c,o[h])){const e=o[h];let t=l[h];t=lt(t);const n=a.Nu(e);if(t instanceof Gf)c.push(e);else{const r=Jf(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new xo(c);return new Bf(u,d,a.fieldTransforms)}function Yf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Jf(n,e.Qu(r?4:3,t))}function Jf(e,t){if(ep(e=lt(e)))return tp("Unsupported field value:",t,e),Zf(e,t);if(e instanceof Mf)return function(e,t){if(!$f(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Jf(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ic(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ua.fromDate(e);return{timestampValue:cu(t.serializer,n)}}if(e instanceof Ua){const n=new Ua(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cu(t.serializer,n)}}if(e instanceof Ff)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Lf)return{bytesValue:uu(t.serializer,e._byteString)};if(e instanceof Cf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:fu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Uf)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return rc(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${wf(e)}`)}(e,t)}function Zf(e,t){const n={};return po(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fo(e,(e,r)=>{const s=Jf(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function ep(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ua||e instanceof Ff||e instanceof Lf||e instanceof Cf||e instanceof Mf||e instanceof Uf)}function tp(e,t,n){if(!ep(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=wf(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function np(e,t,n){if((t=lt(t))instanceof Df)return t._internalPath;if("string"==typeof t)return sp(e,t);throw ip("Field path arguments must be of type string or ",e,!1,void 0,n)}const rp=new RegExp("[~\\*/\\[\\]]");function sp(e,t,n){if(t.search(rp)>=0)throw ip(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Df(...t.split("."))._internalPath}catch(r){throw ip(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ip(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new ka(Ea.INVALID_ARGUMENT,o+e+l)}function ap(e,t){return e.some(e=>e.isEqual(t))}class op{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lp extends op{data(){return super.data()}}function cp(e,t){return"string"==typeof t?sp(e,t):t instanceof Df?t._internalPath:t._delegate._internalPath}function up(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ka(Ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class hp extends dp{}function fp(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof dp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof gp).length,n=e.filter(e=>e instanceof pp).length;if(t>1||t>0&&n>0)throw new ka(Ea.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class pp extends hp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new pp(e,t,n)}_apply(e){const t=this._parse(e);return bp(e._query,t),new Sf(e.firestore,e.converter,Pl(e._query,t))}_parse(e){const t=Wf(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ka(Ea.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){vp(a,i);const t=[];for(const n of a)t.push(yp(r,e,n));o={arrayValue:{values:t}}}else o=yp(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||vp(a,i),o=Yf(n,t,a,"in"===i||"not-in"===i);return il.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function mp(e,t,n){const r=t,s=cp("where",e);return pp._create(s,r,n)}class gp extends dp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:al.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)bp(n,s),n=Pl(n,s)}(e._query,t),new Sf(e.firestore,e.converter,Pl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function yp(e,t,n){if("string"==typeof(n=lt(n))){if(""===n)throw new ka(Ea.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Il(t)&&-1!==n.indexOf("/"))throw new ka(Ea.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ba.fromString(n));if(!Ha.isDocumentKey(r))throw new ka(Ea.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zo(e,new Ha(r))}if(n instanceof Cf)return zo(e,n._key);throw new ka(Ea.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(n)}.`)}function vp(e,t){if(!Array.isArray(e)||0===e.length)throw new ka(Ea.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ka(Ea.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ka(Ea.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class xp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ko(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw wa()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return fo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ko(e.doubleValue));return new Uf(s)}convertGeoPoint(e){return new Ff(ko(e.latitude),ko(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=jo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(To(e));default:return null}}convertTimestamp(e){const t=Eo(e);return new Ua(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ba.fromString(e);Na(Lu(n));const r=new Ao(n.get(1),n.get(3)),s=new Ha(n.popFirst(5));return r.isEqual(t)||va(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function wp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _p extends op{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ep extends _p{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class kp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Np(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ep(this._firestore,this._userDataWriter,n.key,n,new Np(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ka(Ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ep(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Np(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ep(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Np(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Sp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Sp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wa()}}function Cp(e){e=Nf(e,Cf);const t=Nf(e.firestore,Rf);return pf(Of(t),e._key).then(n=>Lp(t,e,n))}class jp extends xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cf(this.firestore,null,t)}}function Tp(e){e=Nf(e,Sf);const t=Nf(e.firestore,Rf),n=Of(t),r=new jp(t);return up(e._query),mf(n,e._query).then(n=>new kp(t,r,e,n))}function Ip(e,t,n){e=Nf(e,Cf);const r=Nf(e.firestore,Rf),s=wp(e.converter,t,n);return Pp(r,[Kf(Wf(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,bc.none())])}function Ap(e,t,n){e=Nf(e,Cf);const r=Nf(e.firestore,Rf),s=Wf(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=lt(t))||t instanceof Df?Xf(s,"updateDoc",e._key,t,n,o):Qf(s,"updateDoc",e._key,t),Pp(r,[i.toMutation(e._key,bc.exists(!0))])}function Rp(e){return Pp(Nf(e.firestore,Rf),[new Rc(e._key,bc.none())])}function Op(e,t){const n=Nf(e.firestore,Rf),r=If(e),s=wp(e.converter,t);return Pp(n,[Kf(Wf(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,bc.exists(!1))]).then(()=>r)}function Pp(e,t){return function(e,t){const n=new Sa;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=nf(e);try{const e=await function(e,t){const n=_a(e),r=Ua.now(),s=t.reduce((e,t)=>e.add(t.key),ec());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Hl(),l=ec();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=kc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new jc(e.key,t,Yo(t.value.mapValue),bc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Gl(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new mo(Ma)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Jh(r,e.changes),await Zd(r.remoteStore)}catch(e){const t=fh(e,"Failed to persist write");n.reject(t)}}(await hf(e),t,n)),n.promise}(Of(e),t)}function Lp(e,t,n){const r=n.docs.get(t._key),s=new jp(e);return new _p(e,s,t._key,r,new Np(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){pa=e}(En),bn(new ct("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Rf(new Ia(e.getProvider("auth-internal")),new Pa(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ka(Ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cn(ha,"4.7.3",e),Cn(ha,"4.7.3","esm2017")}();const Dp=kn({apiKey:"AIzaSyDGdUSxHwKUGL4NWaQq_z6Ex4KSgxlWHig",authDomain:"e-commerce-3d587.firebaseapp.com",projectId:"e-commerce-3d587",storageBucket:"e-commerce-3d587.appspot.com",messagingSenderId:"576725083107",appId:"1:576725083107:web:9641344343363d0bb4f6d6"}),Mp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();const t=xn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=xn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(tt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Hn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Hi,persistence:[ri,Vs,Bs]}),r=Ke("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qi)return;const r=null===t||void 0===t?void 0:t.token;Xi!==r&&(Xi=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){lt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){lt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=He("auth");return i&&ls(n,`http://${i}`),n}(Dp),Fp=new Es,Up=function(e,t){const n="string"==typeof e?e:t||"(default)",r=xn("object"==typeof e?e:Sn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=He(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&kf(r,...e)}return r}(Dp);var Vp=n(579);const zp=i.createContext();function Bp(){return(0,i.useContext)(zp)}function $p(e){let{children:t}=e;const[n,r]=(0,i.useState)(),[s,a]=(0,i.useState)("");(0,i.useEffect)(()=>Mp.onAuthStateChanged(async e=>{if(r(e),e)try{const t=If(Up,"users",e.uid),n=await Cp(t);if(n.exists()){const e=n.data();a(e.role||"user")}else e.isAnonymous||(await Ip(t,{email:e.email,role:"user",createdAt:Ua.now()}),a("user"))}catch(t){console.error("Error fetching user role:",t),a("user")}else a("")}),[]);const o={currentUser:n,role:s,signup:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";const r=await async function(e,t,n){if(wn(e.app))return Promise.reject(Gn(e));const r=es(e),s=os(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Cs),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ds(e),t}),a=await js._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(Mp,e,t),s=r.user;return await Ip(If(Up,"users",s.uid),{email:s.email,role:n,createdAt:Ua.now()}),r},login:function(e,t){return function(e,t,n){return wn(e.app)?Promise.reject(Gn(e)):Ls(lt(e),xs.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ds(e),t})}(Mp,e,t)},loginAsGuest:async function(){const e=await async function(e){var t;if(wn(e.app))return Promise.reject(Gn(e));const n=es(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new js({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Cs(n,{returnSecureToken:!0}),s=await js._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}(Mp),t=e.user;return await Ip(If(Up,"users",t.uid),{email:null,role:"guest",isGuest:!0,createdAt:Ua.now(),displayName:`Guest_${t.uid.slice(-6)}`}),e},googleSignIn:function(){return async function(e,t,n){if(wn(e.app))return Promise.reject(Wn(e,"operation-not-supported-in-this-environment"));const r=es(e);Qn(e,t,ws);const s=oi(r,n);return new pi(r,"signInViaPopup",t,s).executeNotNull()}(Mp,Fp)},logout:function(){return function(e){return lt(e).signOut()}(Mp)},updateProfile:async function(e){if(!n)return;const t=If(Up,"users",n.uid);await Ap(t,e)},getProfile:async function(){if(!n)return;const e=If(Up,"users",n.uid),t=await Cp(e);return t.exists()?t.data():null},fetchBillingAndShippingInfo:async function(){if(!n)return console.warn("No current user logged in."),null;try{const e=If(Up,"users",n.uid),t=await Cp(e);return t.exists()?t.data():null}catch(e){return console.error("Error fetching billing and shipping info:",e),null}},placeOrder:async function(e){if(!n)return;const t=Tf(Up,"users",n.uid,"orders");await Op(t,e)},sendContactMessage:async function(e){try{const t=Tf(Up,"contactMessages",n.uid,"messages");await Op(t,{...e,createdAt:Ua.now()})}catch(t){throw console.error("Error sending contact message:",t),t}}};return(0,Vp.jsx)(zp.Provider,{value:o,children:t})}const qp=e=>{let{isOpen:t,onClose:n,title:r,message:s,details:i}=e;return t?(0,Vp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Vp.jsxs)("div",{className:"flex items-center",children:[(0,Vp.jsx)("div",{className:"flex-shrink-0",children:(0,Vp.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Vp.jsx)("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r||"Error"})]}),(0,Vp.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Vp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("p",{className:"text-gray-700 mb-4",children:s}),i&&(0,Vp.jsx)("div",{className:"bg-gray-50 rounded-md p-3",children:(0,Vp.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:i})})]}),(0,Vp.jsx)("div",{className:"flex justify-end px-6 py-4 border-t border-gray-200",children:(0,Vp.jsx)("button",{onClick:n,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"OK"})})]})}):null},Hp=e=>{let{isOpen:t,onClose:n,title:r,message:s}=e;return t?(0,Vp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Vp.jsxs)("div",{className:"flex items-center",children:[(0,Vp.jsx)("div",{className:"flex-shrink-0",children:(0,Vp.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vp.jsx)("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r||"Success"})]}),(0,Vp.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Vp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vp.jsx)("div",{className:"p-6",children:(0,Vp.jsx)("p",{className:"text-gray-700",children:s})}),(0,Vp.jsx)("div",{className:"flex justify-end px-6 py-4 border-t border-gray-200",children:(0,Vp.jsx)("button",{onClick:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"OK"})})]})}):null},Wp=e=>{let{isOpen:t,onClose:n,title:r,message:s,actionType:a="signin"}=e;const[o,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[b,x]=(0,i.useState)({isOpen:!1,title:"",message:""}),{login:w,signup:N,loginAsGuest:_}=Bp();if(!t)return null;return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:(0,Vp.jsxs)("div",{className:"bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-2xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto border border-blue-100 animate-scale-in",children:[(0,Vp.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,Vp.jsx)("div",{className:"absolute top-0 left-0 w-20 h-20 bg-blue-400 rounded-full blur-xl"}),(0,Vp.jsx)("div",{className:"absolute top-10 right-0 w-16 h-16 bg-purple-400 rounded-full blur-xl"}),(0,Vp.jsx)("div",{className:"absolute bottom-0 left-10 w-12 h-12 bg-pink-400 rounded-full blur-xl"})]}),(0,Vp.jsxs)("div",{className:"relative flex items-center justify-between p-6 border-b border-blue-200 bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-2xl",children:[(0,Vp.jsxs)("div",{className:"flex items-center",children:[(0,Vp.jsx)("div",{className:"flex-shrink-0",children:(0,Vp.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur-sm",children:(0,Vp.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),(0,Vp.jsx)("h3",{className:"ml-4 text-xl font-bold text-white",children:r||(()=>{switch(a){case"favorites":return"Save Your Favorites! \ud83d\udc96";case"reviews":return"Share Your Thoughts! \u2b50";case"checkout":return"Complete Your Purchase! \ud83d\uded2";case"profile":return"Access Your Profile! \ud83d\udc64";default:return"Join Our Community! \ud83d\ude80"}})()})]}),(0,Vp.jsx)("button",{onClick:n,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-full hover:bg-white hover:bg-opacity-20",children:(0,Vp.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Vp.jsxs)("div",{className:"relative p-6",children:[(0,Vp.jsx)("p",{className:"text-gray-700 mb-6 text-center leading-relaxed",children:(()=>{switch(a){case"favorites":return"Create an account to save your favorite products and access them across all your devices. Never lose track of what you love!";case"reviews":return"Share your experiences and help other customers make informed decisions. Your voice matters to our community!";case"checkout":return"Sign in to complete your purchase and track your orders. We'll keep you updated every step of the way!";case"profile":return"Access your profile, order history, and account settings. Manage everything in one place!";default:return s||"Join thousands of happy customers and unlock amazing features!"}})()}),(0,Vp.jsxs)("div",{className:"flex mb-6 bg-gray-100 rounded-xl p-1",children:[(0,Vp.jsx)("button",{onClick:()=>l(!0),className:"flex-1 py-3 px-4 text-sm font-medium rounded-lg transition-all duration-300 "+(o?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-transparent text-gray-600 hover:text-gray-800"),children:(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})}),(0,Vp.jsx)("button",{onClick:()=>l(!1),className:"flex-1 py-3 px-4 text-sm font-medium rounded-lg transition-all duration-300 "+(o?"bg-transparent text-gray-600 hover:text-gray-800":"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-lg transform scale-105"),children:(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),o&&(0,Vp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{await w(c,d),x({isOpen:!0,title:"Welcome Back! \ud83c\udf89",message:"Successfully signed in! You can now enjoy all our features."}),setTimeout(()=>{n()},1500)}catch(t){let e="Failed to sign in. Please try again.";"auth/invalid-login-credentials"===t.code?e="Invalid email or password. Please check your credentials.":"auth/user-not-found"===t.code?e="No account found with this email. Please sign up instead.":"auth/too-many-requests"===t.code&&(e="Too many failed attempts. Please try again later."),v({isOpen:!0,title:"Oops! \ud83d\ude05",message:e,details:t.message})}finally{g(!1)}},className:"space-y-4 animate-slide-in",children:[(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Vp.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vp.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password",required:!0})]})]}),(0,Vp.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:m?(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]}),!o&&(0,Vp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(!0),d!==f)return v({isOpen:!0,title:"Password Mismatch! \ud83d\udd10",message:"Passwords do not match. Please try again.",details:""}),void g(!1);try{await N(c,d),x({isOpen:!0,title:"Welcome to the Family! \ud83c\udf8a",message:"Account created successfully! You can now use all features and enjoy exclusive benefits."}),setTimeout(()=>{n()},1500)}catch(t){let e="Failed to create account. Please try again.";"auth/email-already-in-use"===t.code?e="An account with this email already exists. Please sign in instead.":"auth/weak-password"===t.code?e="Password is too weak. Please use a stronger password.":"auth/invalid-email"===t.code&&(e="Please enter a valid email address."),v({isOpen:!0,title:"Account Creation Failed! \ud83d\ude14",message:e,details:t.message})}finally{g(!1)}},className:"space-y-4 animate-slide-in",children:[(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Vp.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vp.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Create a strong password",required:!0})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vp.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password",required:!0})]})]}),(0,Vp.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 px-4 rounded-xl font-medium hover:from-purple-600 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:m?(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),(0,Vp.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,Vp.jsx)("button",{onClick:async()=>{g(!0);try{await _(),x({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. Some features may be limited, but you can still explore!"}),setTimeout(()=>{n()},1500)}catch(e){v({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}finally{g(!1)}},disabled:m,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md",children:(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})})})]})]})}),(0,Vp.jsx)(qp,{isOpen:y.isOpen,onClose:()=>v({isOpen:!1,title:"",message:"",details:""}),title:y.title,message:y.message,details:y.details}),(0,Vp.jsx)(Hp,{isOpen:b.isOpen,onClose:()=>x({isOpen:!1,title:"",message:""}),title:b.title,message:b.message})]})};const Kp=function(){const{logout:e,role:t}=Bp(),n=te(),r=Z(),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)({isOpen:!1,actionType:"signup"});async function f(){try{await e(),n("/login")}catch{console.error("Failed to Logout")}}(0,i.useEffect)(()=>Mp.onAuthStateChanged(e=>{u(e)}),[]);const p=()=>{a(!1),h({isOpen:!0,actionType:"signup"})},m=()=>c&&c.isAnonymous,g=e=>r.pathname===e;return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Wp,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,actionType:"signup"}),actionType:d.actionType}),(0,Vp.jsxs)("nav",{className:"bg-white shadow-soft border-b border-gray-100 sticky top-0 z-50",children:[(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Vp.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Vp.jsx)("div",{className:"flex-shrink-0",children:(0,Vp.jsxs)(Pe,{to:"/home",className:"flex items-center space-x-2",children:[(0,Vp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:(0,Vp.jsx)("span",{className:"text-white font-bold text-sm",children:"E"})}),(0,Vp.jsx)("span",{className:"text-xl font-display font-bold text-gray-900",children:"E-Store"})]})}),(0,Vp.jsx)("div",{className:"hidden md:block",children:(0,Vp.jsxs)("div",{className:"ml-10 flex items-baseline space-x-8",children:[(0,Vp.jsx)(Pe,{to:"/home",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/home")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Home"}),(0,Vp.jsx)(Pe,{to:"/search",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/search")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Search"}),(0,Vp.jsx)(Pe,{to:"/categories",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/categories")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Categories"}),(0,Vp.jsx)(Pe,{to:"/favorites",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/favorites")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Favorites"}),"admin"===t&&(0,Vp.jsx)(Pe,{to:"/admin",className:"px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 "+(g("/admin")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),children:"Admin"})]})}),(0,Vp.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[c&&(0,Vp.jsx)(Pe,{to:"/checkout",className:"relative p-2 text-gray-600 hover:text-primary-600 transition-colors duration-200",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),c?(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsxs)("button",{onClick:()=>{a(!s)},className:"flex items-center space-x-2 bg-gray-50 hover:bg-gray-100 rounded-full px-3 py-2 transition-colors duration-200",children:[(0,Vp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:(0,Vp.jsx)("span",{className:"text-white font-medium text-sm",children:(()=>{if(c){if(c.isAnonymous)return"G";if(c.email)return c.email.charAt(0).toUpperCase()}return"U"})()})}),(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-700 hidden lg:block",children:(()=>{if(c){if(c.isAnonymous)return"Guest User";if(c.email)return c.email.split("@")[0]}return"User"})()}),(0,Vp.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,Vp.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-large border border-gray-100 py-1 z-50 animate-fade-in",children:[(0,Vp.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,Vp.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m()?"Guest User":c.email}),(0,Vp.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:m()?"guest account":`${t} account`})]}),!m()&&(0,Vp.jsx)(Pe,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Profile Settings"}),(0,Vp.jsx)(Pe,{to:"/favorites",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"My Favorites"}),"admin"===t&&(0,Vp.jsx)(Pe,{to:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:"Admin Panel"}),m()&&(0,Vp.jsx)("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 transition-colors duration-200",children:"Create Account"}),(0,Vp.jsx)("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:m()?"Exit Guest Mode":"Sign Out"})]})]}):(0,Vp.jsx)(Pe,{to:"/login",className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",children:"Sign In"})]}),(0,Vp.jsx)("div",{className:"md:hidden",children:(0,Vp.jsx)("button",{onClick:()=>{l(!o)},className:"text-gray-600 hover:text-gray-900 p-2 rounded-md",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),o&&(0,Vp.jsx)("div",{className:"md:hidden bg-white border-t border-gray-100 animate-slide-up",children:(0,Vp.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,Vp.jsx)(Pe,{to:"/home",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/home")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Home"}),(0,Vp.jsx)(Pe,{to:"/search",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/search")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Search"}),(0,Vp.jsx)(Pe,{to:"/categories",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/categories")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Categories"}),(0,Vp.jsx)(Pe,{to:"/favorites",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/favorites")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Favorites"}),c&&(0,Vp.jsx)(Pe,{to:"/checkout",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Cart"}),"admin"===t&&(0,Vp.jsx)(Pe,{to:"/admin",className:"block px-3 py-2 rounded-md text-base font-medium "+(g("/admin")?"text-primary-600 bg-primary-50":"text-gray-600 hover:text-primary-600 hover:bg-primary-50"),onClick:()=>l(!1),children:"Admin"}),c?(0,Vp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Vp.jsxs)("div",{className:"px-3 py-2",children:[(0,Vp.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m()?"Guest User":c.email}),(0,Vp.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:m()?"guest account":`${t} account`})]}),!m()&&(0,Vp.jsx)(Pe,{to:"/profile",className:"block px-3 py-2 text-base font-medium text-gray-600 hover:text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Profile Settings"}),m()&&(0,Vp.jsx)("button",{onClick:()=>{p(),l(!1)},className:"w-full text-left px-3 py-2 text-base font-medium text-blue-600 hover:bg-blue-50",children:"Create Account"}),(0,Vp.jsx)("button",{onClick:()=>{f(),l(!1)},className:"w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50",children:m()?"Exit Guest Mode":"Sign Out"})]}):(0,Vp.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,Vp.jsx)(Pe,{to:"/login",className:"block px-3 py-2 text-base font-medium text-primary-600 hover:bg-primary-50",onClick:()=>l(!1),children:"Sign In"})})]})})]})]})};const Gp=function(){return(0,Vp.jsxs)("div",{className:"relative bg-gradient-to-br from-primary-50 via-white to-secondary-50 overflow-hidden",children:[(0,Vp.jsxs)("div",{className:"absolute inset-0",children:[(0,Vp.jsx)("div",{className:"absolute top-0 left-0 w-72 h-72 bg-primary-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle"}),(0,Vp.jsx)("div",{className:"absolute top-0 right-0 w-72 h-72 bg-secondary-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle",style:{animationDelay:"1s"}}),(0,Vp.jsx)("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-accent-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-bounce-gentle",style:{animationDelay:"2s"}})]}),(0,Vp.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-primary-100 text-primary-800 mb-8 animate-fade-in",children:[(0,Vp.jsx)("span",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2"}),"New Collection Available"]}),(0,Vp.jsxs)("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-display font-bold text-gray-900 mb-6 animate-fade-in",style:{animationDelay:"0.2s"},children:["Discover Amazing",(0,Vp.jsx)("span",{className:"block bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Products"})]}),(0,Vp.jsx)("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto animate-fade-in",style:{animationDelay:"0.4s"},children:"Explore our curated collection of premium products. From electronics to fashion, find everything you need with exceptional quality and competitive prices."}),(0,Vp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in",style:{animationDelay:"0.6s"},children:[(0,Vp.jsxs)(Pe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Start Shopping",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]}),(0,Vp.jsxs)(Pe,{to:"/favorites",className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200",children:["View Favorites",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})]})]}),(0,Vp.jsxs)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto animate-fade-in",style:{animationDelay:"0.8s"},children:[(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"10K+"}),(0,Vp.jsx)("div",{className:"text-gray-600",children:"Happy Customers"})]}),(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"500+"}),(0,Vp.jsx)("div",{className:"text-gray-600",children:"Premium Products"})]}),(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"24/7"}),(0,Vp.jsx)("div",{className:"text-gray-600",children:"Customer Support"})]})]})]})}),(0,Vp.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce-gentle",children:(0,Vp.jsx)("div",{className:"w-6 h-10 border-2 border-gray-400 rounded-full flex justify-center",children:(0,Vp.jsx)("div",{className:"w-1 h-3 bg-gray-400 rounded-full mt-2 animate-pulse-slow"})})})]})};const Qp=function(){const e=(new Date).getFullYear();return(0,Vp.jsxs)("footer",{className:"bg-gray-900 text-white",children:[(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[(0,Vp.jsxs)("div",{className:"lg:col-span-1",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,Vp.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:(0,Vp.jsx)("span",{className:"text-white font-bold text-sm",children:"E"})}),(0,Vp.jsx)("span",{className:"text-xl font-display font-bold",children:"E-Store"})]}),(0,Vp.jsx)("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Your trusted destination for premium products. We're committed to providing exceptional quality and outstanding customer service."}),(0,Vp.jsxs)("div",{className:"flex space-x-4",children:[(0,Vp.jsx)("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),(0,Vp.jsx)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),(0,Vp.jsx)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"})})}),(0,Vp.jsx)("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,Vp.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Quick Links"}),(0,Vp.jsxs)("ul",{className:"space-y-3",children:[(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/home",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Home"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/search",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Search Products"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/favorites",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"My Favorites"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/checkout",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Shopping Cart"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/profile",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"My Account"})})]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Customer Service"}),(0,Vp.jsxs)("ul",{className:"space-y-3",children:[(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Contact Us"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)(Pe,{to:"/about",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"About Us"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)("a",{href:"/shipping",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Shipping Info"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)("a",{href:"/returns",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Returns & Exchanges"})}),(0,Vp.jsx)("li",{children:(0,Vp.jsx)("a",{href:"/faq",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"FAQ"})})]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Stay Updated"}),(0,Vp.jsx)("p",{className:"text-gray-400 mb-4",children:"Subscribe to our newsletter for the latest products and exclusive offers."}),(0,Vp.jsxs)("form",{className:"space-y-3",children:[(0,Vp.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 transition-colors duration-200"}),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 text-white py-3 px-4 rounded-lg font-medium hover:from-primary-700 hover:to-primary-800 transition-all duration-200 transform hover:-translate-y-1",children:"Subscribe"})]})]})]})}),(0,Vp.jsx)("div",{className:"border-t border-gray-800",children:(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Vp.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Vp.jsxs)("div",{className:"text-gray-400 text-sm",children:["\xa9 ",e," E-Store. All rights reserved."]}),(0,Vp.jsxs)("div",{className:"flex space-x-6 text-sm",children:[(0,Vp.jsx)("a",{href:"/privacy",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Privacy Policy"}),(0,Vp.jsx)("a",{href:"/terms",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Terms of Service"}),(0,Vp.jsx)("a",{href:"/cookies",className:"text-gray-400 hover:text-white transition-colors duration-200",children:"Cookie Policy"})]})]})})})]})};function Xp(e,t){return function(){return e.apply(t,arguments)}}const{toString:Yp}=Object.prototype,{getPrototypeOf:Jp}=Object,{iterator:Zp,toStringTag:em}=Symbol,tm=(nm=Object.create(null),e=>{const t=Yp.call(e);return nm[t]||(nm[t]=t.slice(8,-1).toLowerCase())});var nm;const rm=e=>(e=e.toLowerCase(),t=>tm(t)===e),sm=e=>t=>typeof t===e,{isArray:im}=Array,am=sm("undefined");function om(e){return null!==e&&!am(e)&&null!==e.constructor&&!am(e.constructor)&&um(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const lm=rm("ArrayBuffer");const cm=sm("string"),um=sm("function"),dm=sm("number"),hm=e=>null!==e&&"object"===typeof e,fm=e=>{if("object"!==tm(e))return!1;const t=Jp(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(em in e)&&!(Zp in e)},pm=rm("Date"),mm=rm("File"),gm=rm("Blob"),ym=rm("FileList"),vm=rm("URLSearchParams"),[bm,xm,wm,Nm]=["ReadableStream","Request","Response","Headers"].map(rm);function _m(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),im(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(om(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function Em(e,t){if(om(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const km="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Sm=e=>!am(e)&&e!==km;const Cm=(jm="undefined"!==typeof Uint8Array&&Jp(Uint8Array),e=>jm&&e instanceof jm);var jm;const Tm=rm("HTMLFormElement"),Im=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Am=rm("RegExp"),Rm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};_m(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const Om=rm("AsyncFunction"),Pm=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],km.addEventListener("message",e=>{let{source:t,data:s}=e;t===km&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),km.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,um(km.postMessage)),Lm="undefined"!==typeof queueMicrotask?queueMicrotask.bind(km):"undefined"!==typeof process&&process.nextTick||Pm,Dm={isArray:im,isArrayBuffer:lm,isBuffer:om,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||um(e.append)&&("formdata"===(t=tm(e))||"object"===t&&um(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&lm(e.buffer),t},isString:cm,isNumber:dm,isBoolean:e=>!0===e||!1===e,isObject:hm,isPlainObject:fm,isEmptyObject:e=>{if(!hm(e)||om(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(By){return!1}},isReadableStream:bm,isRequest:xm,isResponse:wm,isHeaders:Nm,isUndefined:am,isDate:pm,isFile:mm,isBlob:gm,isRegExp:Am,isFunction:um,isStream:e=>hm(e)&&um(e.pipe),isURLSearchParams:vm,isTypedArray:Cm,isFileList:ym,forEach:_m,merge:function e(){const{caseless:t}=Sm(this)&&this||{},n={},r=(r,s)=>{const i=t&&Em(n,s)||s;fm(n[i])&&fm(r)?n[i]=e(n[i],r):fm(r)?n[i]=e({},r):im(r)?n[i]=r.slice():n[i]=r};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&_m(arguments[s],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _m(t,(t,r)=>{n&&um(t)?e[r]=Xp(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&Jp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:tm,kindOfTest:rm,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(im(e))return e;let t=e.length;if(!dm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Zp]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Tm,hasOwnProperty:Im,hasOwnProp:Im,reduceDescriptors:Rm,freezeMethods:e=>{Rm(e,(t,n)=>{if(um(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];um(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return im(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Em,global:km,isContextDefined:Sm,isSpecCompliantForm:function(e){return!!(e&&um(e.append)&&"FormData"===e[em]&&e[Zp])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(hm(e)){if(t.indexOf(e)>=0)return;if(om(e))return e;if(!("toJSON"in e)){t[r]=e;const s=im(e)?[]:{};return _m(e,(e,t)=>{const i=n(e,r+1);!am(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Om,isThenable:e=>e&&(hm(e)||um(e))&&um(e.then)&&um(e.catch),setImmediate:Pm,asap:Lm,isIterable:e=>null!=e&&um(e[Zp])};function Mm(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Dm.inherits(Mm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Dm.toJSONObject(this.config),code:this.code,status:this.status}}});const Fm=Mm.prototype,Um={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Um[e]={value:e}}),Object.defineProperties(Mm,Um),Object.defineProperty(Fm,"isAxiosError",{value:!0}),Mm.from=(e,t,n,r,s,i)=>{const a=Object.create(Fm);return Dm.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Mm.call(a,e.message,t,n,r,s),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Vm=Mm;function zm(e){return Dm.isPlainObject(e)||Dm.isArray(e)}function Bm(e){return Dm.endsWith(e,"[]")?e.slice(0,-2):e}function $m(e,t,n){return e?e.concat(t).map(function(e,t){return e=Bm(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const qm=Dm.toFlatObject(Dm,{},null,function(e){return/^is[A-Z]/.test(e)});const Hm=function(e,t,n){if(!Dm.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Dm.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Dm.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Dm.isSpecCompliantForm(t);if(!Dm.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Dm.isDate(e))return e.toISOString();if(Dm.isBoolean(e))return e.toString();if(!o&&Dm.isBlob(e))throw new Vm("Blob is not supported. Use a Buffer instead.");return Dm.isArrayBuffer(e)||Dm.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Dm.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Dm.isArray(e)&&function(e){return Dm.isArray(e)&&!e.some(zm)}(e)||(Dm.isFileList(e)||Dm.endsWith(n,"[]"))&&(o=Dm.toArray(e)))return n=Bm(n),o.forEach(function(e,r){!Dm.isUndefined(e)&&null!==e&&t.append(!0===a?$m([n],r,i):null===a?n:n+"[]",l(e))}),!1;return!!zm(e)||(t.append($m(s,n,i),l(e)),!1)}const u=[],d=Object.assign(qm,{defaultVisitor:c,convertValue:l,isVisitable:zm});if(!Dm.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Dm.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Dm.forEach(n,function(n,i){!0===(!(Dm.isUndefined(n)||null===n)&&s.call(t,n,Dm.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function Wm(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Km(e,t){this._pairs=[],e&&Hm(e,this,t)}const Gm=Km.prototype;Gm.append=function(e,t){this._pairs.push([e,t])},Gm.toString=function(e){const t=e?function(t){return e.call(this,t,Wm)}:Wm;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Qm=Km;function Xm(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ym(e,t,n){if(!t)return e;const r=n&&n.encode||Xm;Dm.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):Dm.isURLSearchParams(t)?t.toString():new Qm(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Jm=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Dm.forEach(this.handlers,function(t){null!==t&&e(t)})}},Zm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eg={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Qm,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},tg="undefined"!==typeof window&&"undefined"!==typeof document,ng="object"===typeof navigator&&navigator||void 0,rg=tg&&(!ng||["ReactNative","NativeScript","NS"].indexOf(ng.product)<0),sg="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ig=tg&&window.location.href||"http://localhost",ag={...r,...eg};const og=function(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),o=s>=e.length;if(i=!i&&Dm.isArray(r)?r.length:i,o)return Dm.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&Dm.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&Dm.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(Dm.isFormData(e)&&Dm.isFunction(e.entries)){const n={};return Dm.forEachEntry(e,(e,r)=>{t(function(e){return Dm.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const lg={transitional:Zm,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Dm.isObject(e);s&&Dm.isHTMLForm(e)&&(e=new FormData(e));if(Dm.isFormData(e))return r?JSON.stringify(og(e)):e;if(Dm.isArrayBuffer(e)||Dm.isBuffer(e)||Dm.isStream(e)||Dm.isFile(e)||Dm.isBlob(e)||Dm.isReadableStream(e))return e;if(Dm.isArrayBufferView(e))return e.buffer;if(Dm.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Hm(e,new ag.classes.URLSearchParams,{visitor:function(e,t,n,r){return ag.isNode&&Dm.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=Dm.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Hm(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Dm.isString(e))try{return(t||JSON.parse)(e),Dm.trim(e)}catch(By){if("SyntaxError"!==By.name)throw By}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||lg.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Dm.isResponse(e)||Dm.isReadableStream(e))return e;if(e&&Dm.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(By){if(n){if("SyntaxError"===By.name)throw Vm.from(By,Vm.ERR_BAD_RESPONSE,this,null,this.response);throw By}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ag.classes.FormData,Blob:ag.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Dm.forEach(["delete","get","head","post","put","patch"],e=>{lg.headers[e]={}});const cg=lg,ug=Dm.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dg=Symbol("internals");function hg(e){return e&&String(e).trim().toLowerCase()}function fg(e){return!1===e||null==e?e:Dm.isArray(e)?e.map(fg):String(e)}function pg(e,t,n,r,s){return Dm.isFunction(r)?r.call(this,t,n):(s&&(t=n),Dm.isString(t)?Dm.isString(r)?-1!==t.indexOf(r):Dm.isRegExp(r)?r.test(t):void 0:void 0)}class mg{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=hg(t);if(!s)throw new Error("header name must be a non-empty string");const i=Dm.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=fg(e))}const i=(e,t)=>Dm.forEach(e,(e,n)=>s(e,n,t));if(Dm.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Dm.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&ug[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Dm.isObject(e)&&Dm.isIterable(e)){let n,r,s={};for(const t of e){if(!Dm.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Dm.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=hg(e)){const n=Dm.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Dm.isFunction(t))return t.call(this,e,n);if(Dm.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hg(e)){const n=Dm.findKey(this,e);return!(!n||void 0===this[n]||t&&!pg(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=hg(e)){const s=Dm.findKey(n,e);!s||t&&!pg(0,n[s],s,t)||(delete n[s],r=!0)}}return Dm.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!pg(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Dm.forEach(this,(r,s)=>{const i=Dm.findKey(n,s);if(i)return t[i]=fg(r),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=fg(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Dm.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Dm.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[dg]=this[dg]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=hg(e);t[r]||(!function(e,t){const n=Dm.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Dm.isArray(e)?e.forEach(r):r(e),this}}mg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Dm.reduceDescriptors(mg.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Dm.freezeMethods(mg);const gg=mg;function yg(e,t){const n=this||cg,r=t||n,s=gg.from(r.headers);let i=r.data;return Dm.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function vg(e){return!(!e||!e.__CANCEL__)}function bg(e,t,n){Vm.call(this,null==e?"canceled":e,Vm.ERR_CANCELED,t,n),this.name="CanceledError"}Dm.inherits(bg,Vm,{__CANCEL__:!0});const xg=bg;function wg(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Vm("Request failed with status code "+n.status,[Vm.ERR_BAD_REQUEST,Vm.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ng=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];s||(s=l),n[i]=o,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const _g=function(e,t){let n,r,s=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?a(l,e):(n=l,r||(r=setTimeout(()=>{r=null,a(n)},i-t)))},()=>n&&a(n)]},Eg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=Ng(50,250);return _g(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,o=i-r,l=s(o);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},kg=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Sg=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dm.asap(()=>e(...n))},Cg=ag.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ag.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ag.origin),ag.navigator&&/(msie|trident)/i.test(ag.navigator.userAgent)):()=>!0,jg=ag.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const a=[e+"="+encodeURIComponent(t)];Dm.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Dm.isString(r)&&a.push("path="+r),Dm.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Tg(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ig=e=>e instanceof gg?{...e}:e;function Ag(e,t){t=t||{};const n={};function r(e,t,n,r){return Dm.isPlainObject(e)&&Dm.isPlainObject(t)?Dm.merge.call({caseless:r},e,t):Dm.isPlainObject(t)?Dm.merge({},t):Dm.isArray(t)?t.slice():t}function s(e,t,n,s){return Dm.isUndefined(t)?Dm.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!Dm.isUndefined(t))return r(void 0,t)}function a(e,t){return Dm.isUndefined(t)?Dm.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(Ig(e),Ig(t),0,!0)};return Dm.forEach(Object.keys({...e,...t}),function(r){const i=l[r]||s,a=i(e[r],t[r],r);Dm.isUndefined(a)&&i!==o||(n[r]=a)}),n}const Rg=e=>{const t=Ag({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=gg.from(o),t.url=Ym(Tg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Dm.isFormData(r))if(ag.hasStandardBrowserEnv||ag.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(ag.hasStandardBrowserEnv&&(s&&Dm.isFunction(s)&&(s=s(t)),s||!1!==s&&Cg(t.url))){const e=i&&a&&jg.read(a);e&&o.set(i,e)}return t},Og="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Rg(e);let s=r.data;const i=gg.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=gg.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());wg(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Vm("Request aborted",Vm.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Vm("Network Error",Vm.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Zm;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Vm(t,s.clarifyTimeoutError?Vm.ETIMEDOUT:Vm.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&Dm.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Dm.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=Eg(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=Eg(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new xg(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===ag.protocols.indexOf(y)?n(new Vm("Unsupported protocol "+y+":",Vm.ERR_BAD_REQUEST,e)):m.send(s||null)})},Pg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Vm?t:new xg(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new Vm(`timeout ${t} of ms exceeded`,Vm.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>Dm.asap(a),o}},Lg=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Dg=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Mg=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of Dg(e))yield*Lg(n,t)}(e,t);let i,a=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},Fg="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Ug=Fg&&"function"===typeof ReadableStream,Vg=Fg&&("function"===typeof TextEncoder?(zg=new TextEncoder,e=>zg.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var zg;const Bg=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(By){return!1}},$g=Ug&&Bg(()=>{let e=!1;const t=new Request(ag.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),qg=Ug&&Bg(()=>Dm.isReadableStream(new Response("").body)),Hg={stream:qg&&(e=>e.body)};var Wg;Fg&&(Wg=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Hg[e]&&(Hg[e]=Dm.isFunction(Wg[e])?t=>t[e]():(t,n)=>{throw new Vm(`Response type '${e}' is not supported`,Vm.ERR_NOT_SUPPORT,n)})}));const Kg=async(e,t)=>{const n=Dm.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Dm.isBlob(e))return e.size;if(Dm.isSpecCompliantForm(e)){const t=new Request(ag.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Dm.isArrayBufferView(e)||Dm.isArrayBuffer(e)?e.byteLength:(Dm.isURLSearchParams(e)&&(e+=""),Dm.isString(e)?(await Vg(e)).byteLength:void 0)})(t):n},Gg=Fg&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Rg(e);c=c?(c+"").toLowerCase():"text";let f,p=Pg([s,i&&i.toAbortSignal()],a);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&$g&&"get"!==n&&"head"!==n&&0!==(g=await Kg(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Dm.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=kg(g,Eg(Sg(l)));r=Mg(n.body,65536,e,t)}}Dm.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let i=await fetch(f,h);const a=qg&&("stream"===c||"response"===c);if(qg&&(o||a&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=Dm.toFiniteNumber(i.headers.get("content-length")),[n,r]=o&&kg(t,Eg(Sg(o),!0))||[];i=new Response(Mg(i.body,65536,n,()=>{r&&r(),m&&m()}),e)}c=c||"text";let y=await Hg[Dm.findKey(Hg,c)||"text"](i,e);return!a&&m&&m(),await new Promise((t,n)=>{wg(t,n,{data:y,headers:gg.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})})}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Vm("Network Error",Vm.ERR_NETWORK,e,f),{cause:y.cause||y});throw Vm.from(y,y&&y.code,e,f)}}),Qg={http:null,xhr:Og,fetch:Gg};Dm.forEach(Qg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(By){}Object.defineProperty(e,"adapterName",{value:t})}});const Xg=e=>`- ${e}`,Yg=e=>Dm.isFunction(e)||null===e||!1===e,Jg=e=>{e=Dm.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Yg(n)&&(r=Qg[(t=String(n)).toLowerCase()],void 0===r))throw new Vm(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+i]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(Xg).join("\n"):" "+Xg(e[0]):"as no adapter specified";throw new Vm("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Zg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xg(null,e)}function ey(e){Zg(e),e.headers=gg.from(e.headers),e.data=yg.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Jg(e.adapter||cg.adapter)(e).then(function(t){return Zg(e),t.data=yg.call(e,e.transformResponse,t),t.headers=gg.from(t.headers),t},function(t){return vg(t)||(Zg(e),t&&t.response&&(t.response.data=yg.call(e,e.transformResponse,t.response),t.response.headers=gg.from(t.response.headers))),Promise.reject(t)})}const ty="1.11.0",ny={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ny[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ry={};ny.transitional=function(e,t,n){function r(e,t){return"[Axios v"+ty+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new Vm(r(s," has been removed"+(t?" in "+t:"")),Vm.ERR_DEPRECATED);return t&&!ry[s]&&(ry[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},ny.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const sy={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Vm("options must be an object",Vm.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new Vm("option "+i+" must be "+n,Vm.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Vm("Unknown option "+i,Vm.ERR_BAD_OPTION)}},validators:ny},iy=sy.validators;class ay{constructor(e){this.defaults=e||{},this.interceptors={request:new Jm,response:new Jm}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(By){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ag(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&sy.assertOptions(n,{silentJSONParsing:iy.transitional(iy.boolean),forcedJSONParsing:iy.transitional(iy.boolean),clarifyTimeoutError:iy.transitional(iy.boolean)},!1),null!=r&&(Dm.isFunction(r)?t.paramsSerializer={serialize:r}:sy.assertOptions(r,{encode:iy.function,serialize:iy.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),sy.assertOptions(t,{baseUrl:iy.spelling("baseURL"),withXsrfToken:iy.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&Dm.merge(s.common,s[t.method]);s&&Dm.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=gg.concat(i,s);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[ey.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=ey.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Ym(Tg((e=Ag(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Dm.forEach(["delete","get","head","options"],function(e){ay.prototype[e]=function(t,n){return this.request(Ag(n||{},{method:e,url:t,data:(n||{}).data}))}}),Dm.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Ag(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ay.prototype[e]=t(),ay.prototype[e+"Form"]=t(!0)});const oy=ay;class ly{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new xg(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ly(function(t){e=t}),cancel:e}}}const cy=ly;const uy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uy).forEach(e=>{let[t,n]=e;uy[n]=t});const dy=uy;const hy=function e(t){const n=new oy(t),r=Xp(oy.prototype.request,n);return Dm.extend(r,oy.prototype,n,{allOwnKeys:!0}),Dm.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ag(t,n))},r}(cg);hy.Axios=oy,hy.CanceledError=xg,hy.CancelToken=cy,hy.isCancel=vg,hy.VERSION=ty,hy.toFormData=Hm,hy.AxiosError=Vm,hy.Cancel=hy.CanceledError,hy.all=function(e){return Promise.all(e)},hy.spread=function(e){return function(t){return e.apply(null,t)}},hy.isAxiosError=function(e){return Dm.isObject(e)&&!0===e.isAxiosError},hy.mergeConfig=Ag,hy.AxiosHeaders=gg,hy.formToJSON=e=>og(Dm.isHTMLForm(e)?new FormData(e):e),hy.getAdapter=Jg,hy.HttpStatusCode=dy,hy.default=hy;const fy=hy,py="http://localhost:3000/api",my=async()=>{try{const e=`${py}/products/categories/`;console.log("Fetching categories from:",e);const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return console.log("Categories response:",n),n}catch(e){return console.error("Error fetching categories:",e),console.log("Using fallback categories"),["groceries","electronics","clothing","beauty","home-decoration","furniture","automotive","sports","toys","health","books","pets"]}},gy=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{r(!0);const e=await my();t(e)}catch(e){console.error("Error loading categories:",e),t([])}finally{r(!1)}})()},[]);const s=e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6");if(n)return(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Vp.jsxs)("div",{className:"text-center mb-12",children:[(0,Vp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),(0,Vp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})});const a=e.length>=6?e.slice(0,6):e;return(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Vp.jsxs)("div",{className:"text-center mb-12",children:[(0,Vp.jsx)("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"Shop by Category"}),(0,Vp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Explore our diverse collection of products organized by category. Find exactly what you're looking for."})]}),(0,Vp.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:a.map((e,t)=>(0,Vp.jsx)(Pe,{to:`/category/${e.toLowerCase()}`,className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2 border border-gray-100",children:(0,Vp.jsxs)("div",{className:"p-6 text-center",children:[(0,Vp.jsx)("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:s(e)}),(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary-600 transition-colors duration-200 capitalize",children:e.replace("-"," ")}),(0,Vp.jsx)("div",{className:"mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,Vp.jsx)("svg",{className:"w-5 h-5 text-primary-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]})},t))}),(0,Vp.jsx)("div",{className:"text-center mt-12",children:(0,Vp.jsxs)(Pe,{to:"/categories",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Browse All Categories",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})};const yy=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(1),[d,h]=(0,i.useState)(!0),[f,p]=(0,i.useState)({isOpen:!1,actionType:"favorites"}),{currentUser:m}=Bp(),g=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{r(!0);const n=new URLSearchParams({page:e.toString(),page_size:"12"}),s=await fetch(`/api/products/?${n.toString()}`);if(!s.ok)throw new Error("Failed to fetch products");const i=await s.json();t(1===e?i.results||i:e=>[...e,...i.results||i]),void 0!==i.count&&h(null!==i.next),u(e)}catch(n){a(n.message)}finally{r(!1)}},[]),y=(0,i.useCallback)(async()=>{if(m)try{const e=Tf(Up,"users",m.uid,"favorites"),t=(await Tp(e)).docs.map(e=>e.data().productId);l(t)}catch(s){console.error("Error fetching favorites:",s)}},[m]),v=(0,i.useCallback)(async()=>{try{r(!0);const e=await fetch("/api/products/featured/");if(!e.ok)throw new Error("Failed to fetch featured products");const n=await e.json();t(n),h(!1)}catch(e){a(e.message)}finally{r(!1)}},[]);(0,i.useEffect)(()=>{v(),m&&y()},[m,v,y]);const b=async e=>{if(m&&!m.isAnonymous)try{const t=Tf(Up,"users",m.uid,"favorites"),n=fp(t,mp("productId","==",e)),r=await Tp(n);if(r.empty)await Op(t,{productId:e}),l(t=>[...t,e]);else{const t=r.docs[0];await Rp(t.ref),l(t=>t.filter(t=>t!==e))}}catch(s){console.error("Error toggling favorite:",s)}else p({isOpen:!0,actionType:"favorites"})};return n&&0===e.length?(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>(0,Vp.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft animate-pulse",children:[(0,Vp.jsx)("div",{className:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-t-2xl"}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Vp.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})]},t))})}):s?(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsxs)("div",{className:"text-red-500 text-xl mb-4",children:["Error: ",s]}),(0,Vp.jsx)("button",{onClick:()=>v(),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"Try Again"})]})}):(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Vp.jsx)(Wp,{isOpen:f.isOpen,onClose:()=>p({isOpen:!1,actionType:"favorites"}),actionType:f.actionType}),s&&(0,Vp.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,Vp.jsx)("p",{className:"text-red-800",children:s})}),(0,Vp.jsxs)("div",{className:"text-center mb-12",children:[(0,Vp.jsx)("h2",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"Featured Products"}),(0,Vp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Discover our handpicked selection of premium products with exceptional quality and competitive prices."})]}),(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,Vp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Vp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Vp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;console.log("Image failed to load:",t.target.src);const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s},onLoad:e=>{console.log("Image loaded successfully:",e.target.src),console.log("Image dimensions:",e.target.naturalWidth,"x",e.target.naturalHeight)},onLoadStart:()=>{console.log("Starting to load image for product:",e.title),console.log("Image URL:",e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`)}}),(0,Vp.jsx)("button",{onClick:()=>b(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(o.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:o.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Vp.jsx)("svg",{className:"w-5 h-5",fill:o.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Vp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Vp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Vp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Vp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Vp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Vp.jsxs)("div",{className:"flex space-x-2",children:[(0,Vp.jsx)(Pe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Vp.jsx)("button",{onClick:()=>(async e=>{if(m)try{const t=Tf(Up,"checkout",m.uid,"items");await Op(t,{productId:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail,quantity:1,addedAt:new Date}),alert("Product added to cart!")}catch(s){console.error("Error adding to cart:",s),alert("Failed to add to cart")}else alert("Please log in to add items to cart")})(e),disabled:0===e.stock,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:"Add to Cart"})]})]})]},e.id))}),d&&(0,Vp.jsx)("div",{className:"text-center mt-12",children:(0,Vp.jsx)("button",{onClick:()=>{d&&!n&&g(c+1)},disabled:n,className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,Vp.jsxs)(Vp.Fragment,{children:["Load More Products",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})}),!d&&e.length>0&&(0,Vp.jsx)("div",{className:"text-center mt-12",children:(0,Vp.jsxs)(Pe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-primary-300 hover:text-primary-600 shadow-soft hover:shadow-medium transform hover:-translate-y-1 transition-all duration-200",children:["View All Products",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})},vy=()=>(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(Gp,{}),(0,Vp.jsx)("div",{className:"bg-gray-50",children:(0,Vp.jsx)(gy,{})}),(0,Vp.jsx)("div",{className:"bg-white",children:(0,Vp.jsx)(yy,{})}),(0,Vp.jsx)(Qp,{})]}),by=e=>{let{productId:t}=e;const[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)({rating:5,comment:""}),[c,u]=(0,i.useState)(!1),{currentUser:d}=Bp(),h=(0,i.useCallback)(async()=>{try{a(!0);const e=await fetch(`/api/products/${t}/reviews/`);if(e.ok){const t=await e.json();r(t)}}catch(e){console.error("Error fetching reviews:",e)}finally{a(!1)}},[t]);(0,i.useEffect)(()=>{h()},[h]);return s?(0,Vp.jsxs)("div",{className:"mt-8",children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reviews"}),(0,Vp.jsxs)("div",{className:"animate-pulse",children:[(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})]}):(0,Vp.jsxs)("div",{className:"mt-8",children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reviews"}),d&&(0,Vp.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Vp.jsx)("h4",{className:"font-medium mb-3",children:"Write a Review"}),(0,Vp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d)try{u(!0);(await fetch(`/api/products/${t}/reviews/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok?(l({rating:5,comment:""}),h()):alert("Failed to submit review")}catch(n){console.error("Error submitting review:",n),alert("Failed to submit review")}finally{u(!1)}else alert("Please log in to submit a review")},children:[(0,Vp.jsxs)("div",{className:"mb-3",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),(0,Vp.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,Vp.jsx)("button",{type:"button",onClick:()=>l({...o,rating:e}),className:"focus:outline-none",children:(0,Vp.jsx)("svg",{className:"w-6 h-6 "+(e<=o.rating?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})]}),(0,Vp.jsxs)("div",{className:"mb-3",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment"}),(0,Vp.jsx)("textarea",{value:o.comment,onChange:e=>l({...o,comment:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",required:!0})]}),(0,Vp.jsx)("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:c?"Submitting...":"Submit Review"})]})]}),(0,Vp.jsx)("div",{className:"space-y-4",children:0===n.length?(0,Vp.jsx)("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review this product!"}):n.map(e=>{return(0,Vp.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vp.jsx)("div",{className:"flex",children:(t=e.rating,[...Array(5)].map((e,n)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(n<t?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n)))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,"/5)"]})]}),(0,Vp.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,Vp.jsx)("p",{className:"text-gray-700",children:e.comment}),(0,Vp.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["- ",e.user_name]})]},e.id);var t})})]})};const xy=function(){const{id:e}=re(),[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[l,c]=(0,i.useState)({isOpen:!1,title:"",message:""}),[u,d]=(0,i.useState)({isOpen:!1,actionType:"checkout"}),{currentUser:h}=Bp();(0,i.useEffect)(()=>{fetch(`/api/products/${e}/`).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>n(e)).catch(e=>{console.error("Error fetching the product:",e),o({isOpen:!0,title:"Error Loading Product",message:"Failed to load product details. Please try again.",details:e.message})}),f()},[e]);const f=async()=>{const e=Mp.currentUser;if(e)try{console.log("Loading checkout list for user:",e.uid);const t=Tf(Up,"checkout",e.uid,"items");console.log("Firebase collection path:",`checkout/${e.uid}/items`);const n=(await Tp(t)).docs.map(e=>e.data().productId);s(n)}catch(t){console.error("Error loading checkout list:",t),s([])}},p=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?o({isOpen:!0,title:"Error",message:e,details:""}):c({isOpen:!0,title:"Success",message:e})},m=r.includes(null===t||void 0===t?void 0:t.id);return t?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(Wp,{isOpen:u.isOpen,onClose:()=>{d({isOpen:!1,actionType:"checkout"})},actionType:u.actionType}),(0,Vp.jsx)(qp,{isOpen:a.isOpen,onClose:()=>{o({isOpen:!1,title:"",message:"",details:""})},title:a.title,message:a.message,details:a.details}),(0,Vp.jsx)(Hp,{isOpen:l.isOpen,onClose:()=>{c({isOpen:!1,title:"",message:""})},title:l.title,message:l.message}),(0,Vp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Vp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Vp.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:(0,Vp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Vp.jsx)("div",{children:null!==t&&void 0!==t&&t.images&&Array.isArray(t.images)&&t.images.length>0?(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.images.map((e,n)=>(0,Vp.jsx)("img",{src:e,alt:`${t.title} ${n+1}`,className:"w-full h-64 object-cover rounded-lg shadow-md"},n))}):null!==t&&void 0!==t&&t.thumbnail&&"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"!==t.thumbnail?(0,Vp.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-full max-w-md h-auto rounded-lg shadow-md"}):(0,Vp.jsx)("div",{className:"w-full max-w-md h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,Vp.jsx)("p",{className:"text-gray-500",children:"Image not available"})})}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),(0,Vp.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Vp.jsx)("div",{className:"flex items-center mr-2",children:(g=t.rating,[...Array(5)].map((e,t)=>(0,Vp.jsx)("svg",{className:"w-5 h-5 "+(t<Math.floor(g)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),(0,Vp.jsxs)("span",{className:"text-lg text-gray-600",children:["(",t.rating,")"]})]}),(0,Vp.jsx)("div",{className:"mb-6",children:(0,Vp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vp.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",t.price]}),t.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"text-lg text-gray-500 line-through",children:["$",(t.price/(1-t.discount_percentage/100)).toFixed(2)]}),t.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-2 py-1 rounded",children:["-",t.discount_percentage,"%"]})]})}),(0,Vp.jsx)("div",{className:"mb-6",children:(0,Vp.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium "+(t.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.stock>0?`${t.stock} in stock`:"Out of stock"})}),(0,Vp.jsx)("div",{className:"space-y-3",children:(0,Vp.jsx)("button",{onClick:m?async()=>{const e=Mp.currentUser;if(e)try{const n=Tf(Up,"checkout",e.uid,"items"),i=(await Tp(n)).docs.find(e=>e.data().productId===t.id);i&&(await Rp(If(Up,"checkout",e.uid,"items",i.id)),s(r.filter(e=>e!==t.id)),p("Removed from checkout list successfully! \u2705"))}catch(n){console.error("Error removing from checkout:",n),p("Failed to remove from checkout list. Please try again.",!0)}}:async()=>{if(!h||h.isAnonymous)return void d({isOpen:!0,actionType:"checkout"});const e=Mp.currentUser;if(e)try{const n=Tf(Up,"checkout",e.uid,"items"),i=t.images&&Array.isArray(t.images)&&t.images.length>0?t.images[0]:"https://via.placeholder.com/150";await Op(n,{productId:t.id,name:t.title,price:t.price,images:[i],discount:t.discount_percentage,stock:t.stock}),s([...r,t.id]),p("Added to checkout list successfully! \ud83d\uded2")}catch(n){console.error("Error adding to checkout:",n),p("Failed to add to checkout list. Please try again.",!0)}},disabled:0===t.stock,className:`w-full py-3 px-6 rounded-lg font-medium transition-colors ${m?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} ${0===t.stock?"bg-gray-300 cursor-not-allowed":""}`,children:m?"Remove from Checkout":"Add to Checkout"})})]})]})}),(0,Vp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Vp.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Vp.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Description"}),(0,Vp.jsx)("p",{className:"text-gray-700 leading-relaxed",children:t.description})]}),(0,Vp.jsx)(by,{productId:t.id,productTitle:t.title})]}),(0,Vp.jsxs)("div",{className:"space-y-6",children:[(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Product Details"}),(0,Vp.jsxs)("div",{className:"space-y-3",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Category"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.category})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Brand"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.brand})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"SKU"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.sku})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Weight"}),(0,Vp.jsxs)("p",{className:"text-gray-900",children:[t.weight,"g"]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Availability"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.availability_status})]})]})]}),(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shipping & Returns"}),(0,Vp.jsxs)("div",{className:"space-y-3",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Shipping"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.shipping_information})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Return Policy"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.return_policy})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Warranty"}),(0,Vp.jsx)("p",{className:"text-gray-900",children:t.warranty_information})]})]})]})]})]})]})}),(0,Vp.jsx)(Qp,{})]}):(0,Vp.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,Vp.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:(0,Vp.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Loading..."})})});var g},wy=()=>{const{category:e}=re(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[a,o]=(0,i.useState)([]),{currentUser:l}=Bp();(0,i.useEffect)(()=>{(async()=>{try{s(!0);const e=await(async()=>{try{const e=await fetch(`${py}/products/`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}catch(e){throw console.error("Error fetching products:",e),e}})();n(e)}catch(e){console.error("Error loading products:",e),n([])}finally{s(!1)}})()},[e]);const c=(0,i.useCallback)(async()=>{if(l)try{const e=Tf(Up,"users",l.uid,"favorites"),t=(await Tp(e)).docs.map(e=>e.data().productId);o(t)}catch(e){console.error("Error fetching favorites:",e)}},[l]);(0,i.useEffect)(()=>{l&&c()},[l,c]);return r?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Vp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}),(0,Vp.jsx)(Qp,{})]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,Vp.jsxs)("div",{className:"text-center mb-12",children:[(0,Vp.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Vp.jsx)("span",{className:"text-4xl mr-4",children:(e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6"))(e)}),(0,Vp.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900",children:e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),(0,Vp.jsxs)("p",{className:"text-lg text-gray-600",children:["Discover our amazing collection of ",e.replace("-"," ")," products"]}),(0,Vp.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[t.length," product",1!==t.length?"s":""," found"]})]}),t.length>0?(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(e=>(0,Vp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Vp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Vp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Vp.jsx)("button",{onClick:()=>(async e=>{if(l)try{const t=Tf(Up,"users",l.uid,"favorites"),n=fp(t,mp("productId","==",e)),r=await Tp(n);if(r.empty)await Op(t,{productId:e}),o(t=>[...t,e]);else{const t=r.docs[0];await Rp(t.ref),o(t=>t.filter(t=>t!==e))}}catch(t){console.error("Error toggling favorite:",t)}else alert("Please log in to add favorites")})(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(a.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:a.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Vp.jsx)("svg",{className:"w-5 h-5",fill:a.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Vp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Vp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Vp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Vp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Vp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Vp.jsx)("div",{className:"flex space-x-2",children:(0,Vp.jsx)(Pe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"})})]})]},e.id))}):(0,Vp.jsxs)("div",{className:"text-center py-12",children:[(0,Vp.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",children:(0,Vp.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,Vp.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),(0,Vp.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find any products in this category"}),(0,Vp.jsx)(Pe,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Browse All Products"})]}),(0,Vp.jsx)("div",{className:"text-center mt-12",children:(0,Vp.jsxs)(Pe,{to:"/categories",className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors duration-200",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Categories"]})})]}),(0,Vp.jsx)(Qp,{})]})},Ny=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{r(!0);const e=await my();t(e)}catch(e){console.error("Error loading categories:",e),t([])}finally{r(!1)}})()},[]);const s=e=>({groceries:"\ud83d\uded2",electronics:"\ud83d\udcf1",clothing:"\ud83d\udc55",beauty:"\ud83d\udc84","womens-shoes":"\ud83d\udc60","womens-watches":"\u231a","womens-jewellery":"\ud83d\udc8d","mens-shoes":"\ud83d\udc5e","mens-watches":"\u231a","mens-clothing":"\ud83d\udc54","mens-shirts":"\ud83d\udc54","home-decoration":"\ud83c\udfe0",furniture:"\ud83e\ude91",lighting:"\ud83d\udca1",automotive:"\ud83d\ude97",motorcycle:"\ud83c\udfcd\ufe0f",vehicle:"\ud83d\ude97",sunglasses:"\ud83d\udd76\ufe0f",skincare:"\ud83e\uddf4","skin-care":"\ud83e\uddf4",fragrances:"\ud83c\udf38",laptops:"\ud83d\udcbb",smartphones:"\ud83d\udcf1",tablets:"\ud83d\udcf1",headphones:"\ud83c\udfa7","mobile-accessories":"\ud83d\udcf1",books:"\ud83d\udcda",sports:"\u26bd","sports-accessories":"\u26bd",toys:"\ud83e\uddf8",baby:"\ud83c\udf7c",health:"\ud83c\udfe5",pets:"\ud83d\udc3e","womens-bags":"\ud83d\udc5c","womens-dresses":"\ud83d\udc57",tops:"\ud83d\udc55","kitchen-accessories":"\ud83c\udf73"}[e.toLowerCase()]||"\ud83d\udce6"),a=e=>({groceries:"Fresh food, beverages, and household essentials",electronics:"Latest gadgets, computers, and smart devices",clothing:"Fashionable apparel for all occasions",beauty:"Cosmetics, skincare, and beauty products","womens-shoes":"Stylish footwear for women","womens-watches":"Elegant timepieces and accessories","womens-jewellery":"Beautiful jewelry and accessories","mens-shoes":"Comfortable and stylish men's footwear","mens-watches":"Sophisticated watches for men","mens-clothing":"Trendy clothing for men","mens-shirts":"Comfortable and stylish men's shirts","home-decoration":"Beautiful decor to enhance your space",furniture:"Quality furniture for every room",lighting:"Illuminate your space with style",automotive:"Car accessories and maintenance products",motorcycle:"Motorcycle gear and accessories",vehicle:"Automotive parts and accessories",sunglasses:"Protect your eyes with style",skincare:"Nourish and protect your skin","skin-care":"Nourish and protect your skin",fragrances:"Luxury perfumes and colognes",laptops:"Powerful computing solutions",smartphones:"Latest mobile technology",tablets:"Portable computing devices",headphones:"Premium audio experiences","mobile-accessories":"Essential mobile device accessories",books:"Knowledge and entertainment",sports:"Equipment for active lifestyles","sports-accessories":"Equipment and gear for sports enthusiasts",toys:"Fun and educational toys",baby:"Everything for your little ones",health:"Wellness and healthcare products",pets:"Care and comfort for your pets","womens-bags":"Stylish bags and purses for women","womens-dresses":"Elegant dresses for every occasion",tops:"Comfortable and trendy tops","kitchen-accessories":"Essential tools for your kitchen"}[e.toLowerCase()]||"Explore amazing products in this category");return n?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Vp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})}),(0,Vp.jsx)(Qp,{})]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[(0,Vp.jsxs)("div",{className:"text-center mb-16",children:[(0,Vp.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gray-900 mb-6",children:"All Categories"}),(0,Vp.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Explore our complete collection of products organized by category. Find exactly what you're looking for with our diverse range of offerings."}),(0,Vp.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[e.length," categories available"]})]}),(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((e,t)=>(0,Vp.jsx)(Pe,{to:`/category/${e.toLowerCase()}`,className:"group bg-white rounded-3xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden",children:(0,Vp.jsxs)("div",{className:"p-8",children:[(0,Vp.jsx)("div",{className:"text-6xl mb-6 group-hover:scale-110 transition-transform duration-200 text-center",children:s(e)}),(0,Vp.jsx)("h3",{className:"text-2xl font-bold text-gray-900 group-hover:text-primary-600 transition-colors duration-200 text-center capitalize mb-4",children:e.replace("-"," ")}),(0,Vp.jsx)("p",{className:"text-gray-600 text-center mb-6 leading-relaxed",children:a(e)}),(0,Vp.jsx)("div",{className:"flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,Vp.jsxs)("span",{className:"text-primary-600 font-semibold flex items-center",children:["Explore Category",(0,Vp.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})},t))}),(0,Vp.jsx)("div",{className:"text-center mt-16",children:(0,Vp.jsxs)(Pe,{to:"/search",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold rounded-xl shadow-medium hover:shadow-large transform hover:-translate-y-1 transition-all duration-200",children:["Browse All Products",(0,Vp.jsx)("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]}),(0,Vp.jsx)(Qp,{})]})};const _y=function(){const e=(0,i.useRef)(),t=(0,i.useRef)(),{currentUser:n,login:r,googleSignIn:s,loginAsGuest:a}=Bp(),[o,l]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[c,u]=(0,i.useState)({isOpen:!1,title:"",message:""}),[d,h]=(0,i.useState)(!1),f=te();return n?(0,Vp.jsx)(ve,{to:"/"}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[(0,Vp.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Vp.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-400 rounded-full opacity-10 animate-float"}),(0,Vp.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-purple-400 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,Vp.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-pink-400 rounded-full opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,Vp.jsx)("div",{className:"absolute bottom-40 right-10 w-24 h-24 bg-yellow-400 rounded-full opacity-10 animate-float",style:{animationDelay:"0.5s"}})]}),(0,Vp.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,Vp.jsxs)("div",{className:"w-full max-w-md",children:[(0,Vp.jsxs)("div",{className:"text-center mb-8",children:[(0,Vp.jsx)("h1",{className:"text-8xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"E-Store"}),(0,Vp.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto mb-6 rounded-full"})]}),(0,Vp.jsxs)("div",{className:"text-center mb-8",children:[(0,Vp.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mb-4 shadow-lg",children:(0,Vp.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vp.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Welcome Back! \ud83d\udc4b"}),(0,Vp.jsx)("p",{className:"text-gray-600 text-lg",children:"Sign in to your account and continue your shopping journey"})]}),(0,Vp.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 animate-scale-in",children:[(0,Vp.jsxs)("form",{onSubmit:async function(n){n.preventDefault();try{h(!0),await r(e.current.value,t.current.value),u({isOpen:!0,title:"Welcome Back! \ud83c\udf89",message:"Successfully logged in to your account. Ready to explore amazing products!"}),setTimeout(()=>f("/"),1500)}catch(s){let e="Failed to log in",t=s.message;switch(s.code){case Bn.INVALID_LOGIN_CREDENTIALS:e="Invalid login credentials",t="The email address and password you entered do not match. Please try again or create an account.";break;case Bn.USER_NOT_FOUND:e="Account not found",t="No account found with this email address. Please sign up first.";break;case Bn.TOO_MANY_ATTEMPTS_TRY_LATER:e="Too many login attempts",t="Too many failed login attempts. Please try again later.";break;default:t=s.message}l({isOpen:!0,title:"Oops! \ud83d\ude05",message:e,details:t})}h(!1)},className:"space-y-6",children:[(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Vp.jsx)("input",{ref:e,type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vp.jsx)("input",{ref:t,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"})]})]}),(0,Vp.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:d?(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]}),(0,Vp.jsxs)("div",{className:"relative my-6",children:[(0,Vp.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Vp.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Vp.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Vp.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Vp.jsxs)("div",{className:"space-y-3",children:[(0,Vp.jsxs)("button",{onClick:async function(){try{h(!0),await s(),u({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with Google! Ready to start shopping!"}),setTimeout(()=>f("/"),1500)}catch(e){l({isOpen:!0,title:"Google Sign-In Error! \ud83d\ude14",message:"Failed to log in with Google",details:e.message})}h(!1)},disabled:d,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Vp.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Vp.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Vp.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Vp.jsxs)("button",{onClick:async function(){try{h(!0),await a(),u({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. You can shop and browse products, but some features may be limited."}),setTimeout(()=>f("/"),1500)}catch(e){l({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}h(!1)},disabled:d,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})]}),(0,Vp.jsx)("div",{className:"text-center mt-6",children:(0,Vp.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,Vp.jsx)(Pe,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign up here"})]})})]})]})})]}),(0,Vp.jsx)(qp,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,title:"",message:"",details:""}),title:o.title,message:o.message,details:o.details}),(0,Vp.jsx)(Hp,{isOpen:c.isOpen,onClose:()=>u({isOpen:!1,title:"",message:""}),title:c.title,message:c.message})]})};const Ey=function(){const e=(0,i.useRef)(),t=(0,i.useRef)(),n=(0,i.useRef)(),r=(0,i.useRef)(),{currentUser:s,signup:a,googleSignIn:o,loginAsGuest:l}=Bp(),[c,u]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[d,h]=(0,i.useState)({isOpen:!1,title:"",message:""}),[f,p]=(0,i.useState)(!1),m=te();return s?(0,Vp.jsx)(ve,{to:"/"}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 relative overflow-hidden",children:[(0,Vp.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Vp.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-purple-400 rounded-full opacity-10 animate-float"}),(0,Vp.jsx)("div",{className:"absolute top-40 right-20 w-16 h-16 bg-pink-400 rounded-full opacity-10 animate-float",style:{animationDelay:"1s"}}),(0,Vp.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-orange-400 rounded-full opacity-10 animate-float",style:{animationDelay:"2s"}}),(0,Vp.jsx)("div",{className:"absolute bottom-40 right-10 w-24 h-24 bg-yellow-400 rounded-full opacity-10 animate-float",style:{animationDelay:"0.5s"}})]}),(0,Vp.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,Vp.jsxs)("div",{className:"w-full max-w-md",children:[(0,Vp.jsxs)("div",{className:"text-center mb-8",children:[(0,Vp.jsx)("h1",{className:"text-8xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 bg-clip-text text-transparent mb-4 animate-pulse",children:"E-Store"}),(0,Vp.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-600 mx-auto mb-6 rounded-full"})]}),(0,Vp.jsxs)("div",{className:"text-center mb-8",children:[(0,Vp.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full mb-4 shadow-lg",children:(0,Vp.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,Vp.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Join Our Community! \ud83d\ude80"}),(0,Vp.jsx)("p",{className:"text-gray-600 text-lg",children:"Create your account and unlock amazing shopping experiences"})]}),(0,Vp.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 animate-scale-in",children:[(0,Vp.jsxs)("form",{onSubmit:async function(s){if(s.preventDefault(),t.current.value===n.current.value){try{p(!0),await a(e.current.value,t.current.value,r.current.value),h({isOpen:!0,title:"Welcome to the Family! \ud83c\udf8a",message:"Your account has been created successfully! Welcome to our amazing store community."}),setTimeout(()=>m("/"),1500)}catch(i){let e="Failed to create an account",t=i.message;switch(i.code){case Bn.EMAIL_EXISTS:e="Email address is already in use",t="This email address is already registered. Please try logging in instead.";break;case Bn.WEAK_PASSWORD:e="Password is too weak",t="Password should be at least 6 characters long.";break;case Bn.INVALID_EMAIL:e="Invalid email address",t="Please enter a valid email address.";break;default:t=i.message}u({isOpen:!0,title:"Account Creation Failed! \ud83d\ude14",message:e,details:t})}p(!1)}else u({isOpen:!0,title:"Password Mismatch! \ud83d\udd10",message:"The passwords you entered do not match. Please try again.",details:""})},className:"space-y-6",children:[(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,Vp.jsx)("input",{ref:e,type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Vp.jsx)("input",{ref:t,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Create a strong password"})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vp.jsx)("input",{ref:n,type:"password",required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password"})]})]}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),(0,Vp.jsxs)("div",{className:"relative",children:[(0,Vp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Vp.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Vp.jsxs)("select",{ref:r,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,Vp.jsx)("option",{value:"user",children:"Customer"}),(0,Vp.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,Vp.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 px-4 rounded-xl font-medium hover:from-purple-600 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-lg",children:f?(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):(0,Vp.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Create Account"]})})]}),(0,Vp.jsxs)("div",{className:"relative my-6",children:[(0,Vp.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Vp.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,Vp.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,Vp.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,Vp.jsxs)("div",{className:"space-y-3",children:[(0,Vp.jsxs)("button",{onClick:async function(){try{p(!0),await o(),h({isOpen:!0,title:"Welcome! \ud83d\ude80",message:"Successfully signed in with Google! Ready to start shopping!"}),setTimeout(()=>m("/"),1500)}catch(e){u({isOpen:!0,title:"Google Sign-In Error! \ud83d\ude14",message:"Failed to sign up with Google",details:e.message})}p(!1)},disabled:f,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Vp.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Vp.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Vp.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Vp.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Vp.jsxs)("button",{onClick:async function(){try{p(!0),await l(),h({isOpen:!0,title:"Guest Mode Activated! \ud83d\udc4b",message:"You are now browsing as a guest. You can shop and browse products, but some features may be limited."}),setTimeout(()=>m("/"),1500)}catch(e){u({isOpen:!0,title:"Guest Login Error! \ud83d\ude05",message:"Failed to login as guest. Please try again.",details:e.message})}p(!1)},disabled:f,className:"w-full bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium hover:from-gray-200 hover:to-gray-300 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 shadow-md flex items-center justify-center",children:[(0,Vp.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Continue as Guest"]})]}),(0,Vp.jsx)("div",{className:"text-center mt-6",children:(0,Vp.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,Vp.jsx)(Pe,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-medium transition-colors",children:"Sign in here"})]})})]})]})})]}),(0,Vp.jsx)(qp,{isOpen:c.isOpen,onClose:()=>u({isOpen:!1,title:"",message:"",details:""}),title:c.title,message:c.message,details:c.details}),(0,Vp.jsx)(Hp,{isOpen:d.isOpen,onClose:()=>h({isOpen:!1,title:"",message:""}),title:d.title,message:d.message})]})};const ky=function(){const{currentUser:e}=Bp();return e?(0,Vp.jsx)(be,{}):(0,Vp.jsx)(ve,{to:"/login"})},Sy=()=>{const[e,t]=(0,i.useState)({name:"",email:"",subject:"",message:""}),[n,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[o,l]=(0,i.useState)({isOpen:!1,title:"",message:""}),c=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))};return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(qp,{isOpen:s.isOpen,onClose:()=>a({...s,isOpen:!1}),title:s.title,message:s.message,details:s.details}),(0,Vp.jsx)(Hp,{isOpen:o.isOpen,onClose:()=>l({...o,isOpen:!1}),title:o.title,message:o.message}),(0,Vp.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Vp.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Contact Us"}),(0,Vp.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),r(!0);try{const n=Mp.currentUser;if(!n)return a({isOpen:!0,title:"Authentication Required",message:"Please log in to send a message.",details:""}),void r(!1);const s={...e,userId:n.uid,timestamp:new Date,status:"unread"};await Op(Tf(Up,"contactMessages",n.uid,"messages"),s),l({isOpen:!0,title:"Message Sent! \ud83d\udce7",message:"Thank you for your message. We'll get back to you soon!"}),t({name:"",email:"",subject:"",message:""})}catch(s){console.error("Error sending message:",s),a({isOpen:!0,title:"Error Sending Message",message:"Failed to send your message. Please try again.",details:s.message})}finally{r(!1)}},className:"max-w-lg mx-auto",children:[(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"name",className:"block text-gray-700 font-bold mb-2",children:"Name"}),(0,Vp.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"email",className:"block text-gray-700 font-bold mb-2",children:"Email"}),(0,Vp.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"subject",className:"block text-gray-700 font-bold mb-2",children:"Subject"}),(0,Vp.jsx)("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("label",{htmlFor:"message",className:"block text-gray-700 font-bold mb-2",children:"Message"}),(0,Vp.jsx)("textarea",{id:"message",name:"message",rows:"5",value:e.message,onChange:c,className:"w-full px-3 py-2 border rounded",required:!0})]}),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",disabled:n,children:n?"Sending...":"Send Message"})]})]}),(0,Vp.jsx)(Qp,{})]})};const Cy=function(){return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Vp.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[(0,Vp.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"About Us"}),(0,Vp.jsxs)("div",{className:"max-w-2xl text-center",children:[(0,Vp.jsx)("p",{className:"mb-4 text-lg",children:"Welcome to my E-Commerce Store! We offer a wide variety of high-quality product to meet and satisfy your needs."}),(0,Vp.jsx)("p",{className:"mb-4 text-lg",children:"Our mission is to provide our customers with the best products at affordable prices. We are committed to delivering excellent customer service and ensuring your satisfaction with every purchase."}),(0,Vp.jsx)("p",{className:"mb-4 text-lg",children:"Thank you for choosing E-Commerce Store. If you have any questions or need assistance, please don't hesitate to contact us."})]})]})}),(0,Vp.jsx)(Qp,{})]})},jy=e=>{let{onFiltersChange:t,onSortChange:n,onClearFilters:r}=e;const[s,a]=(0,i.useState)({title:"",minPrice:"",maxPrice:"",minRating:"",maxRating:"",brand:"",category:"",inStock:!1,hasDiscount:!1}),[o,l]=(0,i.useState)("id"),[c,u]=(0,i.useState)("desc"),[d,h]=(0,i.useState)([]),[f,p]=(0,i.useState)([]),[m,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{y(),v()},[]);const y=async()=>{try{const e=await fetch("/api/products/categories/");if(e.ok){const t=await e.json();h(t)}}catch(e){console.error("Error fetching categories:",e)}},v=async()=>{try{const e=await fetch("/api/products/brands/");if(e.ok){const t=await e.json();p(t)}}catch(e){console.error("Error fetching brands:",e)}finally{g(!1)}},b=(e,n)=>{const r={...s,[e]:n};a(r),t(r)},x=(e,t)=>{l(e),u(t),n(e,t)};return m?(0,Vp.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,Vp.jsxs)("div",{className:"animate-pulse",children:[(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})}):(0,Vp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Vp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters & Sorting"}),(0,Vp.jsx)("button",{onClick:()=>{a({title:"",minPrice:"",maxPrice:"",minRating:"",maxRating:"",brand:"",category:"",inStock:!1,hasDiscount:!1}),l("id"),u("desc"),r()},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear All"})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Product Title"}),(0,Vp.jsx)("input",{type:"text",value:s.title,onChange:e=>b("title",e.target.value),placeholder:"Search by product title...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Price Range"}),(0,Vp.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Min Price"}),(0,Vp.jsx)("input",{type:"number",value:s.minPrice,onChange:e=>b("minPrice",e.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Price"}),(0,Vp.jsx)("input",{type:"number",value:s.maxPrice,onChange:e=>b("maxPrice",e.target.value),placeholder:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Rating Range"}),(0,Vp.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Min Rating"}),(0,Vp.jsxs)("select",{value:s.minRating,onChange:e=>b("minRating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Vp.jsx)("option",{value:"",children:"Any Rating"}),(0,Vp.jsx)("option",{value:"1",children:"1+ Stars"}),(0,Vp.jsx)("option",{value:"2",children:"2+ Stars"}),(0,Vp.jsx)("option",{value:"3",children:"3+ Stars"}),(0,Vp.jsx)("option",{value:"4",children:"4+ Stars"}),(0,Vp.jsx)("option",{value:"5",children:"5 Stars"})]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Max Rating"}),(0,Vp.jsxs)("select",{value:s.maxRating,onChange:e=>b("maxRating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Vp.jsx)("option",{value:"",children:"Any Rating"}),(0,Vp.jsx)("option",{value:"1",children:"1 Star"}),(0,Vp.jsx)("option",{value:"2",children:"2 Stars"}),(0,Vp.jsx)("option",{value:"3",children:"3 Stars"}),(0,Vp.jsx)("option",{value:"4",children:"4 Stars"}),(0,Vp.jsx)("option",{value:"5",children:"5 Stars"})]})]})]})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Category"}),(0,Vp.jsxs)("select",{value:s.category,onChange:e=>b("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Vp.jsx)("option",{value:"",children:"All Categories"}),d.map(e=>(0,Vp.jsx)("option",{value:e,children:e},e))]})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Brand"}),(0,Vp.jsxs)("select",{value:s.brand,onChange:e=>b("brand",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Vp.jsx)("option",{value:"",children:"All Brands"}),f.map(e=>(0,Vp.jsx)("option",{value:e,children:e},e))]})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Availability"}),(0,Vp.jsxs)("div",{className:"space-y-2",children:[(0,Vp.jsxs)("label",{className:"flex items-center",children:[(0,Vp.jsx)("input",{type:"checkbox",checked:s.inStock,onChange:e=>b("inStock",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Vp.jsx)("span",{className:"text-sm text-gray-700",children:"In Stock Only"})]}),(0,Vp.jsxs)("label",{className:"flex items-center",children:[(0,Vp.jsx)("input",{type:"checkbox",checked:s.hasDiscount,onChange:e=>b("hasDiscount",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Vp.jsx)("span",{className:"text-sm text-gray-700",children:"On Sale Only"})]})]})]}),(0,Vp.jsxs)("div",{className:"mb-6",children:[(0,Vp.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Sort By"}),(0,Vp.jsxs)("div",{className:"space-y-2",children:[(0,Vp.jsx)("button",{onClick:()=>x("price","asc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("price"===o&&"asc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Price: Low to High"}),(0,Vp.jsx)("button",{onClick:()=>x("price","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("price"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Price: High to Low"}),(0,Vp.jsx)("button",{onClick:()=>x("rating","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("rating"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Highest Rated"}),(0,Vp.jsx)("button",{onClick:()=>x("created_at","desc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("created_at"===o&&"desc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Newest First"}),(0,Vp.jsx)("button",{onClick:()=>x("title","asc"),className:"w-full text-left px-3 py-2 rounded-md text-sm "+("title"===o&&"asc"===c?"bg-blue-100 text-blue-700":"hover:bg-gray-100"),children:"Name: A to Z"})]})]})]})},Ty=()=>{const[e]=Me(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(1),[u,d]=(0,i.useState)(!0),[h,f]=(0,i.useState)({}),[p,m]=(0,i.useState)("id"),[g,y]=(0,i.useState)("desc"),{currentUser:v}=Bp(),b=e.get("q")||"",x=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;try{s(!0);const a=new URLSearchParams({page:e.toString(),page_size:"12"});b&&(a.append("search",b),a.append("type","advanced")),t.title&&a.append("title",t.title),t.minPrice&&a.append("min_price",t.minPrice),t.maxPrice&&a.append("max_price",t.maxPrice),t.minRating&&a.append("min_rating",t.minRating),t.maxRating&&a.append("max_rating",t.maxRating),t.category&&a.append("category",t.category),t.brand&&a.append("brand",t.brand),t.inStock&&a.append("in_stock","true"),t.hasDiscount&&a.append("has_discount","true"),a.append("sort",r),a.append("order",i);const o=await fetch(`/api/products/?${a.toString()}`);if(!o.ok)throw new Error("Failed to fetch products");const l=await o.json();n(1===e?l.results||l:e=>[...e,...l.results||l]),void 0!==l.count&&d(null!==l.next),c(e)}catch(a){console.error("Error fetching products:",a)}finally{s(!1)}},[b,h,p,g]),w=(0,i.useCallback)(async()=>{if(v)try{const e=Tf(Up,"users",v.uid,"favorites"),t=(await Tp(e)).docs.map(e=>e.data().productId);o(t)}catch(e){console.error("Error fetching favorites:",e)}},[v]);(0,i.useEffect)(()=>{x(1),v&&w()},[b,x,v,w]);return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Vp.jsx)("div",{className:"container mx-auto px-4",children:(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Vp.jsxs)("div",{className:"mb-8",children:[(0,Vp.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Search Results"}),b&&(0,Vp.jsxs)("p",{className:"text-gray-600",children:['Showing results for "',b,'"']})]}),(0,Vp.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,Vp.jsx)("div",{className:"lg:col-span-1",children:(0,Vp.jsx)(jy,{onFiltersChange:e=>{f(e),x(1,e,p,g)},onSortChange:(e,t)=>{m(e),y(t),x(1,h,e,t)},onClearFilters:()=>{f({}),m("id"),y("desc"),x(1,{},"id","desc")}})}),(0,Vp.jsx)("div",{className:"lg:col-span-3",children:r&&0===t.length?(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,Vp.jsx)("div",{className:"h-48 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]},t))}):0===t.length?(0,Vp.jsxs)("div",{className:"text-center py-12",children:[(0,Vp.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Vp.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Vp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,Vp.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{return(0,Vp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Vp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Vp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Vp.jsx)("button",{onClick:()=>(async e=>{if(v)try{const t=Tf(Up,"users",v.uid,"favorites");if(a.includes(e)){const n=(await Tp(fp(t,mp("productId","==",e)))).docs[0];n&&(await Rp(n.ref),o(t=>t.filter(t=>t!==e)))}else await Op(t,{productId:e}),o(t=>[...t,e])}catch(t){console.error("Error toggling favorite:",t)}else alert("Please log in to add favorites")})(e.id),className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 "+(a.includes(e.id)?"bg-red-500 text-white shadow-lg":"bg-white/80 backdrop-blur-sm text-gray-400 hover:bg-white hover:text-red-500"),title:a.includes(e.id)?"Remove from favorites":"Add to favorites",children:(0,Vp.jsx)("svg",{className:"w-5 h-5",fill:a.includes(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.discount_percentage>0&&(0,Vp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Vp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Vp.jsx)("div",{className:"flex items-center",children:(t=e.rating,[...Array(5)].map((e,n)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(t)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n)))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Vp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Vp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Vp.jsxs)("div",{className:"flex space-x-2",children:[(0,Vp.jsx)(Pe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Vp.jsx)("button",{onClick:()=>(e=>{console.log("Adding to cart:",e)})(e),disabled:0===e.stock,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:"Add to Cart"})]})]})]},e.id);var t})}),u&&(0,Vp.jsx)("div",{className:"text-center mt-8",children:(0,Vp.jsx)("button",{onClick:()=>x(l+1),disabled:r,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:r?"Loading...":"Load More"})})]})})]})]})})}),(0,Vp.jsx)(Qp,{})]})},Iy=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)({isOpen:!1,actionType:"favorites"}),{currentUser:c}=Bp(),u=(0,i.useCallback)(()=>c&&!c.isAnonymous,[c]),d=(0,i.useCallback)(async()=>{if(!u())return l({isOpen:!0,actionType:"favorites"}),void r(!1);try{r(!0);const e=Mp.currentUser;if(e){const n=Tf(Up,"users",e.uid,"favorites"),s=(await Tp(n)).docs.map(e=>e.data().productId);if(0===s.length)return t([]),void r(!1);const i=`/api/products/?ids=${s.join(",")}`,a=await fetch(i);if(!a.ok)throw new Error(`Failed to fetch favorite products: ${a.status}`);const o=await a.json(),l=(o.results||o).filter(e=>s.includes(e.id));t(l)}}catch(s){console.error("Error fetching favorites:",s),a("Failed to load favorites")}finally{r(!1)}},[u]);(0,i.useEffect)(()=>{d()},[d]);const h=async e=>{if(c)try{const n=fp(Tf(Up,"users",c.uid,"favorites"),mp("productId","==",e)),r=await Tp(n);if(!r.empty){const n=r.docs[0];await Rp(n.ref),t(t=>t.filter(t=>t.id!==e))}}catch(s){console.error("Error removing product from favorites:",s),alert("Failed to remove from favorites.")}};return n?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,Vp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your favorites..."})]})}),(0,Vp.jsx)(Qp,{})]}):s?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Vp.jsxs)("div",{className:"text-center",children:[(0,Vp.jsxs)("div",{className:"text-red-500 text-xl mb-4",children:["Error: ",s]}),s.includes("Please log in")?(0,Vp.jsx)(Pe,{to:"/login",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Go to Login"}):(0,Vp.jsx)("button",{onClick:d,className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"Try Again"})]})}),(0,Vp.jsx)(Qp,{})]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(Wp,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,actionType:"favorites"}),actionType:o.actionType}),(0,Vp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,Vp.jsxs)("div",{className:"text-center mb-12",children:[(0,Vp.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-4",children:"My Favorites"}),(0,Vp.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Your saved products and items you love"})]}),e.length>0?(0,Vp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,Vp.jsxs)("div",{className:"group bg-white rounded-2xl shadow-soft hover:shadow-large transition-all duration-300 transform hover:-translate-y-2",children:[(0,Vp.jsxs)("div",{className:"relative w-full",style:{paddingBottom:"100%"},children:[(0,Vp.jsx)("img",{src:e.thumbnail||`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`,alt:e.title,className:"absolute inset-0 w-full h-full object-cover rounded-t-2xl group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:t=>{var n;const r=null===(n=e.category)||void 0===n?void 0:n.toLowerCase();let s=`https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=300&fit=crop&random=${e.id}`;"groceries"===r?s=`https://images.unsplash.com/photo-1542838132-92c53300491e?w=300&h=300&fit=crop&random=${e.id}`:"electronics"===r?s=`https://images.unsplash.com/photo-1498049794561-7780e7231661?w=300&h=300&fit=crop&random=${e.id}`:"clothing"===r&&(s=`https://images.unsplash.com/photo-1445205170230-053b83016050?w=300&h=300&fit=crop&random=${e.id}`),t.target.src=s}}),(0,Vp.jsx)("button",{onClick:()=>h(e.id),className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-all duration-200",title:"Remove from favorites",children:(0,Vp.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.discount_percentage>0&&(0,Vp.jsxs)("div",{className:"absolute top-3 left-3 bg-accent-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",e.discount_percentage,"%"]})]}),(0,Vp.jsxs)("div",{className:"p-6",children:[(0,Vp.jsx)("div",{className:"text-xs font-medium text-primary-600 uppercase tracking-wide mb-2",children:e.category}),(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,Vp.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Vp.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",e.rating,")"]})]}),(0,Vp.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Vp.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),e.discount_percentage>0&&(0,Vp.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]})]}),(0,Vp.jsx)("div",{className:"text-sm text-gray-500",children:e.stock>0?`${e.stock} left`:"Out of stock"})]}),(0,Vp.jsxs)("div",{className:"flex space-x-2",children:[(0,Vp.jsx)(Pe,{to:`/products/${e.id}`,className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-200 text-center",children:"View Details"}),(0,Vp.jsx)("button",{onClick:()=>h(e.id),className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors duration-200",children:"Remove"})]})]})]},e.id))}):(0,Vp.jsxs)("div",{className:"text-center py-12",children:[(0,Vp.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 text-gray-300",children:(0,Vp.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,Vp.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No favorites yet"}),(0,Vp.jsx)("p",{className:"text-gray-600 mb-6",children:"Start adding products to your favorites to see them here"}),(0,Vp.jsx)(Pe,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors duration-200",children:"Browse Products"})]})]}),(0,Vp.jsx)(Qp,{})]})};const Ay=function(){const{currentUser:e,updateProfile:t,getProfile:n}=Bp(),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)(""),[l,c]=(0,i.useState)({isOpen:!1,actionType:"profile"}),u=(0,i.useCallback)(()=>e&&!e.isAnonymous,[e]),d=(0,i.useRef)(),h=(0,i.useRef)(),f=(0,i.useRef)(),p=(0,i.useRef)(),m=(0,i.useRef)(),g=(0,i.useRef)(),y=(0,i.useRef)(),v=(0,i.useRef)(),b=(0,i.useRef)(),x=(0,i.useRef)();return(0,i.useEffect)(()=>{u()?async function(){if(e){s(!0);const e=await n();e&&(d.current.value=e.shippingAddressLine1||"",h.current.value=e.shippingAddressLine2||"",f.current.value=e.shippingCity||"",p.current.value=e.shippingState||"",m.current.value=e.shippingZip||"",g.current.value=e.billingAddressLine1||"",y.current.value=e.billingAddressLine2||"",v.current.value=e.billingCity||"",b.current.value=e.billingState||"",x.current.value=e.billingZip||""),s(!1)}}():c({isOpen:!0,actionType:"profile"})},[e,n,u]),(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(Wp,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,actionType:"profile"}),actionType:l.actionType}),(0,Vp.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Vp.jsxs)("div",{className:"max-w-4xl w-full space-y-8",children:[(0,Vp.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"My Profile"}),a&&(0,Vp.jsx)("p",{className:"text-center text-sm text-green-600",children:a}),(0,Vp.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async function(e){e.preventDefault(),s(!0);try{await t({shippingAddressLine1:d.current.value,shippingAddressLine2:h.current.value,shippingCity:f.current.value,shippingState:p.current.value,shippingZip:m.current.value,billingAddressLine1:g.current.value,billingAddressLine2:y.current.value,billingCity:v.current.value,billingState:b.current.value,billingZip:x.current.value}),o("Profile updated successfully")}catch(n){o("Failed to update profile"),console.error("Error updating profile:",n)}s(!1)},children:[(0,Vp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Billing Information"}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"billing-address-line1",className:"block text-gray-700",children:"Billing Address Line 1"}),(0,Vp.jsx)("input",{type:"text",id:"billing-address-line1",ref:g,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"billing-address-line2",className:"block text-gray-700",children:"Billing Address Line 2"}),(0,Vp.jsx)("input",{type:"text",id:"billing-address-line2",ref:y,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"billing-city",className:"block text-gray-700",children:"City"}),(0,Vp.jsx)("input",{type:"text",id:"billing-city",ref:v,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"billing-state",className:"block text-gray-700",children:"State/Province"}),(0,Vp.jsx)("input",{type:"text",id:"billing-state",ref:b,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"billing-zip",className:"block text-gray-700",children:"Postal/Zip Code"}),(0,Vp.jsx)("input",{type:"text",id:"billing-zip",ref:x,required:!0,className:"w-full px-3 py-2 border rounded"})]})]}),(0,Vp.jsxs)("div",{children:[(0,Vp.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Shipping Information"}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"shipping-address-line1",className:"block text-gray-700",children:"Shipping Address Line 1"}),(0,Vp.jsx)("input",{type:"text",id:"shipping-address-line1",ref:d,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"shipping-address-line2",className:"block text-gray-700",children:"Shipping Address Line 2"}),(0,Vp.jsx)("input",{type:"text",id:"shipping-address-line2",ref:h,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"shipping-city",className:"block text-gray-700",children:"City"}),(0,Vp.jsx)("input",{type:"text",id:"shipping-city",ref:f,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"shipping-state",className:"block text-gray-700",children:"State/Province"}),(0,Vp.jsx)("input",{type:"text",id:"shipping-state",ref:p,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{htmlFor:"shipping-zip",className:"block text-gray-700",children:"Postal/Zip Code"}),(0,Vp.jsx)("input",{type:"text",id:"shipping-zip",ref:m,required:!0,className:"w-full px-3 py-2 border rounded"})]})]})]}),(0,Vp.jsx)("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r?"Saving...":"Save Profile"})]})]})}),(0,Vp.jsx)(Qp,{})]})},Ry=()=>(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Vp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Vp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Admin Functions"}),(0,Vp.jsxs)("div",{className:"flex flex-col space-y-6 items-center",children:[(0,Vp.jsx)(Pe,{to:"/product-crud",className:"bg-gray-700 hover:bg-gray-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Product Control"}),(0,Vp.jsx)(Pe,{to:"/review-moderation",className:"bg-blue-600 hover:bg-blue-500 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Review Moderation / Server Status"})]})]})}),(0,Vp.jsx)(Qp,{})]}),Oy=()=>(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Vp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Vp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Product Control"}),(0,Vp.jsxs)("div",{className:"flex flex-col space-y-6 items-center",children:[(0,Vp.jsx)(Pe,{to:"/add-product",className:"bg-blue-500 hover:bg-blue-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Add Product"}),(0,Vp.jsx)(Pe,{to:"/update-product",className:"bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Update Product"}),(0,Vp.jsx)(Pe,{to:"/delete-product",className:"bg-red-500 hover:bg-red-600 text-white py-3 px-8 rounded-full text-lg font-semibold shadow-md transition duration-300 ease-in-out",children:"Delete Product"})]})]})}),(0,Vp.jsx)(Qp,{})]}),Py=()=>{const[e,t]=(0,i.useState)({title:"",description:"",category:"",price:"",discount_percentage:"",rating:"",stock:"",brand:"",sku:"",weight:"",warranty_information:"",shipping_information:"",availability_status:"",return_policy:"",minimum_order_quantity:"",thumbnail:"",images:{},dimensions:{width:"",height:"",depth:""}}),n=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))};return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"p-6 bg-gray-900 text-white min-h-screen flex justify-center items-center",children:(0,Vp.jsxs)("div",{className:"container max-w-lg mx-auto bg-gray-800 p-6 rounded shadow-lg",children:[(0,Vp.jsx)(Pe,{to:"/product-crud",className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 text-center mb-6 block",children:"Back to Product Control"}),(0,Vp.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center text-white",children:"Add Product"}),(0,Vp.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r={...e,title:e.title||"N/A",description:e.description||"N/A",category:e.category||"N/A",price:e.price||0,discount_percentage:e.discount_percentage||0,rating:e.rating||0,stock:e.stock||0,brand:e.brand||"N/A",sku:e.sku||"N/A",weight:e.weight||0,warranty_information:e.warranty_information||"N/A",shipping_information:e.shipping_information||"N/A",availability_status:e.availability_status||"N/A",return_policy:e.return_policy||"N/A",minimum_order_quantity:e.minimum_order_quantity||1,thumbnail:e.thumbnail||"https://via.placeholder.com/150",images:e.images||{},dimensions:{width:e.dimensions.width||0,height:e.dimensions.height||0,depth:e.dimensions.depth||0}};try{await(async e=>{try{console.log("Product Data Sent:",e);const t=await fy.post(`${py}/products/`,e);return console.log("Response from Server:",t.data),t.data}catch(t){throw t.response?console.error("Error Response from Server:",t.response.data):console.error("Error adding product:",t.message),t}})(r),t({title:"",description:"",category:"",price:"",discount_percentage:"",rating:"",stock:"",brand:"",sku:"",weight:"",warranty_information:"",shipping_information:"",availability_status:"",return_policy:"",minimum_order_quantity:"",thumbnail:"",images:{},dimensions:{width:"",height:"",depth:""}}),alert("Product added successfully")}catch(s){console.error("Error adding product:",s)}},className:"space-y-4",children:[Object.keys(e).map(t=>"reviews"!==t&&"dimensions"!==t&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:t.replace(/_/g," ").toUpperCase()}),(0,Vp.jsx)("input",{type:"text",name:t,value:e[t],onChange:n,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",style:{transition:"width 0.4s ease-in-out",minWidth:"150px",maxWidth:"100%"}})]},t)),(0,Vp.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"Dimensions"}),Object.keys(e.dimensions).map(n=>(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:n.replace(/_/g," ").toUpperCase()}),(0,Vp.jsx)("input",{type:"text",name:n,value:e.dimensions[n],onChange:e=>t(t=>({...t,dimensions:{...t.dimensions,[n]:e.target.value}})),className:"w-full bg-gray-700 border border-gray-600 rounded-md py-2 px-3 text-white shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all",style:{transition:"width 0.4s ease-in-out",minWidth:"150px",maxWidth:"100%"}})]},n)),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 px-8 rounded-full hover:bg-blue-600 transition duration-300 ease-in-out",children:"Add Product"})]})]})}),(0,Vp.jsx)(Qp,{})]})},Ly="http://localhost:3000/api",Dy=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)("id"),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)("");return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen flex flex-col items-center py-12",children:(0,Vp.jsxs)("div",{className:"w-full max-w-lg bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,Vp.jsx)(Pe,{to:"/product-crud",className:"block bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full text-center mb-6 font-semibold transition duration-300 ease-in-out",children:"Back to Product Control"}),(0,Vp.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center text-white",children:"Delete Product"}),(0,Vp.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{let t;if("id"===s?t=await fy.get(`${Ly}/products/${e}/`):"title"===s&&(t=await fy.get(`${Ly}/products/`,{params:{search:n,type:"regular"}})),t.data){const e="id"===s?t.data:t.data[0];l(e),h(e.id),u(!1)}else u(!0),l(null)}catch(r){console.error("Error fetching product:",r),l(null),u(!0)}},className:"bg-gray-700 p-6 rounded shadow-md mb-6",children:[(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Search By"}),(0,Vp.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Vp.jsx)("option",{value:"id",children:"Product ID"}),(0,Vp.jsx)("option",{value:"title",children:"Product Title"})]})]}),"id"===s&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Product ID"}),(0,Vp.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),"title"===s&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Product Title"}),(0,Vp.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),className:"mt-1 block w-full p-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 rounded-full hover:bg-green-600 transition duration-300 ease-in-out",children:"Search Product"})]}),c&&(0,Vp.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md text-center mb-6",children:[(0,Vp.jsx)("strong",{className:"font-bold",children:"Product not found!"}),(0,Vp.jsx)("span",{className:"block",children:"Please search for a valid product ID or title."})]}),o&&(0,Vp.jsxs)("div",{className:"bg-gray-700 p-6 rounded-lg shadow-md text-white",children:[(0,Vp.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Product to be Deleted"}),(0,Vp.jsxs)("p",{className:"mb-2",children:[(0,Vp.jsx)("strong",{children:"Product ID:"})," ",o.id]}),(0,Vp.jsxs)("p",{className:"mb-2",children:[(0,Vp.jsx)("strong",{children:"Title:"})," ",o.title]}),(0,Vp.jsxs)("p",{className:"mb-2",children:[(0,Vp.jsx)("strong",{children:"Description:"})," ",o.description]}),(0,Vp.jsxs)("p",{className:"mb-2",children:[(0,Vp.jsx)("strong",{children:"Category:"})," ",o.category]}),(0,Vp.jsxs)("p",{className:"mb-4",children:[(0,Vp.jsx)("strong",{children:"Price:"})," $",o.price]}),(0,Vp.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),d)try{await fy.delete(`${Ly}/products/${d}`),h(""),alert("Product deleted successfully"),l(null)}catch(t){console.error("Error deleting product:",t)}else alert("Please select a product to delete.")},children:(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white py-2 rounded-full hover:bg-red-600 transition duration-300 ease-in-out",disabled:!o,children:"Delete Product"})})]})]})}),(0,Vp.jsx)(Qp,{})]})},My="http://localhost:3000/api",Fy=()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)("id"),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)({}),f=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r})),h(e=>({...e,[n]:r}))},p=e=>{const{name:n,value:r}=e.target;t(e=>({...e,dimensions:{...e.dimensions,[n]:r}})),h(e=>({...e,dimensions:{...e.dimensions,[n]:r}}))},m=async n=>{const r=e.reviews[n].id,s=e.id;try{await((e,t)=>fy.delete(`${py}/products/${e}/reviews/${t}`))(s,r),t(e=>{const t=[...e.reviews];return t.splice(n,1),{...e,reviews:t}}),alert("Review removed successfully")}catch(i){console.error("Error removing review:",i)}};return(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen py-12",children:(0,Vp.jsxs)("div",{className:"container mx-auto px-6",children:[(0,Vp.jsx)(Pe,{to:"/product-crud",className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded mb-6 inline-block",children:"Back to Product Control"}),(0,Vp.jsx)("h2",{className:"text-3xl font-bold text-center mb-10",children:"Update Product"}),(0,Vp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{let e;"id"===o?e=await fy.get(`${My}/products/${n}/`):"title"===o&&(e=await fy.get(`${My}/products/`,{params:{search:s,type:"regular"}})),e.data?(t("id"===o?e.data:e.data[0]),u(!1)):(u(!0),t(null))}catch(r){console.error("Error fetching product:",r),t(null),u(!0)}},className:"bg-gray-800 p-6 rounded shadow-lg mb-6 mx-auto max-w-xl text-left",children:[(0,Vp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Search Product"}),(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Search By"}),(0,Vp.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",children:[(0,Vp.jsx)("option",{value:"id",children:"Product ID"}),(0,Vp.jsx)("option",{value:"title",children:"Product Title"})]})]}),"id"===o&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Product ID"}),(0,Vp.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",required:!0})]}),"title"===o&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:"Product Title"}),(0,Vp.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm",required:!0})]}),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Search Product"})]}),c&&(0,Vp.jsxs)("div",{className:"bg-red-800 border border-red-600 text-red-100 px-4 py-3 rounded relative mb-6",children:[(0,Vp.jsx)("strong",{children:"Product not found!"})," Please search for a valid product ID or title."]}),e&&(0,Vp.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{const n={...d};await(async(e,t)=>{try{return(await fy.patch(`${py}/products/${e}/`,t)).data}catch(n){throw console.error("Error updating product:",n),n}})(e.id,n),t(null),h({}),alert("Product updated successfully")}catch(r){console.error("Error updating product with PATCH:",r)}},className:"bg-gray-800 p-6 rounded shadow-lg mx-auto max-w-xl text-left",children:[(0,Vp.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Edit Product Information"}),Object.keys(e).map(t=>"reviews"!==t&&"dimensions"!==t&&(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:t.replace(/_/g," ").toUpperCase()}),(0,Vp.jsx)("input",{type:"text",name:t,value:e[t],onChange:f,className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},t)),(0,Vp.jsx)("h3",{className:"text-xl font-semibold mt-8 mb-4",children:"Dimensions"}),e.dimensions&&Object.keys(e.dimensions).map(t=>(0,Vp.jsxs)("div",{className:"mb-4",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:t.replace(/_/g," ").toUpperCase()}),(0,Vp.jsx)("input",{type:"text",name:t,value:e.dimensions[t],onChange:p,className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},t)),(0,Vp.jsx)("button",{type:"submit",className:"w-full bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600 mt-6",children:"Update Product"})]}),(null===e||void 0===e?void 0:e.reviews)&&(0,Vp.jsxs)("div",{className:"bg-gray-800 p-6 rounded shadow-lg mx-auto max-w-xl mt-6",children:[(0,Vp.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Reviews"}),e.reviews.map((e,n)=>(0,Vp.jsxs)("div",{className:"mb-6 p-4 border border-gray-600 rounded-md",children:[(0,Vp.jsxs)("h4",{className:"text-lg font-semibold mb-2",children:["Review ",n+1]}),Object.keys(e).map(r=>(0,Vp.jsxs)("div",{className:"mb-2",children:[(0,Vp.jsx)("label",{className:"block text-sm font-medium text-gray-200",children:r.replace(/_/g," ").toUpperCase()}),(0,Vp.jsx)("input",{type:"text",name:r,value:e[r],onChange:e=>((e,n)=>{const{name:r,value:s}=e.target;t(e=>{const t=[...e.reviews];return t[n]={...t[n],[r]:s},{...e,reviews:t}})})(e,n),className:"mt-1 block w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md shadow-sm"})]},r)),(0,Vp.jsx)("button",{onClick:()=>m(n),className:"w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 mt-2",children:"Remove Review"})]},n)),(0,Vp.jsx)("button",{onClick:()=>{t(e=>({...e,reviews:[...e.reviews,{rating:"",comment:"",reviewer_name:"",reviewer_email:""}]}))},className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 mt-2",children:"Add Review"})]})]})}),(0,Vp.jsx)(Qp,{})]})},Uy=()=>{const{fetchBillingAndShippingInfo:e,placeOrder:t,currentUser:n}=Bp(),r=te(),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)([]),[d,h]=(0,i.useState)(!0),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)({isOpen:!1,actionType:"checkout"}),w=(0,i.useCallback)(()=>n&&!n.isAnonymous,[n]);(0,i.useEffect)(()=>{if(!w())return x({isOpen:!0,actionType:"checkout"}),void h(!1);(async()=>{try{const t=await e();t&&(a({line1:t.billingAddressLine1||"",line2:t.billingAddressLine2||"",city:t.billingCity||"",state:t.billingState||"",zip:t.billingZip||""}),l({line1:t.shippingAddressLine1||"",line2:t.shippingAddressLine2||"",city:t.shippingCity||"",state:t.shippingState||"",zip:t.shippingZip||""}))}catch(m){console.error("Error fetching billing and shipping info:",m),g("There was an error loading profile information.")}})(),(async()=>{const e=Mp.currentUser;if(e)try{const t=Tf(Up,"users",e.uid,"cart"),n=(await Tp(t)).docs.map(e=>({id:e.id,...e.data()}));u(n)}catch(m){console.error("Error loading cart:",m),g("Failed to load cart items.")}})(),h(!1)},[e,n,w]);const N=()=>{let e=0,t=0,n=[];c.forEach(r=>{const s=parseFloat(r.price)||0,i=parseInt(r.quantity,10)||1,a=r.discount?parseFloat(r.discount)/100:0,o=s*a*i;t+=o,a>0&&n.push(`${(100*a).toFixed(0)}%`),e+=s*i-o});const r=.13*e,s=(e+r).toFixed(2);return{subtotal:e.toFixed(2),discountTotal:t.toFixed(2),discountPercentages:n.join(", "),tax:r.toFixed(2),total:s}},{subtotal:_,discountTotal:E,discountPercentages:k,tax:S,total:C}=N();return d?(0,Vp.jsx)("div",{children:"Loading..."}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)(Wp,{isOpen:b.isOpen,onClose:()=>x({isOpen:!1,actionType:"checkout"}),actionType:b.actionType}),(0,Vp.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Vp.jsx)("h2",{className:"text-4xl font-extrabold mb-10 text-center text-blue-700",children:"Checkout"}),m&&(0,Vp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center",children:m}),f&&(0,Vp.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6 text-center",children:"\ud83c\udf89 Order Confirmed! Thank you for your purchase."}),y&&(0,Vp.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center",children:(0,Vp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[(0,Vp.jsx)("h3",{className:"text-xl font-semibold text-red-600 mb-4",children:"Incomplete Profile Information"}),(0,Vp.jsx)("p",{className:"text-gray-700 mb-4",children:"Please update your billing and shipping information in your profile and try again."}),(0,Vp.jsx)("button",{onClick:()=>r("/profile"),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Go to Profile"}),(0,Vp.jsx)("button",{onClick:()=>v(!1),className:"ml-4 bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Close"})]})}),(0,Vp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6 border-t-4 border-blue-500",children:[(0,Vp.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Billing Address"}),s?(0,Vp.jsxs)("div",{className:"text-gray-700",children:[(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Address Line 1:"})," ",s.line1]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Address Line 2:"})," ",s.line2]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"City:"})," ",s.city]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"State/Province:"})," ",s.state]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Postal/Zip Code:"})," ",s.zip]})]}):(0,Vp.jsx)("p",{className:"text-red-500",children:"No billing information found."})]}),(0,Vp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6 border-t-4 border-green-500",children:[(0,Vp.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-green-600",children:"Shipping Address"}),o?(0,Vp.jsxs)("div",{className:"text-gray-700",children:[(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Address Line 1:"})," ",o.line1]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Address Line 2:"})," ",o.line2]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"City:"})," ",o.city]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"State/Province:"})," ",o.state]}),(0,Vp.jsxs)("p",{children:[(0,Vp.jsx)("strong",{children:"Postal/Zip Code:"})," ",o.zip]})]}):(0,Vp.jsx)("p",{className:"text-red-500",children:"No shipping information found."})]}),(0,Vp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6 border-t-4 border-yellow-500",children:[(0,Vp.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-yellow-600",children:"Order Summary"}),c.length>0?c.map((e,t)=>(0,Vp.jsxs)("div",{className:"flex justify-between items-center mb-6 text-gray-800",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsxs)("div",{className:"flex items-center",children:[(0,Vp.jsxs)("span",{className:"font-bold mr-2",children:[t+1,"."]}),(0,Vp.jsx)("span",{className:"font-medium text-lg",children:e.name})]}),(0,Vp.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,Vp.jsx)("button",{onClick:()=>(async e=>{const t=c.map(t=>{if(t.id===e&&t.quantity>1){const n=t.quantity-1;return Ap(If(Up,"checkout",Mp.currentUser.uid,"items",e),{quantity:n}),{...t,quantity:n}}return t});u(t)})(e.id),className:"px-3 py-1 bg-gray-300 rounded-full",children:"-"}),(0,Vp.jsx)("span",{className:"font-semibold text-lg",children:e.quantity||1}),(0,Vp.jsx)("button",{onClick:()=>(async e=>{const t=c.map(t=>{if(t.id===e){const n=Math.min((t.quantity||1)+1,t.stock);return n!==t.quantity&&Ap(If(Up,"checkout",Mp.currentUser.uid,"items",e),{quantity:n}),{...t,quantity:n}}return t});u(t)})(e.id),className:"px-3 py-1 bg-gray-300 rounded-full",children:"+"})]})]}),(0,Vp.jsxs)("div",{className:"text-lg font-semibold",children:["$",e.price]}),(0,Vp.jsx)("button",{onClick:()=>(async e=>{const t=Mp.currentUser;if(t)try{await Rp(If(Up,"checkout",t.uid,"items",e)),u(c.filter(t=>t.id!==e))}catch(m){console.error("Error removing item from checkout:",m)}})(e.id),className:"ml-4 bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600",children:"Remove"})]},t)):(0,Vp.jsx)("p",{className:"text-red-500",children:"Your cart is empty."}),(0,Vp.jsx)("hr",{className:"my-4"}),(0,Vp.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,Vp.jsx)("span",{className:"text-lg",children:"Subtotal:"}),(0,Vp.jsxs)("span",{className:"text-lg font-medium",children:["$",_]})]}),(0,Vp.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,Vp.jsxs)("span",{className:"text-lg",children:["Discount (",k,"):"]}),(0,Vp.jsxs)("span",{className:"text-lg font-medium",children:["-$",E]})]}),(0,Vp.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,Vp.jsx)("span",{className:"text-lg",children:"Tax (13%):"}),(0,Vp.jsxs)("span",{className:"text-lg font-medium",children:["$",S]})]}),(0,Vp.jsxs)("div",{className:"flex justify-between mt-4 font-bold",children:[(0,Vp.jsx)("span",{className:"text-xl",children:"Total:"}),(0,Vp.jsxs)("span",{className:"text-xl text-blue-700",children:["$",C]})]})]}),!f&&(0,Vp.jsx)("button",{onClick:async()=>{if(g(""),0===c.length)return void g("Your cart is empty. Please add items to your cart before confirming the order.");const e=s&&/\w/.test(s.line1),n=o&&/\w/.test(o.line1);if(!e||!n)return g("Both billing and shipping information are required before confirming the order."),void v(!0);try{const e={cartItems:c,billingInfo:s,shippingInfo:o,totalAmount:N(),orderDate:(new Date).toISOString()};await t(e),await(async()=>{const e=Mp.currentUser;if(e){const t=Tf(Up,"checkout",e.uid,"items"),n=(await Tp(t)).docs.map(t=>Rp(If(Up,"checkout",e.uid,"items",t.id)));await Promise.all(n)}})(),p(!0),localStorage.removeItem("cart")}catch(m){console.error("Error confirming order:",m),g("There was an error processing your order.")}},className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-full font-semibold shadow-md transition duration-300 ease-in-out mt-4",children:"Confirm Order"})]}),(0,Vp.jsx)(Qp,{})]})},Vy=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)({isOpen:!1,title:"",message:"",details:""}),[o,l]=(0,i.useState)({isOpen:!1,title:"",message:""}),[c,u]=(0,i.useState)("Checking..."),[d,h]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),{currentUser:m,role:g}=Bp();console.log("ReviewModeration - currentUser:",m),console.log("ReviewModeration - role:",g);(0,i.useEffect)(()=>{""!==g&&p(!0)},[g]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{v(),y()},1e3);return()=>clearTimeout(e)},[]);const y=async()=>{try{h(!0);const e=await fetch("https://e-commerce-6zf9.onrender.com/server-status/");if(e.ok){const t=await e.json();u(t.status)}else u("Error: Unable to fetch server status")}catch(e){u("Error: Unable to fetch server status")}finally{h(!1)}},v=async()=>{try{r(!0);const e=await fetch("/api/reviews/pending/");if(!e.ok)throw new Error("Failed to fetch pending reviews");{const n=await e.json();t(n)}}catch(e){console.error("Error fetching pending reviews:",e),a({isOpen:!0,title:"Error Loading Reviews",message:"Failed to load pending reviews. Please try again.",details:e.message})}finally{r(!1)}},b=async(e,n)=>{try{const r=await fetch(`/api/reviews/${e}/moderate/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n})});if(r.ok)l({isOpen:!0,title:"Review Moderated",message:`Review ${n} successfully`}),t(t=>t.filter(t=>t.id!==e));else{const e=await r.json();a({isOpen:!0,title:"Error Moderating Review",message:"Failed to moderate review. Please try again.",details:e.detail||e.message||"Unknown error"})}}catch(r){console.error("Error moderating review:",r),a({isOpen:!0,title:"Network Error",message:"Failed to moderate review due to a network error. Please try again.",details:r.message})}};return n?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Vp.jsx)("div",{className:"container mx-auto px-4",children:(0,Vp.jsxs)("div",{className:"animate-pulse",children:[(0,Vp.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,Vp.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})})}),(0,Vp.jsx)(Qp,{})]}):f?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(()=>{const e=m&&"admin"===g;return console.log("ReviewModeration - isAdmin check:",e,"currentUser:",!!m,"role:",g),e})()?(0,Vp.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Vp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Vp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Vp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Vp.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Server Status"}),(0,Vp.jsx)("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center",children:d?(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Vp.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Vp.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Status"]})})]}),(0,Vp.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Vp.jsx)("div",{className:"w-3 h-3 rounded-full "+("ok"===c?"bg-green-500":"bg-red-500")}),(0,Vp.jsx)("span",{className:"text-gray-700 font-medium",children:"ok"===c?"Server is running normally":c})]}),(0,Vp.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Last checked: ",(new Date).toLocaleTimeString()]})]}),(0,Vp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Vp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Vp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Review Moderation"}),(0,Vp.jsxs)("div",{className:"text-sm text-gray-600",children:[e.length," pending review",1!==e.length?"s":""]})]}),(0,Vp.jsx)(qp,{isOpen:s.isOpen,onClose:()=>a({isOpen:!1,title:"",message:"",details:""}),title:s.title,message:s.message,details:s.details}),(0,Vp.jsx)(Hp,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,title:"",message:""}),title:o.title,message:o.message}),0===e.length?(0,Vp.jsxs)("div",{className:"text-center py-12",children:[(0,Vp.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Vp.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Vp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Vp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pending Reviews"}),(0,Vp.jsx)("p",{className:"text-gray-600",children:"All reviews have been moderated."})]}):(0,Vp.jsx)("div",{className:"space-y-6",children:e.map(e=>{return(0,Vp.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,Vp.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Vp.jsxs)("div",{children:[(0,Vp.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Vp.jsx)("div",{className:"flex",children:(n=e.rating,[...Array(5)].map((e,t)=>(0,Vp.jsx)("svg",{className:"w-4 h-4 "+(t<n?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,Vp.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),(0,Vp.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,"/5)"]})]}),(0,Vp.jsx)("h3",{className:"font-medium text-gray-900",children:e.reviewer_name}),(0,Vp.jsx)("p",{className:"text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,Vp.jsxs)("div",{className:"flex space-x-2",children:[(0,Vp.jsx)("button",{onClick:()=>b(e.id,"approved"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Approve"}),(0,Vp.jsx)("button",{onClick:()=>b(e.id,"rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Reject"})]})]}),(0,Vp.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,Vp.jsx)("p",{className:"text-gray-700",children:e.comment})})]},e.id);var t,n})})]})]})})}):(0,Vp.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,Vp.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,Vp.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Access Denied"}),(0,Vp.jsx)("p",{className:"text-xl mb-8",children:"You don't have permission to access this page."}),(0,Vp.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Debug info: Role = ",g,", User = ",null===m||void 0===m?void 0:m.email]})]})}),(0,Vp.jsx)(Qp,{})]}):(0,Vp.jsxs)(Vp.Fragment,{children:[(0,Vp.jsx)(Kp,{}),(0,Vp.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Vp.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,Vp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Vp.jsx)("p",{className:"text-gray-600",children:"Loading admin permissions..."})]})}),(0,Vp.jsx)(Qp,{})]})};const zy=function(){return(0,Vp.jsx)("div",{className:"App",children:(0,Vp.jsxs)(Ne,{children:[(0,Vp.jsx)(xe,{path:"/login",element:(0,Vp.jsx)(_y,{})}),(0,Vp.jsx)(xe,{path:"/signup",element:(0,Vp.jsx)(Ey,{})}),(0,Vp.jsxs)(xe,{path:"/",element:(0,Vp.jsx)(ky,{}),children:[(0,Vp.jsx)(xe,{index:!0,element:(0,Vp.jsx)(ve,{to:"/home"})}),(0,Vp.jsx)(xe,{path:"/home",element:(0,Vp.jsx)(vy,{})}),(0,Vp.jsx)(xe,{path:"/contact",element:(0,Vp.jsx)(Sy,{})}),(0,Vp.jsx)(xe,{path:"/profile",element:(0,Vp.jsx)(Ay,{})}),(0,Vp.jsx)(xe,{path:"/about",element:(0,Vp.jsx)(Cy,{})}),(0,Vp.jsx)(xe,{path:"/search",element:(0,Vp.jsx)(Ty,{})}),(0,Vp.jsx)(xe,{path:"/categories",element:(0,Vp.jsx)(Ny,{})}),(0,Vp.jsx)(xe,{path:"/admin",element:(0,Vp.jsx)(Ry,{})}),(0,Vp.jsx)(xe,{path:"/product-crud",element:(0,Vp.jsx)(Oy,{})}),(0,Vp.jsx)(xe,{path:"/add-product",element:(0,Vp.jsx)(Py,{})}),(0,Vp.jsx)(xe,{path:"/delete-product",element:(0,Vp.jsx)(Dy,{})}),(0,Vp.jsx)(xe,{path:"/update-product",element:(0,Vp.jsx)(Fy,{})}),(0,Vp.jsx)(xe,{path:"/favorites",element:(0,Vp.jsx)(Iy,{})}),(0,Vp.jsx)(xe,{path:"/products/:id",element:(0,Vp.jsx)(xy,{})}),(0,Vp.jsx)(xe,{path:"/category/:category",element:(0,Vp.jsx)(wy,{})}),(0,Vp.jsx)(xe,{path:"/checkout",element:(0,Vp.jsx)(Uy,{})}),(0,Vp.jsx)(xe,{path:"/review-moderation",element:(0,Vp.jsx)(Vy,{})})]})]})})};(0,o.H)(document.getElementById("root")).render((0,Vp.jsx)(Ae,{children:(0,Vp.jsx)($p,{children:(0,Vp.jsx)(zy,{})})}))})();
//# sourceMappingURL=main.729555b7.js.map